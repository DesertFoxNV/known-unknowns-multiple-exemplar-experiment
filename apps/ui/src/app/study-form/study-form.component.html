<div class="d-flex justify-content-center align-items-center container min-vh-100">
  <mat-card>
    <mat-card-title>Study Form</mat-card-title>
    <mat-card-subtitle>Set the conditions and start now, or copy link to start later.</mat-card-subtitle>
    <mat-divider></mat-divider>
    <form [formGroup]="form" class="form-group form-padding-top">

      <mat-form-field *ngIf="form.get('participantId') as participantIdCtrl" appearance="outline">
        <mat-label>Participant id</mat-label>
        <input matInput formControlName="participantId">
        <mat-error *ngIf="participantIdCtrl.hasError('required')">
          Participant id is <strong>required</strong>
        </mat-error>
        <mat-error *ngIf="participantIdCtrl.hasError('minlength')">
          Participant id must be a minimum of 3 characters
        </mat-error>
      </mat-form-field>

      <mat-checkbox formControlName="idk">IDK</mat-checkbox>

      <mat-checkbox formControlName="contextualControl">Contextual control</mat-checkbox>

      <mat-form-field *ngIf="form.get('trialTimeout') as trialTimeoutCtrl" appearance="outline">
        <mat-label>Trial timeout</mat-label>
        <input matInput min="1" max="1000" type="number" formControlName="trialTimeout">
        <span matSuffix>seconds</span>
        <mat-error *ngIf="trialTimeoutCtrl.hasError('required')">
          Trial timeout is <strong>required</strong>
        </mat-error>
        <mat-error *ngIf="trialTimeoutCtrl.hasError('min')">
          Trial timeout must be a <strong>minimum</strong> of 1
        </mat-error>
        <mat-error *ngIf="trialTimeoutCtrl.hasError('max')">
          Trial timeout must be a <strong>maximum</strong> of 1000
        </mat-error>
      </mat-form-field>


      <mat-divider></mat-divider>


      <div class="form-padding-top" formGroupName="balance" *ngIf="form.get('balance') as balanceGroup">
        <div class="mat-h4">Balance</div>

        <mat-form-field *ngIf="balanceGroup.get('equalTo') as equalToCtrl" appearance="outline">
          <mat-label>Equal to</mat-label>
          <input matInput min="1" max="99" type="number" formControlName="equalTo">
          <mat-error *ngIf="equalToCtrl.hasError('required')">
            Equal to is <strong>required</strong>
          </mat-error>
          <mat-error *ngIf="equalToCtrl.hasError('min')">
            Equal to must be a <strong>minimum</strong> of 1
          </mat-error>
          <mat-error *ngIf="equalToCtrl.hasError('max')">
            Equal to must be a <strong>maximum</strong> of 99
          </mat-error>
        </mat-form-field>

        <mat-form-field *ngIf="balanceGroup.get('lessThan') as lessThanCtrl" appearance="outline">
          <mat-label>Less than</mat-label>
          <input matInput min="1" max="99" type="number" formControlName="lessThan">
          <mat-error *ngIf="lessThanCtrl.hasError('required')">
            Less than is <strong>required</strong>
          </mat-error>
          <mat-error *ngIf="lessThanCtrl.hasError('min')">
            Less than must be a <strong>minimum</strong> of 1
          </mat-error>
          <mat-error *ngIf="lessThanCtrl.hasError('max')">
            Less than must be a <strong>maximum</strong> of 99
          </mat-error>
        </mat-form-field>

        <mat-form-field *ngIf="balanceGroup.get('greaterThan') as greaterThanCtrl" appearance="outline">
          <mat-label>Greater than</mat-label>
          <input matInput min="1" max="99" type="number" formControlName="greaterThan">
          <mat-error *ngIf="greaterThanCtrl.hasError('required')">
            Greater than is <strong>required</strong>
          </mat-error>
          <mat-error *ngIf="greaterThanCtrl.hasError('min')">
            Greater than must be a <strong>minimum</strong> of 1
          </mat-error>
          <mat-error *ngIf="greaterThanCtrl.hasError('max')">
            Greater than must be a <strong>maximum</strong> of 99
          </mat-error>
        </mat-form-field>

        <mat-form-field *ngIf="balanceGroup.get('idk') as idkCtrl" appearance="outline">
          <mat-label>Idk</mat-label>
          <input matInput min="1" max="99" type="number" formControlName="idk">
          <mat-error *ngIf="idkCtrl.hasError('required')">
            Idk must is <strong>required</strong>
          </mat-error>
          <mat-error *ngIf="idkCtrl.hasError('min')">
            Idk must be a <strong>minimum</strong> of 1
          </mat-error>
          <mat-error *ngIf="idkCtrl.hasError('max')">
            Idk must be a <strong>maximum</strong> of 99
          </mat-error>
        </mat-form-field>

      </div>
    </form>
    <mat-divider></mat-divider>
    <mat-card-actions align="start">
      <button
        type="button"
        mat-button
        color="primary"
        [disabled]="form.invalid"
      >Start
      </button>

      <button type="button" mat-button color="primary" [disabled]="form.invalid" (click)="copyLink()">Copy Link</button>
    </mat-card-actions>
  </mat-card>

</div>


