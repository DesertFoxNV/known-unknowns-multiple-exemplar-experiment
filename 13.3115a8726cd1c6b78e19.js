(self.webpackChunkknown_unknowns_multiple_exemplar_experiment=self.webpackChunkknown_unknowns_multiple_exemplar_experiment||[]).push([[13],{5013:(pe,it,c)=>{"use strict";c.r(it),c.d(it,{STIMULUS_CASE:()=>Vt,StudyModule:()=>$g});var y=c(2057),s=c(4788),Ht=c(2895),U=c(7639),L=c(9765),$=(c(6215),c(7574),c(6682),c(5435)),Q=c(8307);const p={provide:s.tb,useFactory:function(t,i){return()=>{if((0,y.NF)(i)){const e=Array.from(t.querySelectorAll(`[class*=${D}]`)),n=/\bflex-layout-.+?\b/g;e.forEach(r=>{r.classList.contains(`${D}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(n,"")})}}},deps:[y.K0,s.Lbi],multi:!0},D="flex-layout-";let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[p]}),t})();const St={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},z=new s.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>St}),st=new s.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),ye=new s.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});c(9490),c(6782),c(1211);let mi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[R]]}),t})();var Mt=c(6794);let vi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[R,Mt.vT]]}),t})(),Fi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[R]]}),t})(),mt=(()=>{class t{constructor(e,n){(0,y.PM)(n)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,n=[]){return{ngModule:t,providers:e.serverLoaded?[{provide:z,useValue:Object.assign(Object.assign({},St),e)},{provide:ye,useValue:n,multi:!0},{provide:st,useValue:!0}]:[{provide:z,useValue:Object.assign(Object.assign({},St),e)},{provide:ye,useValue:n,multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(st),s.LFG(s.Lbi))},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[vi,mi,Fi],vi,mi,Fi]}),t})();var rt=c(933),ot=c(2414),lt=c(7935),Uo=c(1439),Wo=c(5917),Ce=c(5257),Jo=c(9761),we=c(9642),b=c(6083),Ti=c(3328),Mi=c(2371);function Xo(t,i){}class _e{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const tl={dialogContainer:(0,b.X$)("dialogContainer",[(0,b.SB)("void, exit",(0,b.oB)({opacity:0,transform:"scale(0.7)"})),(0,b.SB)("enter",(0,b.oB)({transform:"none"})),(0,b.eR)("* => enter",(0,b.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,b.oB)({transform:"none",opacity:1}))),(0,b.eR)("* => void, * => exit",(0,b.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,b.oB)({opacity:0})))])};let el=(()=>{class t extends ot.en{constructor(e,n,r,o,l,a){super(),this._elementRef=e,this._focusTrapFactory=n,this._changeDetectorRef=r,this._config=l,this._focusMonitor=a,this._animationStateChanged=new s.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=d=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(d)),this._ariaLabelledBy=l.ariaLabelledBy||null,this._document=o}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const n=(0,we.ht)(),r=this._elementRef.nativeElement;(!n||n===this._document.body||n===r||r.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,we.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=(0,we.ht)();return e===n||e.contains(n)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(Mi.qV),s.Y36(s.sBO),s.Y36(y.K0,8),s.Y36(_e),s.Y36(Mi.tE))},t.\u0275dir=s.lG2({type:t,viewQuery:function(e,n){if(1&e&&s.Gf(ot.Pl,7),2&e){let r;s.iGM(r=s.CRH())&&(n._portalOutlet=r.first)}},features:[s.qOj]}),t})(),il=(()=>{class t extends el{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:n}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:e,totalTime:n}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=s.n5z(t)))(n||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,n){1&e&&s.WFA("@dialogContainer.start",function(o){return n._onAnimationStart(o)})("@dialogContainer.done",function(o){return n._onAnimationDone(o)}),2&e&&(s.Ikx("id",n._id),s.uIk("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),s.d8E("@dialogContainer",n._state))},features:[s.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&s.YNc(0,Xo,0,0,"ng-template",0)},directives:[ot.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[tl.dialogContainer]}}),t})(),nl=0;class Gt{constructor(i,e,n="mat-dialog-"+nl++){this._overlayRef=i,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new L.xQ,this._afterClosed=new L.xQ,this._beforeClosed=new L.xQ,this._state=0,e._id=n,e._animationStateChanged.pipe((0,$.h)(r=>"opened"===r.state),(0,Ce.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe((0,$.h)(r=>"closed"===r.state),(0,Ce.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),i.keydownEvents().pipe((0,$.h)(r=>r.keyCode===Ti.hY&&!this.disableClose&&!(0,Ti.Vb)(r))).subscribe(r=>{r.preventDefault(),be(this,"keyboard")}),i.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():be(this,"mouse")})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe((0,$.h)(e=>"closing"===e.state),(0,Ce.q)(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(i){let e=this._getPositionStrategy();return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(i="",e=""){return this._overlayRef.updateSize({width:i,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(i){return this._overlayRef.addPanelClass(i),this}removePanelClass(i){return this._overlayRef.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function be(t,i,e){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=i),t.close(e)}const De=new s.OlP("MatDialogData"),sl=new s.OlP("mat-dialog-default-options"),Ri=new s.OlP("mat-dialog-scroll-strategy"),ol={provide:Ri,deps:[rt.aV],useFactory:function(t){return()=>t.scrollStrategies.block()}};let ll=(()=>{class t{constructor(e,n,r,o,l,a,d,g,m){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=l,this._dialogRefConstructor=d,this._dialogContainerType=g,this._dialogDataToken=m,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new L.xQ,this._afterOpenedAtThisLevel=new L.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Uo.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Jo.O)(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,n){(n=function(t,i){return Object.assign(Object.assign({},i),t)}(n,this._defaultOptions||new _e)).id&&this.getDialogById(n.id);const r=this._createOverlay(n),o=this._attachDialogContainer(r,n),l=this._attachDialogContent(e,o,r,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.afterClosed().subscribe(()=>this._removeOpenDialog(l)),this.afterOpened.next(l),o._initializeWithAttachedContent(),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const n=this._getOverlayConfig(e);return this._overlay.create(n)}_getOverlayConfig(e){const n=new rt.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachDialogContainer(e,n){const o=s.zs3.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:_e,useValue:n}]}),l=new ot.C5(this._dialogContainerType,n.viewContainerRef,o,n.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,n,r,o){const l=new this._dialogRefConstructor(r,n,o.id);if(e instanceof s.Rgc)n.attachTemplatePortal(new ot.UE(e,null,{$implicit:o.data,dialogRef:l}));else{const a=this._createInjector(o,l,n),d=n.attachComponentPortal(new ot.C5(e,o.viewContainerRef,a));l.componentInstance=d.instance}return l.updateSize(o.width,o.height).updatePosition(o.position),l}_createInjector(e,n,r){const o=e&&e.viewContainerRef&&e.viewContainerRef.injector,l=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:n}];return e.direction&&(!o||!o.get(Mt.Is,null,s.XFs.Optional))&&l.push({provide:Mt.Is,useValue:{value:e.direction,change:(0,Wo.of)()}}),s.zs3.create({parent:o||this._injector,providers:l})}_removeOpenDialog(e){const n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,o)=>{r?o.setAttribute("aria-hidden",r):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){let o=n[r];o!==e&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(rt.aV),s.Y36(s.zs3),s.Y36(void 0),s.Y36(void 0),s.Y36(rt.Xj),s.Y36(void 0),s.Y36(s.DyG),s.Y36(s.DyG),s.Y36(s.OlP))},t.\u0275dir=s.lG2({type:t}),t})(),Z=(()=>{class t extends ll{constructor(e,n,r,o,l,a,d){super(e,n,o,a,d,l,Gt,il,De)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(rt.aV),s.LFG(s.zs3),s.LFG(y.Ye,8),s.LFG(sl,8),s.LFG(Ri),s.LFG(t,12),s.LFG(rt.Xj))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),Ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[Z,ol],imports:[[rt.U8,ot.eL,lt.BQ],lt.BQ]}),t})(),ul=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,lt.si]]}),t})(),cl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,lt.si]]}),t})(),gl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,mt]]}),t})(),Et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,U.QW,ul,cl,gl]]}),t})(),fl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,mt,Ot,Et]]}),t})(),Qt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,lt.si]]}),t})(),hl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Qt,y.ez,mt,Ot,Et]]}),t})(),ml=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Qt,y.ez,mt,Ot,Et]]}),t})(),pl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Qt,y.ez,mt,Ot,Et]]}),t})(),yl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Qt,y.ez,mt,Ot,Et]]}),t})();var xl=c(7012);const Oi=function(t){var i=t.length;return i?t[(0,xl.Z)(0,i-1)]:void 0};var Ei=c(4724);const Cl=function(t){return Oi((0,Ei.Z)(t))};var pt=c(4654);const Zt=function(t){return((0,pt.Z)(t)?Oi:Cl)(t)},Se=["RWK","PGZ","QGK","FNK","ZVB","PWU","PLJ","KNF","GVW","KXL","GRQ","WPQ","BQP","FXX","ZTF","SGG","GQF","VXO","DZF","ZHD","JHH","VQP","JXY","ZVS","HGD","FJX","VHK","JTP","JTS","UHJ","WTZ","CXF","XFH","LWK","NWK","ZRG","FDG","NQC","WPW","YVR","HLJ","WBX","VGH","KXW","XAQ","WQG","DGJ","QUZ","QZX","HWL","DKX","ZDW","RZJ","VGJ","VWL","MKP","JFJ","GQY","BRX","IHG","YVP","SXG","FJC","QKU","WZY","QHJ","YTZ","RHF","YYB","QFH","ZUX","TQT","VZZ","BTQ","DHQ","XLW","VLW","VZJ","GGK","SWK","UFH","GPN","JSX","IQP","QUP","XDG","QWN","CBK","JVH","VXG","YBF","BVY","QZW","UPZ","WMX","XVN","RRX","QTX","DZN","WXP"],Li={lower:"lower",upper:"upper"},_l=Object.values(Li);function j(t){const i=Zt(Se);if(void 0===i)throw Error('Random value returned "undefined"!');const e=Se.indexOf(i);return e>-1&&Se.splice(e,1),t===Li.lower?i.toLowerCase():i.toUpperCase()}var F=(()=>{return(t=F||(F={})).identity="identity",t.trained="trained",t.mutuallyEntailed="mutually entailed",t.combinatoriallyEntailed="combinatorially entailed",F;var t})();class P extends class{constructor(i,e){this.dest=e,this.src=i}toString(){return`${this.src}->${this.dest}`}}{constructor(i,e,n,r){super(i,e),this.relation=n,this.relationType=r}toString(){return`${this.src} ${this.relation} ${this.dest} (${this.relationType})`}}var Fe=c(6224);const Kt=function(t,i){for(var e=t.length;e--;)if((0,Fe.Z)(t[e][0],i))return e;return-1};var Ml=Array.prototype.splice;function yt(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}yt.prototype.clear=function(){this.__data__=[],this.size=0},yt.prototype.delete=function(t){var i=this.__data__,e=Kt(i,t);return!(e<0||(e==i.length-1?i.pop():Ml.call(i,e,1),--this.size,0))},yt.prototype.get=function(t){var i=this.__data__,e=Kt(i,t);return e<0?void 0:i[e][1]},yt.prototype.has=function(t){return Kt(this.__data__,t)>-1},yt.prototype.set=function(t,i){var e=this.__data__,n=Kt(e,t);return n<0?(++this.size,e.push([t,i])):e[n][1]=i,this};const Ut=yt;var xt=c(4423),at=c(309);const Lt=(0,xt.Z)(at.Z,"Map"),Bt=(0,xt.Z)(Object,"create");var ta=Object.prototype.hasOwnProperty;var sa=Object.prototype.hasOwnProperty;function vt(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}vt.prototype.clear=function(){this.__data__=Bt?Bt(null):{},this.size=0},vt.prototype.delete=function(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},vt.prototype.get=function(t){var i=this.__data__;if(Bt){var e=i[t];return"__lodash_hash_undefined__"===e?void 0:e}return ta.call(i,t)?i[t]:void 0},vt.prototype.has=function(t){var i=this.__data__;return Bt?void 0!==i[t]:sa.call(i,t)},vt.prototype.set=function(t,i){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Bt&&void 0===i?"__lodash_hash_undefined__":i,this};const Bi=vt,Wt=function(t,i){var e=t.__data__;return function(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}(i)?e["string"==typeof i?"string":"hash"]:e.map};function At(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}At.prototype.clear=function(){this.size=0,this.__data__={hash:new Bi,map:new(Lt||Ut),string:new Bi}},At.prototype.delete=function(t){var i=Wt(this,t).delete(t);return this.size-=i?1:0,i},At.prototype.get=function(t){return Wt(this,t).get(t)},At.prototype.has=function(t){return Wt(this,t).has(t)},At.prototype.set=function(t,i){var e=Wt(this,t),n=e.size;return e.set(t,i),this.size+=e.size==n?0:1,this};const Ii=At;function Ct(t){var i=this.__data__=new Ut(t);this.size=i.size}Ct.prototype.clear=function(){this.__data__=new Ut,this.size=0},Ct.prototype.delete=function(t){var i=this.__data__,e=i.delete(t);return this.size=i.size,e},Ct.prototype.get=function(t){return this.__data__.get(t)},Ct.prototype.has=function(t){return this.__data__.has(t)},Ct.prototype.set=function(t,i){var e=this.__data__;if(e instanceof Ut){var n=e.__data__;if(!Lt||n.length<199)return n.push([t,i]),this.size=++e.size,this;e=this.__data__=new Ii(n)}return e.set(t,i),this.size=e.size,this};const Jt=Ct;var ki=c(5427),Ta=c(2753);const Xt=function(t,i,e,n){var r=!e;e||(e={});for(var o=-1,l=i.length;++o<l;){var a=i[o],d=n?n(e[a],t[a],a,e,t):void 0;void 0===d&&(d=t[a]),r?(0,Ta.Z)(e,a,d):(0,ki.Z)(e,a,d)}return e};var Te=c(1163);var Oa=c(4741),wt=c(4214),Pi=c(1550);var Ia=Object.prototype.hasOwnProperty;const Pa=function(t){if(!(0,wt.Z)(t))return function(t){var i=[];if(null!=t)for(var e in Object(t))i.push(e);return i}(t);var i=(0,Pi.Z)(t),e=[];for(var n in t)"constructor"==n&&(i||!Ia.call(t,n))||e.push(n);return e};var ji=c(8402);const Me=function(t){return(0,ji.Z)(t)?(0,Oa.Z)(t,!0):Pa(t)};var Yi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ni=Yi&&"object"==typeof module&&module&&!module.nodeType&&module,Vi=Ni&&Ni.exports===Yi?at.Z.Buffer:void 0,Hi=Vi?Vi.allocUnsafe:void 0;var qi=c(6889);const $i=function(){return[]};var Ka=Object.prototype.propertyIsEnumerable,zi=Object.getOwnPropertySymbols;const Re=zi?function(t){return null==t?[]:(t=Object(t),function(t,i){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var l=t[e];i(l,e,t)&&(o[r++]=l)}return o}(zi(t),function(i){return Ka.call(t,i)}))}:$i,Qi=function(t,i){for(var e=-1,n=i.length,r=t.length;++e<n;)t[r+e]=i[e];return t},Zi=(0,c(4184).Z)(Object.getPrototypeOf,Object),Ki=Object.getOwnPropertySymbols?function(t){for(var i=[];t;)Qi(i,Re(t)),t=Zi(t);return i}:$i,Ui=function(t,i,e){var n=i(t);return(0,pt.Z)(t)?n:Qi(n,e(t))},Ge=function(t){return Ui(t,Te.Z,Re)},dd=function(t){return Ui(t,Me,Ki)},Oe=(0,xt.Z)(at.Z,"DataView"),Ee=(0,xt.Z)(at.Z,"Promise"),Le=(0,xt.Z)(at.Z,"Set"),Be=(0,xt.Z)(at.Z,"WeakMap");var Ie=c(4796),_t=c(2035),Wi="[object Map]",Ji="[object Promise]",Xi="[object Set]",tn="[object WeakMap]",en="[object DataView]",md=(0,_t.Z)(Oe),pd=(0,_t.Z)(Lt),yd=(0,_t.Z)(Ee),xd=(0,_t.Z)(Le),vd=(0,_t.Z)(Be),dt=Ie.Z;(Oe&&dt(new Oe(new ArrayBuffer(1)))!=en||Lt&&dt(new Lt)!=Wi||Ee&&dt(Ee.resolve())!=Ji||Le&&dt(new Le)!=Xi||Be&&dt(new Be)!=tn)&&(dt=function(t){var i=(0,Ie.Z)(t),e="[object Object]"==i?t.constructor:void 0,n=e?(0,_t.Z)(e):"";if(n)switch(n){case md:return en;case pd:return Wi;case yd:return Ji;case xd:return Xi;case vd:return tn}return i});const It=dt;var Cd=Object.prototype.hasOwnProperty;const te=at.Z.Uint8Array,ke=function(t){var i=new t.constructor(t.byteLength);return new te(i).set(new te(t)),i};var Td=/\w*$/;var ee=c(5770),nn=ee.Z?ee.Z.prototype:void 0,sn=nn?nn.valueOf:void 0;const eu=function(t,i,e){var n=t.constructor;switch(i){case"[object ArrayBuffer]":return ke(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return function(t,i){var e=i?ke(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,i){var e=i?ke(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return function(t){var i=new t.constructor(t.source,Td.exec(t));return i.lastIndex=t.lastIndex,i}(t);case"[object Set]":return new n;case"[object Symbol]":return function(t){return sn?Object(sn.call(t)):{}}(t)}};var rn=Object.create;const nu=function(){function t(){}return function(i){if(!(0,wt.Z)(i))return{};if(rn)return rn(i);t.prototype=i;var e=new t;return t.prototype=void 0,e}}();var Pe=c(4909),kt=c(6539);var on=c(1162),ie=c(8514),ln=ie.Z&&ie.Z.isMap;const uu=ln?(0,on.Z)(ln):function(t){return(0,kt.Z)(t)&&"[object Map]"==It(t)};var an=ie.Z&&ie.Z.isSet;const mu=an?(0,on.Z)(an):function(t){return(0,kt.Z)(t)&&"[object Set]"==It(t)};var dn="[object Arguments]",un="[object Function]",cn="[object Object]",T={};T[dn]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[cn]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[un]=T["[object WeakMap]"]=!1;const Vu=function ne(t,i,e,n,r,o){var l,a=1&i,d=2&i,g=4&i;if(e&&(l=r?e(t,n,r,o):e(t)),void 0!==l)return l;if(!(0,wt.Z)(t))return t;var m=(0,pt.Z)(t);if(m){if(l=function(t){var i=t.length,e=new t.constructor(i);return i&&"string"==typeof t[0]&&Cd.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!a)return(0,qi.Z)(t,l)}else{var f=It(t),x=f==un||"[object GeneratorFunction]"==f;if((0,Pe.Z)(t))return function(t,i){if(i)return t.slice();var e=t.length,n=Hi?Hi(e):new t.constructor(e);return t.copy(n),n}(t,a);if(f==cn||f==dn||x&&!r){if(l=d||x?{}:function(t){return"function"!=typeof t.constructor||(0,Pi.Z)(t)?{}:nu(Zi(t))}(t),!a)return d?function(t,i){return Xt(t,Ki(t),i)}(t,function(t,i){return t&&Xt(i,Me(i),t)}(l,t)):function(t,i){return Xt(t,Re(t),i)}(t,function(t,i){return t&&Xt(i,(0,Te.Z)(i),t)}(l,t))}else{if(!T[f])return r?t:{};l=eu(t,f,a)}}o||(o=new Jt);var A=o.get(t);if(A)return A;o.set(t,l),mu(t)?t.forEach(function(E){l.add(ne(E,i,e,E,t,o))}):uu(t)&&t.forEach(function(E,w){l.set(w,ne(E,i,e,w,t,o))});var _=m?void 0:(g?d?dd:Ge:d?Me:Te.Z)(t);return function(t,i){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==i(t[e],e,t););}(_||t,function(E,w){_&&(E=t[w=E]),(0,ki.Z)(l,w,ne(E,i,e,w,t,o))}),l},se=function(t){return Vu(t,5)};class je extends class{constructor(){this.edges=new Map,this.nodes=new Set}addEdge(i){var e;const n=i.src,r=i.dest;if(!this.hasNode(n))throw Error(`addEdge failed source node "${n.toString()}" is not in graph.`);if(!this.hasNode(r))throw Error(`addEdge failed destination node "${r.toString()}" is not in graph.`);if(null===(e=this.edges.get(i.src))||void 0===e?void 0:e.some(o=>o.src===n&&o.dest===r))throw Error(`Add edge failed an edge already exists with src ${n.toString()} => dest ${r.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i))}addNode(i){if(this.nodes.has(i))throw Error(`addNode failed node "${i.toString()}" already exists`);this.nodes.add(i),this.edges.set(i,[])}findPathway(i,e,n,r={nodes:[],edges:[]},o=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===e)return o.concat(r);for(const l of this.getEdgesForNode(i))if(!r.nodes.map(a=>a.toString()).includes(l.dest.toString())){const a=this.findPathway(l.dest,e,l,se(r),o);a&&(o=o.concat(a))}return o}getEdgesForNode(i){return this.edges.get(i)||[]}hasNode(i){return this.nodes.has(i)}toString(){return Array.from(this.edges.values()).flat().filter(Boolean).map(i=>i.toString()).join("\n")}}{constructor(i){super(),this.includeRelationsBetweenNetworks=!1,this.selfRelation=i.selfRelation,this.unknownRelation=i.unknownRelation,this.mutualDictionary=i.mutualDictionary,this.combinatorialDictionary=i.combinatorialDictionary}get combinatoriallyEntailed(){const i=[],e=[...this.nodes];for(const n of e)for(const r of e){if(n===r||!this.includeRelationsBetweenNetworks&&n.network!==r.network||this.getEdgesForNode(n).find(l=>l.dest===r))continue;const o=this.findPathway(n,r).map(l=>l.edges.map(a=>a.relation)).reduce((l,a,d)=>{const g=[...a];let m=g.shift();for(;g.length;){const f=g.shift();m=this.combinatorialDictionary[m][f]}return l.push(m),a.length=0,l},[]);0===o.length&&o.push(this.unknownRelation),[...new Set(o.filter(l=>l!==this.unknownRelation))].length>1?console.warn(`Multiple relations detected for ${n.toString()} => ${r.toString()} comparison`,o):i.push({relation:o[0],relationType:F.combinatoriallyEntailed,stimuli:[n,r]})}return i}get identities(){return[...this.nodes].map(i=>({relation:this.selfRelation,relationType:F.identity,stimuli:[i,i]}))}get mutuallyEntailed(){return[...this.edges.values()].flat().filter(i=>i.relationType===F.mutuallyEntailed).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}get trained(){return[...this.edges.values()].flat().filter(i=>i.relationType===F.trained).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}addTrainedAndMutualRelations(i){var e,n;const r=i.src,o=i.dest;if(!this.hasNode(r))throw Error(`Add edge failed source node "${r.toString()}" is not in graph.`);if(!this.hasNode(o))throw Error(`Add edge failed destination node "${o.toString()}" is not in graph.`);if(!(null===(e=this.mutualDictionary)||void 0===e?void 0:e[i.relation]))throw Error(`Could not find inverse of relation ${i.relation}`);if(null===(n=this.edges.get(i.src))||void 0===n?void 0:n.some(l=>l.src===r&&l.dest===o))throw Error(`Add edge failed an edge already exists with src ${r.toString()} => dest ${o.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i)),this.edges.set(i.dest,this.edges.get(i.dest).concat(new P(i.dest,i.src,this.mutualDictionary[i.relation],F.mutuallyEntailed)))}findPathway(i,e,n,r={nodes:[],edges:[]},o=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===e)return o.concat(r);for(const l of this.getEdgesForNode(i))if(!r.nodes.map(a=>a.toString()).includes(l.dest.toString())){const a=this.findPathway(l.dest,e,l,se(r),o);a&&(o=o.concat(a))}return o}toString(){return[].concat(this.identities,this.trained,this.mutuallyEntailed,this.combinatoriallyEntailed).flat().map(i=>`${i.relationType}: ${i.stimuli[0]} ${i.relation} ${i.stimuli[1]}`).join("\n")}}class Y{constructor(i,e,n=""){this.name=i,this.network=e,this.value=n}repr(){return`new RelationalFrameNode('${this.name}','${this.network}','${this.value}')`}toString(){return`${this.name}${this.network}`}}var Ye=c(202);let gn=(()=>{class t extends je{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n,this.includeRelationsBetweenNetworks=!0;const r=new Y("A",1,j(e)),o=new Y("B",1,j(e)),l=new Y("C",1,j(e));this.addNode(r),this.addNode(o),this.addNode(l),this.addEdge(new P(r,o,"different",F.trained)),this.addEdge(new P(r,l,"different",F.trained)),this.addEdge(new P(o,r,"different",F.trained)),this.addEdge(new P(o,l,"different",F.trained)),this.addEdge(new P(l,r,"different",F.trained)),this.addEdge(new P(l,o,"different",F.trained));const a=new Y("D",2,j(e)),d=new Y("E",2,j(e)),g=new Y("F",2,j(e));this.addNode(a),this.addNode(d),this.addNode(g)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Vt),s.LFG(Ye.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=c(2745);const Qu=[[h.bR.same,h.bR.same,void 0],[h.bR.same,h.bR.greaterThan,void 0],[h.bR.same,h.bR.lessThan,void 0],[h.bR.lessThan,h.bR.same,void 0],[h.bR.lessThan,void 0,h.bR.lessThan],[h.bR.lessThan,h.bR.greaterThan,void 0],[h.bR.greaterThan,h.bR.same,void 0],[h.bR.greaterThan,h.bR.lessThan,void 0],[h.bR.greaterThan,void 0,h.bR.greaterThan]],Zu=[[h.bR.lessThan,h.bR.lessThan,void 0],[h.bR.greaterThan,h.bR.greaterThan,void 0]];let Ne=(()=>{class t extends je{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n;const r=new Y("A",3,j(e)),o=new Y("B",3,j(e)),l=new Y("C",3,j(e));this.addNode(r),this.addNode(o),this.addNode(l);const[a,d,g]=Zt(Qu);a&&this.addTrainedAndMutualRelations(new P(r,o,a,F.trained)),d&&this.addTrainedAndMutualRelations(new P(r,l,d,F.trained)),g&&this.addTrainedAndMutualRelations(new P(o,l,g,F.trained));const m=new Y("A",4,j(e)),f=new Y("B",4,j(e)),x=new Y("C",4,j(e));this.addNode(m),this.addNode(f),this.addNode(x);const[A,S,_]=Zt(Zu);A&&this.addTrainedAndMutualRelations(new P(m,f,A,F.trained)),S&&this.addTrainedAndMutualRelations(new P(m,x,S,F.trained)),_&&this.addTrainedAndMutualRelations(new P(f,x,_,F.trained))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Vt),s.LFG(Ye.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fn=(()=>{class t extends je{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n;const r=new Y("A",5,j(e)),o=new Y("B",5,j(e)),l=new Y("C",5,j(e));this.addNode(r),this.addNode(o),this.addNode(l),this.addTrainedAndMutualRelations(new P(r,o,"same",F.trained)),this.addTrainedAndMutualRelations(new P(r,l,"same",F.trained)),this.addTrainedAndMutualRelations(new P(o,l,"same",F.trained));const a=new Y("A",6,j(e)),d=new Y("B",6,j(e)),g=new Y("C",6,j(e));this.addNode(a),this.addNode(d),this.addNode(g),this.addTrainedAndMutualRelations(new P(a,d,"greaterThan",F.trained)),this.addTrainedAndMutualRelations(new P(a,g,"greaterThan",F.trained)),this.addTrainedAndMutualRelations(new P(d,g,"greaterThan",F.trained))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Vt),s.LFG(Ye.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ku(){const t=Zt(_l);if(void 0===t)throw Error('Random stimulus case returned "undefined"!');return t}var hn=c(2636),ut=c(4762),bt=c(9524),Uu=c(2759),Dt=c(6797),Pt=c(8049),jt=c(3190);function re(t){return(0,b.X$)((null==t?void 0:t.anchor)||"fadeOut",[(0,b.SB)("false",(0,b.oB)({visibility:"visible",opacity:1})),(0,b.SB)(":leave",(0,b.oB)({visibility:"visible",opacity:1})),(0,b.SB)("true",(0,b.oB)({visibility:"hidden",opacity:0})),(0,b.eR)("void => *",(0,b.jt)(0)),(0,b.eR)("* => true",(0,b.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}const N=150;let He=(()=>{class t{constructor(e,n){this.data=e,this.ref=n,this.animated=!1,this.disableClose=Boolean(this.data.disableClose)}close(){return(0,ut.mG)(this,void 0,void 0,function*(){this.animated=!0,yield(0,Dt.H)(N).toPromise(),this.ref.close()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(De),s.Y36(Gt))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block-start-dialog"]],decls:3,vars:3,consts:[["matRipple","",1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white",3,"matRippleDisabled","tap"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.NdJ("tap",function(){return!1===n.disableClose&&n.close()}),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",n.animated)("matRippleDisabled",n.animated||n.disableClose),s.xp6(2),s.Oqu(n.data.text))},directives:[lt.wG],styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:clamp(1rem,8vw,15rem);line-height:clamp(1rem,8vw,15rem);text-align:center}"],data:{animation:[re({duration:N})]}}),t})();var K=c(7214);const pn=function(t,i,e){return t==t&&(void 0!==e&&(t=t<=e?t:e),void 0!==i&&(t=t>=i?t:i)),t};var yn=c(1994);const Xu=function(t,i){return(0,yn.Z)((0,qi.Z)(t),pn(i,0,t.length))},ec=function(t,i){var e=(0,Ei.Z)(t);return(0,yn.Z)(e,pn(i,0,e.length))};var ic=c(8078);var rc=/\s/;var ac=/^\s+/;const uc=function(t){return t&&t.slice(0,function(t){for(var i=t.length;i--&&rc.test(t.charAt(i)););return i}(t)+1).replace(ac,"")};var hc=/^[-+]0x[0-9a-f]+$/i,mc=/^0b[01]+$/i,pc=/^0o[0-7]+$/i,yc=parseInt;const vc=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||(0,kt.Z)(t)&&"[object Symbol]"==(0,Ie.Z)(t)}(t))return NaN;if((0,wt.Z)(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=(0,wt.Z)(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=uc(t);var e=mc.test(t);return e||pc.test(t)?yc(t.slice(2),e?2:8):hc.test(t)?NaN:+t},bc=function(t){var i=function(t){return t?1/0===(t=vc(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),e=i%1;return i==i?e?i-e:i:0},qe=function(t,i,e){return i=(e?function(t,i,e){if(!(0,wt.Z)(e))return!1;var n=typeof i;return!!("number"==n?(0,ji.Z)(e)&&(0,ic.Z)(i,e.length):"string"==n&&i in e)&&(0,Fe.Z)(e[i],t)}(t,i,e):void 0===i)?1:bc(i),((0,pt.Z)(t)?Xu:ec)(t,i)};var v=c(4751);const Yt={_origin:"https://api.emailjs.com"};class wn{constructor(i){this.status=i.status,this.text=i.responseText}}const bn=(t,i,e,n)=>{const r=n||Yt._userID;return((t,i,e)=>{if(!t)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!i)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(r,t,i),((t,i,e={})=>new Promise((n,r)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:l})=>{const a=new wn(l);200===a.status||"OK"===a.text?n(a):r(a)}),o.addEventListener("error",({target:l})=>{r(new wn(l))}),o.open("POST",Yt._origin+t,!0),Object.keys(e).forEach(l=>{o.setRequestHeader(l,e[l])}),o.send(i)}))("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:r,service_id:t,template_id:i,template_params:e}),{"Content-type":"application/json"})};var $e=c(9119);const Dn="Throughout this experiment, you will be presented with two sets of letter sequences, one at the top portion of\n    the screen and one in the middle portion of the screen. You will also be presented with some response option\n    buttons along the bottom of the screen. These buttons may denote the relationship between the letter sequences.\n    They may or may not be familiar to you. Your task is to select the response option that accurately represents the\n    relationship between the letter sequences. You can make your selection by touching the screen or clicking on the\n    relevant response option at the bottom of the screen.\n\n    Your participation has to be done in one sitting. Typically, participation takes approximately 90 minutes or more to\n    complete. To successfully complete, it is recommended that you minimize sources of distraction while\n    participating. This includes being in a quiet space away from other devices and putting this device on \u201cDo not\n    disturb\u201d mode or its equivalent.\n\n    Successful completion may be challenging and confusing. Please persist to the end and give it your best effort.\n    During some portions of the experiment you will be provided feedback on your selections. If you don\u2019t see\n    feedback, please continue making selections. There is a time limit for making your selections. Please choose your\n    response as fast as you can while still being accurate. Your compensation will go up the more accurate you are.\n\n    This experiment will restart if it is no longer the active window. In order to complete quickly, please do not open \n    other tabs or software while doing this task.";var Fc=c(2376);let ct=(()=>{class t{constructor(e,n){this.fb=e,this.studyConfigService=n,this.reportEntries=[],this.formGroup=this.fb.group({studyInstructions:[""],participantId:["",v.kI.required],iCannotKnow:["",v.kI.required],contextualControl:["",v.kI.required],cueType:["",[v.kI.required]],trialTimeoutSeconds:[0,v.kI.min(1)],balanceEquivalence:[0,v.kI.min(1)],balanceLessThan:[0,v.kI.min(1)],balanceGreaterThan:[0,v.kI.min(1)],balanceICannotKnow:[-1,v.kI.min(0)],blockId:["",v.kI.required],blockAttempts:[-1,v.kI.min(0)],stimulusCase:["",v.kI.required],trainingAttempts:[-1,v.kI.min(0)],probeAttempts:[-1,v.kI.min(0)],trialNumber:[-1,v.kI.min(0)],totalTrials:[-1,v.kI.min(0)],sampleNode:["",v.kI.required],sample:["",v.kI.required],comparisonNode:["",v.kI.required],comparison:["",v.kI.required],correctResponse:["",v.kI.required],button1Image:["",v.kI.required],button1Relation:["",v.kI.required],button2Image:["",v.kI.required],button2Relation:["",v.kI.required],button3Image:["",v.kI.required],button3Relation:["",v.kI.required],button4Image:["",v.kI.required],button4Relation:["",v.kI.required],buttonPosition:[-2,v.kI.min(-1)],selectedResponse:[""],consequence:[""],trialStarted:["",v.kI.required],trialCompleted:["",v.kI.required],trialDurationInSeconds:[-1,v.kI.min(0)],trialOutcome:["",v.kI.required],containsSequentialTriplicates:["",v.kI.required],failSafeDuration:["",v.kI.required],startInstructions:["",v.kI.required],retryInstructions:["",v.kI.required],studyFailed:["FALSE"],sequentialCorrect:[-1,v.kI.min(0)]})}add(e,n){this.formGroup.get(e).setValue(n)}addTrial(e,n){var r,o;if(!e.studyConfig)throw Error("Study configuration is undefined");this.studyConfig=e.studyConfig,this.add("studyInstructions",0===this.reportEntries.length?Dn.replaceAll("\n",""):""),this.add("participantId",e.studyConfig.participantId),this.add("iCannotKnow",e.studyConfig.iCannotKnow),this.add("contextualControl",e.studyConfig.contextualControl),this.add("cueType",e.studyConfig.cueType),this.add("trialTimeoutSeconds",e.studyConfig.trialTimeoutSeconds),this.add("balanceEquivalence",e.studyConfig.balance.same),this.add("balanceLessThan",e.studyConfig.balance.lessThan),this.add("balanceGreaterThan",e.studyConfig.balance.greaterThan),this.add("balanceICannotKnow",null!==(r=e.studyConfig.balance.iCannotKnow)&&void 0!==r?r:0),this.add("blockId",e.name),this.add("blockAttempts",e.attempts),this.add("trainingAttempts",e.trainingAttempts),this.add("probeAttempts",e.probeAttempts),this.add("trialNumber",e.trialNum),this.add("totalTrials",e.totalTrials),this.add("sampleNode",e.trial.stimuli[0].toString()),this.add("sample",e.trial.stimuli[0].value),this.add("comparisonNode",e.trial.stimuli[1].toString()),this.add("comparison",e.trial.stimuli[1].value),this.add("correctResponse",e.trial.relation),this.add("button1Image",e.trial.cueComponentConfigs[0].fileName),this.add("button1Relation",e.trial.cueComponentConfigs[0].value),this.add("button2Image",e.trial.cueComponentConfigs[1].fileName),this.add("button2Relation",e.trial.cueComponentConfigs[1].value),this.add("button3Image",e.trial.cueComponentConfigs[2].fileName),this.add("button3Relation",e.trial.cueComponentConfigs[2].value),this.add("button4Image",e.trial.cueComponentConfigs.length>=4?e.trial.cueComponentConfigs[3].fileName:"UNDEFINED"),this.add("button4Relation",e.trial.cueComponentConfigs.length>=4?e.trial.cueComponentConfigs[3].value:"UNDEFINED"),this.add("buttonPosition",(null==n?void 0:n.position)?n.position:-1),this.add("selectedResponse",(null==n?void 0:n.cue)?n.cue.value:""),this.add("consequence",(null==n?void 0:n.cue)?(null==e?void 0:e.feedback)?e.feedback:"NEXT TRIAL":"TIME EXPIRED"),this.add("trialStarted",n.startedAt),this.add("trialCompleted",n.completedAt),this.add("trialDurationInSeconds",Math.abs(n.startedAt.getTime()-n.completedAt.getTime())/1e3),this.add("trialOutcome",(null===(o=null==n?void 0:n.cue)||void 0===o?void 0:o.value)===e.trial.relation?"PASS":"FAIL"),this.add("containsSequentialTriplicates",e.containsSequentialTriplicates?"TRUE":"FALSE"),this.add("failSafeDuration",e.failSafeDuration.toString()),this.add("startInstructions",e.startInstructions),this.add("retryInstructions",e.retryInstructions),this.add("studyFailed",e.studyFailed?"TRUE":"FALSE"),this.add("sequentialCorrect",e.sequentialCorrect),this.reportEntries.push(this.formGroup.value),this.formGroup.reset()}blobToBase64(e){return new Promise((n,r)=>{const o=new FileReader;o.onloadend=()=>n(o.result),o.readAsDataURL(e)})}sendReport(e){return(0,ut.mG)(this,void 0,void 0,function*(){const n=yield this.studyConfigService.studyConfig.toPromise(),r="\r\n",o=this.reportEntries.map(g=>Object.values(g).map(m=>{var f;return null!==(f=null==m?void 0:m.toString())&&void 0!==f?f:""}).join(";")).join(r),l=`MEEKU - ${n.participantId}.csv`,a=new Blob([e+r+Object.keys(this.formGroup.value).join(";")+r+o],{type:"text/csv"}),d=yield this.blobToBase64(a);((t,i="https://api.emailjs.com")=>{Yt._userID=t,Yt._origin=i})("user_OawQbiPiSgdzcdY3SkdGT"),bn("meeku-report","meeku-report",{attachmentName:l,content:d,from_name:"Meeku Robot",to_name:"Patrick",message:`New report has been issued! ${n.participantId}`,participant:l},"user_OawQbiPiSgdzcdY3SkdGT").then(function(g){},function(g){console.error("Failed to send report...",g)})})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Fc.qu),s.LFG($e.R))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const et=850,Tc=function(t,i){return{value:t,params:i}};let Mc=(()=>{class t{constructor(e,n){this.data=e,this.ref=n,this.animated=!1,setTimeout(()=>this.animated=!0,0),setTimeout(()=>this.ref.close(),this.data.durationMs);const r=new Audio;r.src=`./assets/${e.feedback.toLowerCase().replaceAll(" ","-")}.mp3`,r.load(),r.play().then(()=>r.remove())}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(De),s.Y36(Gt))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-correct-dialog"]],decls:3,vars:5,consts:[[1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",s.WLB(2,Tc,n.animated,n.data.animationParams)),s.xp6(2),s.Oqu(n.data.feedback))},styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{font-size:clamp(1rem,8vw,15rem);white-space:nowrap}"],data:{animation:[re()]}}),t})();var Rc=c(409);const H=500,Sn={stimuli:[H,2*H],cues:Array(5).fill(3*H)},ze=Math.max(...Object.values(Sn).flat())+1e3;function Fn(t){return(0,b.X$)((null==t?void 0:t.anchor)||"fadeIn",[(0,b.SB)("void",(0,b.oB)({visibility:"hidden",opacity:0})),(0,b.SB)("false",(0,b.oB)({visibility:"hidden",opacity:0})),(0,b.SB)("true",(0,b.oB)({visibility:"visible",opacity:1})),(0,b.eR)("* => true",(0,b.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}var Tn=c(730);const Gc=function(t){return{delay:t}},Oc=function(t,i){return{value:t,params:i}},Ec=function(t,i){return{"d-none":t,"hover-able":i}},Lc=function(t){return{"pointer-events":t}};let Mn=(()=>{class t{constructor(e){this.deviceDetectorSvc=e,this.animationDelay=0,this.disabled=!1,this.selected=new s.vpe,this.isDesktop=this.deviceDetectorSvc.isDesktop()}select(){this.disabled=!0,this.selected.emit(this.config)}set(e){return(0,ut.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield(0,Dt.H)(N).toPromise(),this.disabled=!1,this.config=e,this.animate="fade-in"})}tap(){this.disabled=!0,this.selected.emit(this.config)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Tn.x0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-cue"]],inputs:{animationDelay:"animationDelay"},outputs:{selected:"selected"},decls:2,vars:18,consts:[["onclick","blur()","matRipple","",1,"trial-item","dynamic-text",3,"matRippleDisabled","ngClass","ngStyle","tap"]],template:function(e,n){1&e&&(s.TgZ(0,"button",0),s.NdJ("tap",function(){return!n.disabled&&n.select()}),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",null==n.config?null:n.config.fileName),s.Q6J("@fadeIn",s.WLB(10,Oc,"fade-in"===n.animate,s.VKq(8,Gc,n.animationDelay)))("@fadeOut","fade-out"===n.animate)("matRippleDisabled",n.disabled)("ngClass",s.WLB(13,Ec,void 0===n.config,n.isDesktop))("ngStyle",s.VKq(16,Lc,null!=n.config&&n.config.value?"all":"none")),s.xp6(1),s.hij(" ",null!=n.config&&n.config.isArbitrary?"\xa0":(null==n.config?null:n.config.viewValue)||""," "))},directives:[lt.wG,y.mk,y.PC],styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[Fn(),re({duration:N})]}}),t})();const Bc=function(t){return{delay:t}},Ic=function(t,i){return{value:t,params:i}};let Rn=(()=>{class t{constructor(e){this.deviceDetectorSvc=e,this.animationDelay=0,this.isDesktop=this.deviceDetectorSvc.isDesktop()}set(e){return(0,ut.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield(0,Dt.H)(N).toPromise(),this.backgroundImage=h.Sg,this.cue=e,this.animate="fade-in"})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Tn.x0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-stimulus"]],inputs:{animationDelay:"animationDelay"},decls:2,vars:10,consts:[[1,"trial-item","dynamic-text"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",n.backgroundImage),s.Q6J("@fadeIn",s.WLB(7,Ic,"fade-in"===n.animate,s.VKq(5,Bc,n.animationDelay)))("@fadeOut","fade-out"===n.animate),s.xp6(1),s.hij(" ",n.cue,"\n"))},styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[Fn(),re({duration:N})]}}),t})();function kc(t,i){1&t&&s._UZ(0,"trial-stimulus",4),2&t&&s.Q6J("animationDelay",i.$implicit)}function Pc(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial-cue",5),s.NdJ("selected",function(r){const l=s.CHM(e).index;return s.oxw().selected(r,l+1)}),s.qZA()}2&t&&s.Q6J("animationDelay",i.$implicit)}let q=class{constructor(){this.animationDelayMs=Sn,this.complete=!1,this.completed=new s.vpe,this.secondsInTrial=0}clearTimer(){this.timerSub&&this.timerSub.unsubscribe()}ngAfterViewInit(){if(!this.trialCueComponents)throw Error("Trial cue components are undefined");if(!this.trialStimulusComponents)throw Error("Trial stimulus components are undefined");this.trialCueComponents.changes.pipe((0,bt.t)(this)).subscribe(),this.trialStimulusComponents.changes.pipe((0,bt.t)(this)).subscribe()}selected(i,e){if(!this.startedAt)throw Error("Started at date is undefined");this.clearTimer(),this.complete=!0,this.completed.emit({cue:i,position:e,startedAt:this.startedAt,completedAt:new Date})}setTimer(){const{studyConfig:i}=this;if(!i)throw Error("Study configuration is undefined");this.clearTimer(),this.secondsInTrial=0,this.timerSub=(0,Dt.H)(ze,1e3).pipe((0,Rc.o)(()=>this.secondsInTrial<i.trialTimeoutSeconds&&!this.complete),(0,Q.b)(()=>{this.secondsInTrial++,this.secondsInTrial===i.trialTimeoutSeconds&&!this.complete&&this.selected()}),(0,bt.t)(this)).subscribe()}show(i){var e,n;if(!this.trialCueComponents)throw Error("Trial cue components are undefined");if(!this.trialStimulusComponents)throw Error("Trial stimulus components are undefined");this.startedAt=new Date,this.complete=!1,this.setTimer();for(const[r,o]of i.stimuli.entries())null===(e=this.trialStimulusComponents.get(r))||void 0===e||e.set(o.value);for(let r=0;r<this.trialCueComponents.length;r++)null===(n=this.trialCueComponents.get(r))||void 0===n||n.set(i.cueComponentConfigs[r])}};function oe(t){return{data:t,disableClose:!0,hasBackdrop:!1,closeOnNavigation:!0,height:"100vh",maxHeight:"100vh",maxWidth:"100vw",panelClass:["fullscreen-dialog-container","animate__animated","animate__fadeIn"],width:"100vw"}}function jc(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}}q.\u0275fac=function(i){return new(i||q)},q.\u0275cmp=s.Xpm({type:q,selectors:[["trial"]],viewQuery:function(i,e){if(1&i&&(s.Gf(Mn,5),s.Gf(Rn,5)),2&i){let n;s.iGM(n=s.CRH())&&(e.trialCueComponents=n),s.iGM(n=s.CRH())&&(e.trialStimulusComponents=n)}},inputs:{studyConfig:"studyConfig"},outputs:{completed:"completed"},decls:4,vars:2,consts:[[1,"trial-sample-stimuli"],[3,"animationDelay",4,"ngFor","ngForOf"],[1,"trial-buttons"],[3,"animationDelay","selected",4,"ngFor","ngForOf"],[3,"animationDelay"],[3,"animationDelay","selected"]],template:function(i,e){1&i&&(s.TgZ(0,"div",0),s.YNc(1,kc,1,1,"trial-stimulus",1),s.qZA(),s.TgZ(2,"div",2),s.YNc(3,Pc,1,1,"trial-cue",3),s.qZA()),2&i&&(s.xp6(1),s.Q6J("ngForOf",e.animationDelayMs.stimuli),s.xp6(2),s.Q6J("ngForOf",e.animationDelayMs.cues))},directives:[y.sg,Rn,Mn],styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}"]}),q=(0,ut.gn)([(0,bt.c)()],q);let le=(()=>{class t{constructor(e,n){this.dialog=e,this.reportSvc=n,this.completed=new s.vpe,this.containsSequentialTriplicates=!1,this.correct=0,this.failSafeDuration=0,this.feedBackShown=!1,this.incorrect=0,this.index=-1,this.isVisible=!0,this.name="Block",this.retryInstructions="CLICK TO TRY AGAIN",this.sequentialCorrect=0,this.startInstructions="CLICK TO START",this.studyFailed=!1,this.trialCompleted=new s.vpe,this.trials=[],this._attempts=0,this._probeAttempts=0,this._totalTrials=0,this._trainingAttempts=0}get attempts(){return this._attempts}get probeAttempts(){return this._probeAttempts}get totalTrials(){return this._totalTrials}get trainingAttempts(){return this._trainingAttempts}get percentCorrect(){return this.correct/(this.correct+this.incorrect)*100}get trial(){return this.trials[this.index]}get trialNum(){return this.index+1}complete(){this.incrementAttempt(),this.setVisibility(!1,H),this.completedAt=new Date,setTimeout(()=>{this.completed.emit()},H+(this.feedBackShown?et:N))}createTrials(){return[]}failed(){this.studyFailed=!0,this.setVisibility(!1,0),this.prompt("THANKS FOR PARTICIPATING!",!0,H+(this.feedBackShown?et:N)).subscribe(),this.completed.emit()}feedbackEnabled(){return!1}grade(e){var n,r;const o=(null===(n=null==e?void 0:e.cue)||void 0===n?void 0:n.value)===this.trial.relation;return(null===(r=null==e?void 0:e.cue)||void 0===r?void 0:r.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++):(this.incorrect++,this.sequentialCorrect=0),o?"CORRECT":"WRONG"}increaseTotalTrials(){this._totalTrials++}incrementAttempt(){this._attempts++}incrementProbeAttempts(){return this._probeAttempts++}incrementTrainingAttempts(){return this._trainingAttempts++}nextTrial(){-1===this.index&&(this.startedAt=new Date),this.index!==this.trials.length-1?(this.index++,this.showTrial(this.trial,this.feedBackShown?et:0),this.trialCompleted.pipe((0,Pt.P)()).subscribe(e=>this.cueSelected(e))):this.complete()}prompt(e,n=!1,r=ze){return(0,Dt.H)(r).pipe((0,Pt.P)(),(0,jt.w)(()=>this.dialog.open(He,oe({text:e,disableClose:n})).afterClosed()))}reset(){this.index=-1,this.correct=0,this.incorrect=0,this.sequentialCorrect=0,this.trials=this.createTrials()}setVisibility(e,n=ze){setTimeout(()=>this.isVisible=e,n)}showFeedback(e,n=1e3,r={delay:et,duration:N}){this.dialog.open(Mc,oe({animationParams:r,durationMs:n,feedback:e}))}showTrial(e,n=et){setTimeout(()=>{var r;return null===(r=this.trialComponent)||void 0===r?void 0:r.show(e)},n)}start(){0===this.trials.length&&this.reset(),this.prompt(this.startInstructions,!1,H).subscribe(()=>{this.setVisibility(!0,0),this.nextTrial()})}cueSelected(e){this.feedback=this.grade(e),(null==e?void 0:e.cue)?this.feedback&&this.feedbackEnabled()?(this.showFeedback(this.feedback),this.feedBackShown=!0):this.feedBackShown=!1:(this.showFeedback("TIME EXPIRED"),this.feedBackShown=!0),this.reportSvc.addTrial(this,e),this.increaseTotalTrials(),this.nextTrial()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Z),s.Y36(ct))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block"]],viewQuery:function(e,n){if(1&e&&s.Gf(q,5),2&e){let r;s.iGM(r=s.CRH())&&(n.trialComponent=r.first)}},inputs:{studyConfig:"studyConfig"},outputs:{completed:"completed",trialCompleted:"trialCompleted"},decls:1,vars:1,consts:[[3,"completed",4,"ngIf"],[3,"completed"]],template:function(e,n){1&e&&s.YNc(0,jc,1,0,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[y.O5,q],styles:[""],data:{animation:[]}}),t})();var ae=c(2151);function Qe(t,i){return new Array(t.iCannotKnow?4:3).fill(void 0).map(()=>({isArbitrary:t.cueType===h.j8.arbitrary,fileName:t.cueType===h.j8.nonArbitrary?h.Sg:h.FC[i],value:i,viewValue:ae.upper(i)}))}function de(t){return(0,K.Z)(t.iCannotKnow?h.Tz:h.do).map(e=>({isArbitrary:t.cueType===h.j8.arbitrary,fileName:t.cueType===h.j8.nonArbitrary?h.Sg:h.FC[e],value:e,viewValue:ae.upper(e)}))}function Nc(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let Vc=(()=>{class t extends le{constructor(e,n,r){super(e,n),this.network1And2Graph=r,this.name="Forced Choice",this.numDifferentProbeTrials=5,this.numIdkProbeTrials=5,this.numIdkTrainingTrials=6,this.numProbeTrials=10,this.probeFailuresAllotted=2,this.probesFailed=0,this.trainingFailuresAllotted=2,this.trainingsFailed=0}get numTrainingTrials(){if(!this.studyConfig)throw Error("Study configuration is undefined");return this.studyConfig.iCannotKnow?18:12}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study studyConfig not defined");const n=Qe(e,h.bR.same),r=Qe(e,h.bR.different),o=Qe(e,h.bR.iCannotKnow),l=this.network1And2Graph.identities.filter(x=>1===x.stimuli[0].network),a=(0,K.Z)([l,l].flat().map(x=>Object.assign(Object.assign({},x),{cueComponentConfigs:n}))),d=(0,K.Z)([this.network1And2Graph.trained,this.network1And2Graph.mutuallyEntailed].flat().map(x=>Object.assign(Object.assign({},x),{cueComponentConfigs:r}))),g=(0,K.Z)([this.network1And2Graph.combinatoriallyEntailed.filter(x=>!(2===x.stimuli[0].network&&2===x.stimuli[1].network))].flat().map(x=>Object.assign(Object.assign({},x),{cueComponentConfigs:o}))),m=e.iCannotKnow?a.concat(d,qe(g,this.numIdkTrainingTrials)):a.concat(d);if(m.length>this.numTrainingTrials)throw Error(`Training trials length "${m.length}" is greater than specified length "${this.numTrainingTrials}"`);const f=(0,K.Z)(se(qe(d,this.numDifferentProbeTrials)).concat(se(qe(g,this.numIdkProbeTrials))).map(x=>(x.cueComponentConfigs=function(t,i,e){return(0,K.Z)(new Array(2).fill(void 0).map(()=>({isArbitrary:t.cueType===h.j8.arbitrary,fileName:t.cueType===h.j8.nonArbitrary?h.Sg:h.FC[i],value:i,viewValue:ae.upper(i)})).concat(new Array(2).fill(void 0).map(()=>({isArbitrary:t.cueType===h.j8.arbitrary,fileName:t.cueType===h.j8.nonArbitrary?h.Sg:h.FC[e],value:e,viewValue:ae.upper(e)}))))}(e,h.bR.different,h.bR.iCannotKnow),x)));if(f.length>this.numProbeTrials)throw Error(`Probe trials length "${f.length}" is greater than specified length "${this.numIdkProbeTrials}"`);return e.iCannotKnow?m.concat(f):m}feedbackEnabled(){return this.index<this.numTrainingTrials}nextTrial(){this.trialNum===this.numTrainingTrials&&100!==this.percentCorrect?(this.trainingsFailed++,this.incrementTrainingAttempts(),this.trainingsFailed>=this.trainingFailuresAllotted?this.failed():this.retry()):this.trialNum===this.numProbeTrials+this.numTrainingTrials&&100!==this.percentCorrect?(this.probesFailed++,this.incrementProbeAttempts(),this.probesFailed>=this.probeFailuresAllotted?this.failed():this.retry()):(this.trialNum>=this.numTrainingTrials&&(this.trainingsFailed=0),super.nextTrial())}ngOnInit(){this.start()}retry(){this.incrementAttempt(),this.setVisibility(!1,N),this.prompt(this.retryInstructions,!1,H+(this.feedBackShown?et:N)).subscribe(()=>{this.feedBackShown=!1,this.setVisibility(!0,0),this.nextTrial()}),this.reset()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Z),s.Y36(ct),s.Y36(gn))},t.\u0275cmp=s.Xpm({type:t,selectors:[["forced-choice-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,Nc,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[y.O5,q],styles:[""],data:{animation:[]}}),t})();function ue(t){var i=-1,e=null==t?0:t.length;for(this.__data__=new Ii;++i<e;)this.add(t[i])}ue.prototype.add=ue.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ue.prototype.has=function(t){return this.__data__.has(t)};const Zc=ue,Uc=function(t,i){for(var e=-1,n=null==t?0:t.length;++e<n;)if(i(t[e],e,t))return!0;return!1},Jc=function(t,i){return t.has(i)},Gn=function(t,i,e,n,r,o){var l=1&e,a=t.length,d=i.length;if(a!=d&&!(l&&d>a))return!1;var g=o.get(t),m=o.get(i);if(g&&m)return g==i&&m==t;var f=-1,x=!0,A=2&e?new Zc:void 0;for(o.set(t,i),o.set(i,t);++f<a;){var S=t[f],_=i[f];if(n)var E=l?n(_,S,f,i,t,o):n(S,_,f,t,i,o);if(void 0!==E){if(E)continue;x=!1;break}if(A){if(!Uc(i,function(w,V){if(!Jc(A,V)&&(S===w||r(S,w,e,n,o)))return A.push(V)})){x=!1;break}}else if(S!==_&&!r(S,_,e,n,o)){x=!1;break}}return o.delete(t),o.delete(i),x},ng=function(t){var i=-1,e=Array(t.size);return t.forEach(function(n,r){e[++i]=[r,n]}),e},rg=function(t){var i=-1,e=Array(t.size);return t.forEach(function(n){e[++i]=n}),e};var On=ee.Z?ee.Z.prototype:void 0,Ze=On?On.valueOf:void 0;var _g=Object.prototype.hasOwnProperty;var Sg=c(8137),En="[object Arguments]",Ln="[object Array]",ce="[object Object]",Bn=Object.prototype.hasOwnProperty;const Rg=function(t,i,e,n,r,o){var l=(0,pt.Z)(t),a=(0,pt.Z)(i),d=l?Ln:It(t),g=a?Ln:It(i),m=(d=d==En?ce:d)==ce,f=(g=g==En?ce:g)==ce,x=d==g;if(x&&(0,Pe.Z)(t)){if(!(0,Pe.Z)(i))return!1;l=!0,m=!1}if(x&&!m)return o||(o=new Jt),l||(0,Sg.Z)(t)?Gn(t,i,e,n,r,o):function(t,i,e,n,r,o,l){switch(e){case"[object DataView]":if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=i.byteLength||!o(new te(t),new te(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,Fe.Z)(+t,+i);case"[object Error]":return t.name==i.name&&t.message==i.message;case"[object RegExp]":case"[object String]":return t==i+"";case"[object Map]":var a=ng;case"[object Set]":if(a||(a=rg),t.size!=i.size&&!(1&n))return!1;var g=l.get(t);if(g)return g==i;n|=2,l.set(t,i);var m=Gn(a(t),a(i),n,r,o,l);return l.delete(t),m;case"[object Symbol]":if(Ze)return Ze.call(t)==Ze.call(i)}return!1}(t,i,d,e,n,r,o);if(!(1&e)){var A=m&&Bn.call(t,"__wrapped__"),S=f&&Bn.call(i,"__wrapped__");if(A||S){var _=A?t.value():t,E=S?i.value():i;return o||(o=new Jt),r(_,E,e,n,o)}}return!!x&&(o||(o=new Jt),function(t,i,e,n,r,o){var l=1&e,a=Ge(t),d=a.length;if(d!=Ge(i).length&&!l)return!1;for(var f=d;f--;){var x=a[f];if(!(l?x in i:_g.call(i,x)))return!1}var A=o.get(t),S=o.get(i);if(A&&S)return A==i&&S==t;var _=!0;o.set(t,i),o.set(i,t);for(var E=l;++f<d;){var w=t[x=a[f]],V=i[x];if(n)var fe=l?n(V,w,x,i,t,o):n(w,V,x,t,i,o);if(!(void 0===fe?w===V||r(w,V,e,n,o):fe)){_=!1;break}E||(E="constructor"==x)}if(_&&!E){var he=t.constructor,me=i.constructor;he!=me&&"constructor"in t&&"constructor"in i&&!("function"==typeof he&&he instanceof he&&"function"==typeof me&&me instanceof me)&&(_=!1)}return o.delete(t),o.delete(i),_}(t,i,e,n,r,o))},Gg=function In(t,i,e,n,r){return t===i||(null==t||null==i||!(0,kt.Z)(t)&&!(0,kt.Z)(i)?t!=t&&i!=i:Rg(t,i,e,n,In,r))},Eg=function(t,i){return Gg(t,i)};function Lg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}const ge=(t,i)=>t?ge(i%t,t):i,Bg=(t,i)=>t*i/ge(t,i);let Ig=(()=>{class t extends le{constructor(e,n,r){super(e,n),this.network5And6Graph=r,this.correctCount={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0},this.index=-1,this.maxShuffles=2500,this.name="Operant Choice",this.numAllottedTimeouts=1,this.numTimeouts=0,this.stimuliComparisonCopies=2}get isComplete(){return this.sequentialCorrect>=2*this.trials.length||this.meetsMasterCriterion1&&this.meetsMasterCriterion2}get masterCriterion(){if(!this.studyConfig)throw Error("Study configuration is undefined");return{sequentialCorrectTarget:this.studyConfig.iCannotKnow?56:35,sequentialCorrectTargetAchieved:!1,comparisonTarget:24,iCannotKnowTarget:this.studyConfig.iCannotKnow?18:0,sameTarget:6}}get meetsMasterCriterion1(){const{sequentialCorrectTarget:e,sequentialCorrectTargetAchieved:n,comparisonTarget:r,iCannotKnowTarget:o,sameTarget:l}=this.masterCriterion,{greaterThan:a,iCannotKnow:d,lessThan:g,same:m}=this.correctCount;return this.sequentialCorrect===e&&(this.masterCriterion.sequentialCorrectTargetAchieved=!0),n||m>=l&&a+g>=r&&d>=o}get meetsMasterCriterion2(){return!!this.correctShownTargets&&this.correctCount.same>=this.correctShownTargets.same&&this.correctCount.lessThan>=this.correctShownTargets.lessThan&&this.correctCount.greaterThan>=this.correctShownTargets.greaterThan&&this.correctCount.iCannotKnow>=this.correctShownTargets.iCannotKnow}complete(){this.timeout&&clearTimeout(this.timeout),super.complete()}createTrials(){var e,n;const{studyConfig:r}=this;if(!r)throw Error("Study configuration is undefined");this.network5And6Graph.includeRelationsBetweenNetworks=r.iCannotKnow;const o=[this.network5And6Graph.trained,this.network5And6Graph.mutuallyEntailed].flat().concat(r.iCannotKnow?this.network5And6Graph.combinatoriallyEntailed:[]),l=h.Tz.reduce((A,S)=>Object.assign(Object.assign({},A),{[S]:o.filter(_=>_.relation===S)}),{}),a=h.Tz.reduce((A,S)=>Object.assign(Object.assign({},A),{[S]:o.filter(_=>_.relation===S).length}),{}),d=Object.values(a).filter(A=>A>0).reduce(Bg),g=h.Tz.reduce((A,S)=>Object.assign(Object.assign({},A),{[S]:d/o.filter(_=>_.relation===S).length}),{}),m=Object.values(r.balance).filter(A=>A).reduce(ge);this.configBalanceDividedByGcd={different:0,same:r.balance.same/m,greaterThan:r.balance.greaterThan/m,lessThan:r.balance.lessThan/m,iCannotKnow:(null===(e=r.balance)||void 0===e?void 0:e.iCannotKnow)?r.balance.iCannotKnow/m:0};const f={different:0,same:r.balance.same*g.same,greaterThan:r.balance.greaterThan*g.greaterThan,lessThan:r.balance.lessThan*g.lessThan,iCannotKnow:(null===(n=r.balance)||void 0===n?void 0:n.iCannotKnow)?r.balance.iCannotKnow*g.iCannotKnow:0},x=Object.values(f).filter(A=>A).reduce(ge);for(const A of h.Tz){if(0===a[A])continue;const S=f[A]/x*this.stimuliComparisonCopies;for(let _=0;_<S;_++)this.trials=this.trials.concat(l[A].flat().map(E=>Object.assign(Object.assign({},E),{cueComponentConfigs:de(r)})))}return this.shuffleUntilNoTriplicatesInARow(),this.trials}feedbackEnabled(){return!0}grade(e){var n,r,o,l,a,d,g,m,f,x;const A=(null===(n=null==e?void 0:e.cue)||void 0===n?void 0:n.value)===this.trial.relation;if((null===(r=null==e?void 0:e.cue)||void 0===r?void 0:r.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++,this.correctCount[e.cue.value]++):(this.sequentialCorrect=0,this.incorrect++),this.meetsMasterCriterion1&&!this.correctShownTargets)for(this.correctShownTargets={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0};this.correctShownTargets.same<this.correctCount.same||this.correctShownTargets.greaterThan<this.correctCount.greaterThan||this.correctShownTargets.lessThan<this.correctCount.lessThan||this.correctShownTargets.iCannotKnow<this.correctCount.iCannotKnow;){if(!this.configBalanceDividedByGcd)throw Error("Config balance has not been created");this.correctShownTargets={different:0,same:(null===(o=this.correctShownTargets)||void 0===o?void 0:o.same)+(null===(l=this.configBalanceDividedByGcd)||void 0===l?void 0:l.same),greaterThan:(null===(a=this.correctShownTargets)||void 0===a?void 0:a.greaterThan)+(null===(d=this.configBalanceDividedByGcd)||void 0===d?void 0:d.greaterThan),lessThan:(null===(g=this.correctShownTargets)||void 0===g?void 0:g.lessThan)+(null===(m=this.configBalanceDividedByGcd)||void 0===m?void 0:m.lessThan),iCannotKnow:(null===(f=this.correctShownTargets)||void 0===f?void 0:f.iCannotKnow)+(null===(x=this.configBalanceDividedByGcd)||void 0===x?void 0:x.iCannotKnow)}}return this.correctShownTargets&&A&&(null==e?void 0:e.cue)?this.correctCount[e.cue.value]<=this.correctShownTargets[e.cue.value]?"CORRECT":void 0:A?"CORRECT":"WRONG"}nextTrial(){this.isComplete?this.complete():(this.index==this.trials.length-1&&(this.setVisibility(!0,0),this.index=-1),super.nextTrial())}ngOnInit(){this.createTrials(),this.start()}reset(){this.correctCount={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0},this.index=-1,this.correct=0,this.incorrect=0}retry(){this.incrementAttempt(),this.setVisibility(!1,N),this.prompt(this.retryInstructions,!1,H+(this.feedBackShown?et:N)).subscribe(()=>{this.feedBackShown=!1,this.setVisibility(!0,0),this.nextTrial(),this.setTimeout()}),this.reset()}setTimeout(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.timeout&&clearTimeout(this.timeout),this.failSafeDuration=2*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3),this.timeout=setTimeout(()=>{var e;null===(e=this.trialComponent)||void 0===e||e.clearTimer(),this.numTimeouts++,this.numTimeouts>this.numAllottedTimeouts?this.failed():this.retry()},this.failSafeDuration)}shuffleUntilNoTriplicatesInARow(){let e,n=0;for(let r=0;r<this.maxShuffles;r++){this.trials=(0,K.Z)(this.trials);for(const o of this.trials)if(Eg(o.stimuli,null==e?void 0:e.stimuli)?n++:(e=o,n=0),3===n)break;if(n)break}n>=3&&(this.containsSequentialTriplicates=!0)}start(){this.prompt(this.startInstructions,!1,H).subscribe(()=>{this.setTimeout(),this.setVisibility(!0,0),this.nextTrial()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Z),s.Y36(ct),s.Y36(fn))},t.\u0275cmp=s.Xpm({type:t,selectors:[["operant-choice-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,Lg,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[y.O5,q],styles:[""],data:{animation:[]}}),t})();function kg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let Pg=(()=>{class t extends le{constructor(e,n,r){super(e,n),this.network3And4Graph=r,this.name="Pre Test",this.numDuplicates=4}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study configuration is undefined");for(let n=0;n<this.numDuplicates;n++)this.trials=this.trials.concat([this.network3And4Graph.mutuallyEntailed,this.network3And4Graph.combinatoriallyEntailed].flat().map(r=>Object.assign(Object.assign({},r),{cueComponentConfigs:de(e)})));return(0,K.Z)(this.trials)}ngOnInit(){this.start()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Z),s.Y36(ct),s.Y36(Ne))},t.\u0275cmp=s.Xpm({type:t,selectors:[["pre-test-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,kg,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[y.O5,q],styles:[""],data:{animation:[]}}),t})();function jg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let Yg=(()=>{class t extends le{constructor(e,n,r){super(e,n),this.network3And4Graph=r,this.name="Training Networks",this.numAllottedTimeouts=1,this.numIdkProbeTrials=5,this.numProbeDuplicates=4,this.numProbeTrials=32,this.numTimeouts=0,this.numTrainingDuplicates=2,this.numTrainingTrials=20,this.probeFailuresAllotted=2,this.probesFailed=0,this.sequentialCorrectTarget=23}complete(){this.timeout&&clearTimeout(this.timeout),super.complete()}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study configuration is undefined");let n=[];for(let o=0;o<this.numTrainingDuplicates;o++)n=n.concat([this.network3And4Graph.identities,this.network3And4Graph.trained].flat().map(l=>Object.assign(Object.assign({},l),{cueComponentConfigs:de(e)})));if(n.length!==this.numTrainingTrials)throw Error(`Training trials length "${n.length}" doesn't equal specified length "${this.numTrainingTrials}"`);let r=[];for(let o=0;o<this.numProbeDuplicates;o++)r=r.concat([this.network3And4Graph.mutuallyEntailed,this.network3And4Graph.combinatoriallyEntailed].flat().map(l=>Object.assign(Object.assign({},l),{cueComponentConfigs:de(e)})));if(r.length!==this.numProbeTrials)throw Error(`Probe trials length "${r.length}" doesn't equal specified length "${this.numIdkProbeTrials}"`);return(0,K.Z)(n).concat((0,K.Z)(r))}feedbackEnabled(){return this.index<this.numTrainingTrials}grade(e){var n,r;const o=(null===(n=null==e?void 0:e.cue)||void 0===n?void 0:n.value)===this.trial.relation;return(null===(r=null==e?void 0:e.cue)||void 0===r?void 0:r.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++):(this.sequentialCorrect=0,this.incorrect++),o?"CORRECT":"WRONG"}nextTrial(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.sequentialCorrect===this.sequentialCorrectTarget&&(this.index=this.numTrainingTrials-1),this.trialNum===this.numTrainingTrials&&100!==this.percentCorrect&&this.sequentialCorrect!==this.sequentialCorrectTarget?(this.incrementTrainingAttempts(),this.reset(),super.nextTrial()):this.trialNum===this.numProbeTrials+this.numTrainingTrials&&this.percentCorrect<(this.studyConfig.iCannotKnow?90:67.5)?(this.probesFailed++,this.incrementProbeAttempts(),this.probesFailed===this.probeFailuresAllotted?this.failed():this.retry()):(this.trialNum===this.numTrainingTrials&&(this.timeout&&clearTimeout(this.timeout),this.correct=0,this.incorrect=0),super.nextTrial())}ngOnInit(){this.start()}reset(){this.index=-1,this.correct=0,this.incorrect=0,this.trials=this.createTrials()}retry(){this.incrementAttempt(),this.setVisibility(!1,N),this.prompt(this.retryInstructions,!1,H+(this.feedBackShown?et:N)).subscribe(()=>{this.feedBackShown=!1,this.setVisibility(!0,0),this.nextTrial(),this.setTimeout()}),this.reset()}setTimeout(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.timeout&&clearTimeout(this.timeout),this.failSafeDuration=50*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3),this.timeout=setTimeout(()=>{var e;null===(e=this.trialComponent)||void 0===e||e.clearTimer(),this.numTimeouts++,this.numTimeouts>this.numAllottedTimeouts?this.failed():this.retry()},50*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3))}start(){0===this.trials.length&&this.reset(),this.prompt(this.startInstructions,!1,H).subscribe(()=>{this.setTimeout(),this.setVisibility(!0,0),this.nextTrial()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Z),s.Y36(ct),s.Y36(Ne))},t.\u0275cmp=s.Xpm({type:t,selectors:[["training-networks-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,jg,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[y.O5,q],styles:[""],data:{animation:[]}}),t})();const Ng=["container"];function Vg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"mat-card",2),s.TgZ(1,"mat-card-title"),s._uU(2,"Welcome"),s.qZA(),s.TgZ(3,"mat-card-content",3),s._uU(4),s.qZA(),s.TgZ(5,"mat-card-actions"),s.TgZ(6,"button",4),s.NdJ("tap",function(){return s.CHM(e),s.oxw().nextBlock()}),s._uU(7,"CONTINUE"),s.qZA(),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.xp6(4),s.hij(" ",e.instructions," ")}}let gt=class{constructor(i,e,n,r,o){this.document=i,this.componentFactoryResolver=e,this.dialog=n,this.reportSvc=r,this.studyConfigSvc=o,this.blocks=[Pg,Vc,Ig,Yg],this.instructions=Dn,this.reportSent=!1,this.showInstructions=!0}createBlockComponent(i){if(!this.container)throw Error("Container is undefined");if(!this.studyConfig)throw Error("Study configuration is undefined");const e=this.componentFactoryResolver.resolveComponentFactory(i);this.container.clear();const r=this.container.createComponent(e).instance;r.studyConfig=this.studyConfig,r.completed.pipe((0,Pt.P)(),(0,Q.b)(()=>this.nextBlock()),(0,bt.t)(this)).subscribe()}nextBlock(){this.showInstructions=!1;const i=this.blocks.shift();i?this.createBlockComponent(i):this.showStudyCompleteDialog()}ngOnInit(){this.studyConfigSvc.studyConfig.pipe((0,Q.b)(i=>this.studyConfig=i)).subscribe(),(0,Uu.R)(document,"visibilitychange").pipe((0,$.h)(()=>document.hidden&&!this.reportSent),(0,Pt.P)(),(0,Q.b)(()=>{var i;return null===(i=this.container)||void 0===i?void 0:i.clear()}),(0,jt.w)(()=>this.reportSvc.sendReport("abandoned")),(0,jt.w)(()=>{var i;return this.dialog.open(He,oe({text:`STUDY ABANDONED!\n\n PARTICIPANT ID:\n ${null===(i=this.studyConfig)||void 0===i?void 0:i.participantId}`,disableClose:!0})).afterClosed()})).subscribe()}showStudyCompleteDialog(){(0,Dt.H)(H).pipe((0,Pt.P)(),(0,jt.w)(()=>this.reportSvc.sendReport("completed")),(0,Q.b)(()=>this.reportSent=!0),(0,jt.w)(()=>{var i;return this.dialog.open(He,oe({text:`THANKS FOR PARTICIPATING!\n\n PARTICIPANT ID:\n ${null===(i=this.studyConfig)||void 0===i?void 0:i.participantId}`,disableClose:!0})).afterClosed()})).subscribe()}};gt.\u0275fac=function(i){return new(i||gt)(s.Y36(y.K0),s.Y36(s._Vd),s.Y36(Z),s.Y36(ct),s.Y36($e.R))},gt.\u0275cmp=s.Xpm({type:gt,selectors:[["study"]],viewQuery:function(i,e){if(1&i&&s.Gf(Ng,7,s.s_b),2&i){let n;s.iGM(n=s.CRH())&&(e.container=n.first)}},features:[s._Bn([])],decls:3,vars:1,consts:[["style","max-width: 400px",4,"ngIf"],["container",""],[2,"max-width","400px"],[2,"white-space","pre-line"],["color","primary","onclick","blur()","mat-button","",3,"tap"]],template:function(i,e){1&i&&(s.YNc(0,Vg,8,1,"mat-card",0),s.GkF(1,null,1)),2&i&&s.Q6J("ngIf",e.showInstructions)},directives:[y.O5,U.a8,U.n5,U.dn,U.hq,Ht.lW],styles:["[_nghost-%COMP%]{-webkit-box-align:center;-webkit-box-pack:center;align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}.mat-card[_ngcontent-%COMP%]{max-height:100%}.mat-card-content[_ngcontent-%COMP%]{height:calc(100% - 80px);overflow:auto}"]}),gt=(0,ut.gn)([(0,bt.c)(),(0,ut.w6)("design:paramtypes",[Document,s._Vd,Z,ct,$e.R])],gt);const Hg=[{path:"",component:gt}];let qg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[hn.Bz.forChild(Hg)],hn.Bz]}),t})();const Vt=new s.OlP("Stimulus case");let $g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[gn,Ne,fn,{provide:Vt,useValue:Ku()}],imports:[[fl,y.ez,hl,Ht.ot,U.QW,ml,pl,qg,yl]]}),t})()},2151:function(pe){(function(){"use strict";var it=function(u,p){return u.replace(/(^|-)/g,"$1\\u"+(p=p||"")).replace(/,/g,"\\u"+p)},c=it("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),y="a-z"+it("DF-F6,F8-FF","00"),s="A-Z"+it("C0-D6,D8-DE","00"),U=function(u,p,D,R){return u=u||c,p=p||y,D=D||s,R=R||"A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",{capitalize:new RegExp("(^|["+u+"])(["+p+"])","g"),pascal:new RegExp("(^|["+u+"])+(["+p+D+"])","g"),fill:new RegExp("["+u+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+p+"])","g"),improper:new RegExp("\\b("+R+")\\b","g"),relax:new RegExp("([^"+D+"])(["+D+"]*)(["+D+"])(?=[^"+D+"]|$)","g"),upper:new RegExp("^[^"+p+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+u+"]")}},L=U(),C={re:L,unicodes:it,regexps:U,types:[],up:String.prototype.toUpperCase,low:String.prototype.toLowerCase,cap:function(u){return C.up.call(u.charAt(0))+u.slice(1)},decap:function(u){return C.low.call(u.charAt(0))+u.slice(1)},deapostrophe:function(u){return u.replace(L.apostrophe,"")},fill:function(u,p,D){return null!=p&&(u=u.replace(L.fill,function(R,I){return I?p+I:""})),D&&(u=C.deapostrophe(u)),u},prep:function(u,p,D,R){if(u=null==u?"":u+"",!R&&L.upper.test(u)&&(u=C.low.call(u)),!p&&!L.hole.test(u)){var I=C.fill(u," ");L.hole.test(I)&&(u=I)}return!D&&!L.room.test(u)&&(u=u.replace(L.relax,C.relax)),u},relax:function(u,p,D,R){return p+" "+(D?D+" ":"")+R}},k={_:C,of:function(u){for(var p=0,D=C.types.length;p<D;p++)if(k[C.types[p]].apply(k,arguments)===u)return C.types[p]},flip:function(u){return u.replace(/\w/g,function(p){return(p==C.up.call(p)?C.low:C.up).call(p)})},random:function(u){return u.replace(/\w/g,function(p){return(Math.round(Math.random())?C.up:C.low).call(p)})},type:function(u,p){k[u]=p,C.types.push(u)}},nt={lower:function(u,p,D){return C.fill(C.low.call(C.prep(u,p)),p,D)},snake:function(u){return k.lower(u,"_",!0)},constant:function(u){return k.upper(u,"_",!0)},camel:function(u){return C.decap(k.pascal(u))},kebab:function(u){return k.lower(u,"-",!0)},upper:function(u,p,D){return C.fill(C.up.call(C.prep(u,p,!1,!0)),p,D)},capital:function(u,p,D){return C.fill(C.prep(u).replace(L.capitalize,function(R,I,J){return I+C.up.call(J)}),p,D)},header:function(u){return k.capital(u,"-",!0)},pascal:function(u){return C.fill(C.prep(u,!1,!0).replace(L.pascal,function(p,D,R){return C.up.call(R)}),"",!0)},title:function(u){return k.capital(u).replace(L.improper,function(p,D,R,I){return R>0&&R<I.lastIndexOf(" ")?C.low.call(p):p})},sentence:function(u,p,D){return u=k.lower(u).replace(L.sentence,function(R,I,J){return I+C.up.call(J)}),p&&p.forEach(function(R){u=u.replace(new RegExp("\\b"+k.lower(R)+"\\b","g"),C.cap)}),D&&D.forEach(function(R){u=u.replace(new RegExp("(\\b"+k.lower(R)+"\\. +)(\\w)"),function(I,J,St){return J+C.low.call(St)})}),u}};for(var $ in nt.squish=nt.pascal,k.default=k,nt)k.type($,nt[$]);var Q="function"==typeof Q?Q:function(){};Q(pe.exports?pe.exports=k:this.Case=k)}).call(this)}}]);