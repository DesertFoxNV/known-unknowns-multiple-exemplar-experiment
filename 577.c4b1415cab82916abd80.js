(self.webpackChunkknown_unknowns_multiple_exemplar_experiment=self.webpackChunkknown_unknowns_multiple_exemplar_experiment||[]).push([[577],{1577:(xe,st,c)=>{"use strict";c.r(st),c.d(st,{STIMULUS_CASE:()=>$t,StudyModule:()=>Zg});var y=c(2057),s=c(4788),zt=c(2895),J=c(7639),L=c(9765),$=(c(6215),c(7574),c(6682),c(5435)),K=c(8307);const p={provide:s.tb,useFactory:function(t,i){return()=>{if((0,y.NF)(i)){const e=Array.from(t.querySelectorAll(`[class*=${D}]`)),n=/\bflex-layout-.+?\b/g;e.forEach(r=>{r.classList.contains(`${D}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(n,"")})}}},deps:[y.K0,s.Lbi],multi:!0},D="flex-layout-";let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[p]}),t})();const Mt={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},z=new s.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Mt}),ot=new s.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),ve=new s.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});c(9490),c(6782),c(1211);let yi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[R]]}),t})();var Ot=c(6794);let Ci=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[R,Ot.vT]]}),t})(),Mi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[R]]}),t})(),pt=(()=>{class t{constructor(e,n){(0,y.PM)(n)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,n=[]){return{ngModule:t,providers:e.serverLoaded?[{provide:z,useValue:Object.assign(Object.assign({},Mt),e)},{provide:ve,useValue:n,multi:!0},{provide:ot,useValue:!0}]:[{provide:z,useValue:Object.assign(Object.assign({},Mt),e)},{provide:ve,useValue:n,multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(ot),s.LFG(s.Lbi))},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ci,yi,Mi],Ci,yi,Mi]}),t})();var lt=c(933),at=c(2414),dt=c(7935),Jo=c(1439),Xo=c(5917),_e=c(5257),tl=c(9761),be=c(9642),b=c(6083),Ri=c(3328),Gi=c(2371);function el(t,i){}class De{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const il={dialogContainer:(0,b.X$)("dialogContainer",[(0,b.SB)("void, exit",(0,b.oB)({opacity:0,transform:"scale(0.7)"})),(0,b.SB)("enter",(0,b.oB)({transform:"none"})),(0,b.eR)("* => enter",(0,b.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,b.oB)({transform:"none",opacity:1}))),(0,b.eR)("* => void, * => exit",(0,b.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,b.oB)({opacity:0})))])};let nl=(()=>{class t extends at.en{constructor(e,n,r,o,l,a){super(),this._elementRef=e,this._focusTrapFactory=n,this._changeDetectorRef=r,this._config=l,this._focusMonitor=a,this._animationStateChanged=new s.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=d=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(d)),this._ariaLabelledBy=l.ariaLabelledBy||null,this._document=o}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const n=(0,be.ht)(),r=this._elementRef.nativeElement;(!n||n===this._document.body||n===r||r.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,be.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=(0,be.ht)();return e===n||e.contains(n)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(Gi.qV),s.Y36(s.sBO),s.Y36(y.K0,8),s.Y36(De),s.Y36(Gi.tE))},t.\u0275dir=s.lG2({type:t,viewQuery:function(e,n){if(1&e&&s.Gf(at.Pl,7),2&e){let r;s.iGM(r=s.CRH())&&(n._portalOutlet=r.first)}},features:[s.qOj]}),t})(),sl=(()=>{class t extends nl{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:n}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:e,totalTime:n}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=s.n5z(t)))(n||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,n){1&e&&s.WFA("@dialogContainer.start",function(o){return n._onAnimationStart(o)})("@dialogContainer.done",function(o){return n._onAnimationDone(o)}),2&e&&(s.Ikx("id",n._id),s.uIk("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),s.d8E("@dialogContainer",n._state))},features:[s.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&s.YNc(0,el,0,0,"ng-template",0)},directives:[at.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[il.dialogContainer]}}),t})(),rl=0;class Lt{constructor(i,e,n="mat-dialog-"+rl++){this._overlayRef=i,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new L.xQ,this._afterClosed=new L.xQ,this._beforeClosed=new L.xQ,this._state=0,e._id=n,e._animationStateChanged.pipe((0,$.h)(r=>"opened"===r.state),(0,_e.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe((0,$.h)(r=>"closed"===r.state),(0,_e.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),i.keydownEvents().pipe((0,$.h)(r=>r.keyCode===Ri.hY&&!this.disableClose&&!(0,Ri.Vb)(r))).subscribe(r=>{r.preventDefault(),Se(this,"keyboard")}),i.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Se(this,"mouse")})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe((0,$.h)(e=>"closing"===e.state),(0,_e.q)(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(i){let e=this._getPositionStrategy();return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(i="",e=""){return this._overlayRef.updateSize({width:i,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(i){return this._overlayRef.addPanelClass(i),this}removePanelClass(i){return this._overlayRef.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Se(t,i,e){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=i),t.close(e)}const Te=new s.OlP("MatDialogData"),ol=new s.OlP("mat-dialog-default-options"),Oi=new s.OlP("mat-dialog-scroll-strategy"),al={provide:Oi,deps:[lt.aV],useFactory:function(t){return()=>t.scrollStrategies.block()}};let dl=(()=>{class t{constructor(e,n,r,o,l,a,d,g,m){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=l,this._dialogRefConstructor=d,this._dialogContainerType=g,this._dialogDataToken=m,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new L.xQ,this._afterOpenedAtThisLevel=new L.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Jo.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,tl.O)(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,n){(n=function(t,i){return Object.assign(Object.assign({},i),t)}(n,this._defaultOptions||new De)).id&&this.getDialogById(n.id);const r=this._createOverlay(n),o=this._attachDialogContainer(r,n),l=this._attachDialogContent(e,o,r,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.afterClosed().subscribe(()=>this._removeOpenDialog(l)),this.afterOpened.next(l),o._initializeWithAttachedContent(),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const n=this._getOverlayConfig(e);return this._overlay.create(n)}_getOverlayConfig(e){const n=new lt.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachDialogContainer(e,n){const o=s.zs3.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:De,useValue:n}]}),l=new at.C5(this._dialogContainerType,n.viewContainerRef,o,n.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,n,r,o){const l=new this._dialogRefConstructor(r,n,o.id);if(e instanceof s.Rgc)n.attachTemplatePortal(new at.UE(e,null,{$implicit:o.data,dialogRef:l}));else{const a=this._createInjector(o,l,n),d=n.attachComponentPortal(new at.C5(e,o.viewContainerRef,a));l.componentInstance=d.instance}return l.updateSize(o.width,o.height).updatePosition(o.position),l}_createInjector(e,n,r){const o=e&&e.viewContainerRef&&e.viewContainerRef.injector,l=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:n}];return e.direction&&(!o||!o.get(Ot.Is,null,s.XFs.Optional))&&l.push({provide:Ot.Is,useValue:{value:e.direction,change:(0,Xo.of)()}}),s.zs3.create({parent:o||this._injector,providers:l})}_removeOpenDialog(e){const n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,o)=>{r?o.setAttribute("aria-hidden",r):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){let o=n[r];o!==e&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(lt.aV),s.Y36(s.zs3),s.Y36(void 0),s.Y36(void 0),s.Y36(lt.Xj),s.Y36(void 0),s.Y36(s.DyG),s.Y36(s.DyG),s.Y36(s.OlP))},t.\u0275dir=s.lG2({type:t}),t})(),U=(()=>{class t extends dl{constructor(e,n,r,o,l,a,d){super(e,n,o,a,d,l,Lt,sl,Te)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(lt.aV),s.LFG(s.zs3),s.LFG(y.Ye,8),s.LFG(ol,8),s.LFG(Oi),s.LFG(t,12),s.LFG(lt.Xj))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),Bt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[U,al],imports:[[lt.U8,at.eL,dt.BQ],dt.BQ]}),t})(),gl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,dt.si]]}),t})(),fl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,dt.si]]}),t})(),hl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,pt]]}),t})(),It=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,J.QW,gl,fl,hl]]}),t})(),ml=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,pt,Bt,It]]}),t})(),Ut=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[y.ez,dt.si]]}),t})(),pl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ut,y.ez,pt,Bt,It]]}),t})(),yl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ut,y.ez,pt,Bt,It]]}),t})(),xl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ut,y.ez,pt,Bt,It]]}),t})(),vl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ut,y.ez,pt,Bt,It]]}),t})();var Al=c(7012);const Li=function(t){var i=t.length;return i?t[(0,Al.Z)(0,i-1)]:void 0};var Bi=c(4724);const _l=function(t){return Li((0,Bi.Z)(t))};var yt=c(4654);const kt=function(t){return((0,yt.Z)(t)?Li:_l)(t)},Fe=["RWK","PGZ","QGK","FNK","ZVB","PWU","PLJ","KNF","GVW","KXL","GRQ","WPQ","BQP","FXX","ZTF","SGG","GQF","VXO","DZF","ZHD","JHH","VQP","JXY","ZVS","HGD","FJX","VHK","JTP","JTS","UHJ","WTZ","CXF","XFH","LWK","NWK","ZRG","FDG","NQC","WPW","YVR","HLJ","WBX","VGH","KXW","XAQ","WQG","DGJ","QUZ","QZX","HWL","DKX","ZDW","RZJ","VGJ","VWL","MKP","JFJ","GQY","BRX","IHG","YVP","SXG","FJC","QKU","WZY","QHJ","YTZ","RHF","YYB","QFH","ZUX","TQT","VZZ","BTQ","DHQ","XLW","VLW","VZJ","GGK","SWK","UFH","GPN","JSX","IQP","QUP","XDG","QWN","CBK","JVH","VXG","YBF","BVY","QZW","UPZ","WMX","XVN","RRX","QTX","DZN","WXP"],Ii={lower:"lower",upper:"upper"},Dl=Object.values(Ii);function j(t){const i=kt(Fe);if(void 0===i)throw Error('Random value returned "undefined"!');const e=Fe.indexOf(i);return e>-1&&Fe.splice(e,1),t===Ii.lower?i.toLowerCase():i.toUpperCase()}var T=(()=>{return(t=T||(T={})).identity="identity",t.trained="trained",t.mutuallyEntailed="mutually entailed",t.combinatoriallyEntailed="combinatorially entailed",T;var t})();class Y extends class{constructor(i,e){this.dest=e,this.src=i}toString(){return`${this.src}->${this.dest}`}}{constructor(i,e,n,r){super(i,e),this.relation=n,this.relationType=r}toString(){return`${this.src} ${this.relation} ${this.dest} (${this.relationType})`}}var Me=c(6224);const Wt=function(t,i){for(var e=t.length;e--;)if((0,Me.Z)(t[e][0],i))return e;return-1};var Gl=Array.prototype.splice;function xt(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}xt.prototype.clear=function(){this.__data__=[],this.size=0},xt.prototype.delete=function(t){var i=this.__data__,e=Wt(i,t);return!(e<0||(e==i.length-1?i.pop():Gl.call(i,e,1),--this.size,0))},xt.prototype.get=function(t){var i=this.__data__,e=Wt(i,t);return e<0?void 0:i[e][1]},xt.prototype.has=function(t){return Wt(this.__data__,t)>-1},xt.prototype.set=function(t,i){var e=this.__data__,n=Wt(e,t);return n<0?(++this.size,e.push([t,i])):e[n][1]=i,this};const Jt=xt;var vt=c(4423),ut=c(309);const Pt=(0,vt.Z)(ut.Z,"Map"),Yt=(0,vt.Z)(Object,"create");var ia=Object.prototype.hasOwnProperty;var oa=Object.prototype.hasOwnProperty;function At(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}At.prototype.clear=function(){this.__data__=Yt?Yt(null):{},this.size=0},At.prototype.delete=function(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},At.prototype.get=function(t){var i=this.__data__;if(Yt){var e=i[t];return"__lodash_hash_undefined__"===e?void 0:e}return ia.call(i,t)?i[t]:void 0},At.prototype.has=function(t){var i=this.__data__;return Yt?void 0!==i[t]:oa.call(i,t)},At.prototype.set=function(t,i){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Yt&&void 0===i?"__lodash_hash_undefined__":i,this};const ki=At,Xt=function(t,i){var e=t.__data__;return function(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}(i)?e["string"==typeof i?"string":"hash"]:e.map};function Ct(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}Ct.prototype.clear=function(){this.size=0,this.__data__={hash:new ki,map:new(Pt||Jt),string:new ki}},Ct.prototype.delete=function(t){var i=Xt(this,t).delete(t);return this.size-=i?1:0,i},Ct.prototype.get=function(t){return Xt(this,t).get(t)},Ct.prototype.has=function(t){return Xt(this,t).has(t)},Ct.prototype.set=function(t,i){var e=Xt(this,t),n=e.size;return e.set(t,i),this.size+=e.size==n?0:1,this};const Pi=Ct;function wt(t){var i=this.__data__=new Jt(t);this.size=i.size}wt.prototype.clear=function(){this.__data__=new Jt,this.size=0},wt.prototype.delete=function(t){var i=this.__data__,e=i.delete(t);return this.size=i.size,e},wt.prototype.get=function(t){return this.__data__.get(t)},wt.prototype.has=function(t){return this.__data__.has(t)},wt.prototype.set=function(t,i){var e=this.__data__;if(e instanceof Jt){var n=e.__data__;if(!Pt||n.length<199)return n.push([t,i]),this.size=++e.size,this;e=this.__data__=new Pi(n)}return e.set(t,i),this.size=e.size,this};const te=wt;var Yi=c(5427),Ra=c(2753);const ee=function(t,i,e,n){var r=!e;e||(e={});for(var o=-1,l=i.length;++o<l;){var a=i[o],d=n?n(e[a],t[a],a,e,t):void 0;void 0===d&&(d=t[a]),r?(0,Ra.Z)(e,a,d):(0,Yi.Z)(e,a,d)}return e};var Re=c(1163);var La=c(4741),_t=c(4214),ji=c(1550);var Pa=Object.prototype.hasOwnProperty;const ja=function(t){if(!(0,_t.Z)(t))return function(t){var i=[];if(null!=t)for(var e in Object(t))i.push(e);return i}(t);var i=(0,ji.Z)(t),e=[];for(var n in t)"constructor"==n&&(i||!Pa.call(t,n))||e.push(n);return e};var Ni=c(8402);const Ge=function(t){return(0,Ni.Z)(t)?(0,La.Z)(t,!0):ja(t)};var Vi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Hi=Vi&&"object"==typeof module&&module&&!module.nodeType&&module,qi=Hi&&Hi.exports===Vi?ut.Z.Buffer:void 0,$i=qi?qi.allocUnsafe:void 0;var zi=c(6889);const Qi=function(){return[]};var Wa=Object.prototype.propertyIsEnumerable,Zi=Object.getOwnPropertySymbols;const Oe=Zi?function(t){return null==t?[]:(t=Object(t),function(t,i){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var l=t[e];i(l,e,t)&&(o[r++]=l)}return o}(Zi(t),function(i){return Wa.call(t,i)}))}:Qi,Ki=function(t,i){for(var e=-1,n=i.length,r=t.length;++e<n;)t[r+e]=i[e];return t},Ui=(0,c(4184).Z)(Object.getPrototypeOf,Object),Wi=Object.getOwnPropertySymbols?function(t){for(var i=[];t;)Ki(i,Oe(t)),t=Ui(t);return i}:Qi,Ji=function(t,i,e){var n=i(t);return(0,yt.Z)(t)?n:Ki(n,e(t))},Ee=function(t){return Ji(t,Re.Z,Oe)},cd=function(t){return Ji(t,Ge,Wi)},Le=(0,vt.Z)(ut.Z,"DataView"),Be=(0,vt.Z)(ut.Z,"Promise"),Ie=(0,vt.Z)(ut.Z,"Set"),ke=(0,vt.Z)(ut.Z,"WeakMap");var Pe=c(4796),bt=c(2035),Xi="[object Map]",tn="[object Promise]",en="[object Set]",nn="[object WeakMap]",sn="[object DataView]",yd=(0,bt.Z)(Le),xd=(0,bt.Z)(Pt),vd=(0,bt.Z)(Be),Ad=(0,bt.Z)(Ie),Cd=(0,bt.Z)(ke),ct=Pe.Z;(Le&&ct(new Le(new ArrayBuffer(1)))!=sn||Pt&&ct(new Pt)!=Xi||Be&&ct(Be.resolve())!=tn||Ie&&ct(new Ie)!=en||ke&&ct(new ke)!=nn)&&(ct=function(t){var i=(0,Pe.Z)(t),e="[object Object]"==i?t.constructor:void 0,n=e?(0,bt.Z)(e):"";if(n)switch(n){case yd:return sn;case xd:return Xi;case vd:return tn;case Ad:return en;case Cd:return nn}return i});const jt=ct;var _d=Object.prototype.hasOwnProperty;const ie=ut.Z.Uint8Array,Ye=function(t){var i=new t.constructor(t.byteLength);return new ie(i).set(new ie(t)),i};var Rd=/\w*$/;var ne=c(5770),rn=ne.Z?ne.Z.prototype:void 0,on=rn?rn.valueOf:void 0;const nu=function(t,i,e){var n=t.constructor;switch(i){case"[object ArrayBuffer]":return Ye(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return function(t,i){var e=i?Ye(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,i){var e=i?Ye(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return function(t){var i=new t.constructor(t.source,Rd.exec(t));return i.lastIndex=t.lastIndex,i}(t);case"[object Set]":return new n;case"[object Symbol]":return function(t){return on?Object(on.call(t)):{}}(t)}};var ln=Object.create;const ru=function(){function t(){}return function(i){if(!(0,_t.Z)(i))return{};if(ln)return ln(i);t.prototype=i;var e=new t;return t.prototype=void 0,e}}();var je=c(4909),Nt=c(6539);var an=c(1162),se=c(8514),dn=se.Z&&se.Z.isMap;const gu=dn?(0,an.Z)(dn):function(t){return(0,Nt.Z)(t)&&"[object Map]"==jt(t)};var un=se.Z&&se.Z.isSet;const yu=un?(0,an.Z)(un):function(t){return(0,Nt.Z)(t)&&"[object Set]"==jt(t)};var cn="[object Arguments]",gn="[object Function]",fn="[object Object]",F={};F[cn]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object DataView]"]=F["[object Boolean]"]=F["[object Date]"]=F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Map]"]=F["[object Number]"]=F[fn]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object Symbol]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Error]"]=F[gn]=F["[object WeakMap]"]=!1;const qu=function re(t,i,e,n,r,o){var l,a=1&i,d=2&i,g=4&i;if(e&&(l=r?e(t,n,r,o):e(t)),void 0!==l)return l;if(!(0,_t.Z)(t))return t;var m=(0,yt.Z)(t);if(m){if(l=function(t){var i=t.length,e=new t.constructor(i);return i&&"string"==typeof t[0]&&_d.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!a)return(0,zi.Z)(t,l)}else{var h=jt(t),x=h==gn||"[object GeneratorFunction]"==h;if((0,je.Z)(t))return function(t,i){if(i)return t.slice();var e=t.length,n=$i?$i(e):new t.constructor(e);return t.copy(n),n}(t,a);if(h==fn||h==cn||x&&!r){if(l=d||x?{}:function(t){return"function"!=typeof t.constructor||(0,ji.Z)(t)?{}:ru(Ui(t))}(t),!a)return d?function(t,i){return ee(t,Wi(t),i)}(t,function(t,i){return t&&ee(i,Ge(i),t)}(l,t)):function(t,i){return ee(t,Oe(t),i)}(t,function(t,i){return t&&ee(i,(0,Re.Z)(i),t)}(l,t))}else{if(!F[h])return r?t:{};l=nu(t,h,a)}}o||(o=new te);var A=o.get(t);if(A)return A;o.set(t,l),yu(t)?t.forEach(function(E){l.add(re(E,i,e,E,t,o))}):gu(t)&&t.forEach(function(E,w){l.set(w,re(E,i,e,w,t,o))});var _=m?void 0:(g?d?cd:Ee:d?Ge:Re.Z)(t);return function(t,i){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==i(t[e],e,t););}(_||t,function(E,w){_&&(E=t[w=E]),(0,Yi.Z)(l,w,re(E,i,e,w,t,o))}),l},oe=function(t){return qu(t,5)};class Ne extends class{constructor(){this.edges=new Map,this.nodes=new Set}addEdge(i){var e;const n=i.src,r=i.dest;if(!this.hasNode(n))throw Error(`addEdge failed source node "${n.toString()}" is not in graph.`);if(!this.hasNode(r))throw Error(`addEdge failed destination node "${r.toString()}" is not in graph.`);if(null===(e=this.edges.get(i.src))||void 0===e?void 0:e.some(o=>o.src===n&&o.dest===r))throw Error(`Add edge failed an edge already exists with src ${n.toString()} => dest ${r.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i))}addNode(i){if(this.nodes.has(i))throw Error(`addNode failed node "${i.toString()}" already exists`);this.nodes.add(i),this.edges.set(i,[])}findPathway(i,e,n,r={nodes:[],edges:[]},o=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===e)return o.concat(r);for(const l of this.getEdgesForNode(i))if(!r.nodes.map(a=>a.toString()).includes(l.dest.toString())){const a=this.findPathway(l.dest,e,l,oe(r),o);a&&(o=o.concat(a))}return o}getEdgesForNode(i){return this.edges.get(i)||[]}hasNode(i){return this.nodes.has(i)}toString(){return Array.from(this.edges.values()).flat().filter(Boolean).map(i=>i.toString()).join("\n")}}{constructor(i){super(),this.includeRelationsBetweenNetworks=!1,this.selfRelation=i.selfRelation,this.unknownRelation=i.unknownRelation,this.mutualDictionary=i.mutualDictionary,this.combinatorialDictionary=i.combinatorialDictionary}get combinatoriallyEntailed(){const i=[],e=[...this.nodes];for(const n of e)for(const r of e){if(n===r||!this.includeRelationsBetweenNetworks&&n.network!==r.network||this.getEdgesForNode(n).find(l=>l.dest===r))continue;const o=this.findPathway(n,r).map(l=>l.edges.map(a=>a.relation)).reduce((l,a,d)=>{const g=[...a];let m=g.shift();for(;g.length;){const h=g.shift();m=this.combinatorialDictionary[m][h]}return l.push(m),a.length=0,l},[]);0===o.length&&o.push(this.unknownRelation),[...new Set(o.filter(l=>l!==this.unknownRelation))].length>1?console.warn(`Multiple relations detected for ${n.toString()} => ${r.toString()} comparison`,o):i.push({relation:o[0],relationType:T.combinatoriallyEntailed,stimuli:[n,r]})}return i}get identities(){return[...this.nodes].map(i=>({relation:this.selfRelation,relationType:T.identity,stimuli:[i,i]}))}get mutuallyEntailed(){return[...this.edges.values()].flat().filter(i=>i.relationType===T.mutuallyEntailed).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}get trained(){return[...this.edges.values()].flat().filter(i=>i.relationType===T.trained).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}addTrainedAndMutualRelations(i){var e,n;const r=i.src,o=i.dest;if(!this.hasNode(r))throw Error(`Add edge failed source node "${r.toString()}" is not in graph.`);if(!this.hasNode(o))throw Error(`Add edge failed destination node "${o.toString()}" is not in graph.`);if(!(null===(e=this.mutualDictionary)||void 0===e?void 0:e[i.relation]))throw Error(`Could not find inverse of relation ${i.relation}`);if(null===(n=this.edges.get(i.src))||void 0===n?void 0:n.some(l=>l.src===r&&l.dest===o))throw Error(`Add edge failed an edge already exists with src ${r.toString()} => dest ${o.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i)),this.edges.set(i.dest,this.edges.get(i.dest).concat(new Y(i.dest,i.src,this.mutualDictionary[i.relation],T.mutuallyEntailed)))}findPathway(i,e,n,r={nodes:[],edges:[]},o=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===e)return o.concat(r);for(const l of this.getEdgesForNode(i))if(!r.nodes.map(a=>a.toString()).includes(l.dest.toString())){const a=this.findPathway(l.dest,e,l,oe(r),o);a&&(o=o.concat(a))}return o}toString(){return[].concat(this.identities,this.trained,this.mutuallyEntailed,this.combinatoriallyEntailed).flat().map(i=>`${i.relationType}: ${i.stimuli[0]} ${i.relation} ${i.stimuli[1]}`).join("\n")}}class k{constructor(i,e,n=""){this.name=i,this.network=e,this.value=n}repr(){return`new RelationalFrameNode('${this.name}','${this.network}','${this.value}')`}toString(){return`${this.name}${this.network}`}}var Ve=c(202);let hn=(()=>{class t extends Ne{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n,this.includeRelationsBetweenNetworks=!0;const r=new k("A",1,j(e)),o=new k("B",1,j(e)),l=new k("C",1,j(e));this.addNode(r),this.addNode(o),this.addNode(l),this.addEdge(new Y(r,o,"different",T.trained)),this.addEdge(new Y(r,l,"different",T.trained)),this.addEdge(new Y(o,r,"different",T.trained)),this.addEdge(new Y(o,l,"different",T.trained)),this.addEdge(new Y(l,r,"different",T.trained)),this.addEdge(new Y(l,o,"different",T.trained));const a=new k("D",2,j(e)),d=new k("E",2,j(e)),g=new k("F",2,j(e));this.addNode(a),this.addNode(d),this.addNode(g)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG($t),s.LFG(Ve.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=c(2745);const Ku=[[f.bR.same,f.bR.same,void 0],[f.bR.same,f.bR.greaterThan,void 0],[f.bR.same,f.bR.lessThan,void 0],[f.bR.lessThan,f.bR.same,void 0],[f.bR.lessThan,void 0,f.bR.lessThan],[f.bR.lessThan,f.bR.greaterThan,void 0],[f.bR.greaterThan,f.bR.same,void 0],[f.bR.greaterThan,f.bR.lessThan,void 0],[f.bR.greaterThan,void 0,f.bR.greaterThan]],Uu=[[f.bR.lessThan,f.bR.lessThan,void 0],[f.bR.greaterThan,f.bR.greaterThan,void 0]];let He=(()=>{class t extends Ne{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n;const r=new k("A",3,j(e)),o=new k("B",3,j(e)),l=new k("C",3,j(e));this.addNode(r),this.addNode(o),this.addNode(l);const[a,d,g]=kt(Ku);a&&this.addTrainedAndMutualRelations(new Y(r,o,a,T.trained)),d&&this.addTrainedAndMutualRelations(new Y(r,l,d,T.trained)),g&&this.addTrainedAndMutualRelations(new Y(o,l,g,T.trained));const m=new k("A",4,j(e)),h=new k("B",4,j(e)),x=new k("C",4,j(e));this.addNode(m),this.addNode(h),this.addNode(x);const[A,S,_]=kt(Uu);A&&this.addTrainedAndMutualRelations(new Y(m,h,A,T.trained)),S&&this.addTrainedAndMutualRelations(new Y(m,x,S,T.trained)),_&&this.addTrainedAndMutualRelations(new Y(h,x,_,T.trained))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG($t),s.LFG(Ve.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mn=(()=>{class t extends Ne{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n;const r=new k("A",5,j(e)),o=new k("B",5,j(e)),l=new k("C",5,j(e));this.addNode(r),this.addNode(o),this.addNode(l),this.addTrainedAndMutualRelations(new Y(r,o,"same",T.trained)),this.addTrainedAndMutualRelations(new Y(r,l,"same",T.trained)),this.addTrainedAndMutualRelations(new Y(o,l,"same",T.trained));const a=new k("A",6,j(e)),d=new k("B",6,j(e)),g=new k("C",6,j(e));this.addNode(a),this.addNode(d),this.addNode(g),this.addTrainedAndMutualRelations(new Y(a,d,"greaterThan",T.trained)),this.addTrainedAndMutualRelations(new Y(a,g,"greaterThan",T.trained)),this.addTrainedAndMutualRelations(new Y(d,g,"greaterThan",T.trained))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG($t),s.LFG(Ve.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Wu(){const t=kt(Dl);if(void 0===t)throw Error('Random stimulus case returned "undefined"!');return t}var pn=c(2636),Q=c(4762),Dt=c(9524),Ju=c(2759),St=c(6797),Tt=c(8049),Vt=c(3190);function le(t){return(0,b.X$)((null==t?void 0:t.anchor)||"fadeOut",[(0,b.SB)("false",(0,b.oB)({visibility:"visible",opacity:1})),(0,b.SB)(":leave",(0,b.oB)({visibility:"visible",opacity:1})),(0,b.SB)("true",(0,b.oB)({visibility:"hidden",opacity:0})),(0,b.eR)("void => *",(0,b.jt)(0)),(0,b.eR)("* => true",(0,b.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}const N=150;let $e=(()=>{class t{constructor(e,n){this.data=e,this.ref=n,this.animated=!1,this.disableClose=Boolean(this.data.disableClose)}close(){return(0,Q.mG)(this,void 0,void 0,function*(){this.animated=!0,yield(0,St.H)(N).toPromise(),this.ref.close()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Te),s.Y36(Lt))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block-start-dialog"]],decls:3,vars:3,consts:[["matRipple","",1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white",3,"matRippleDisabled","tap"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.NdJ("tap",function(){return!1===n.disableClose&&n.close()}),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",n.animated)("matRippleDisabled",n.animated||n.disableClose),s.xp6(2),s.Oqu(n.data.text))},directives:[dt.wG],styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{white-space:pre-wrap;font-size:clamp(1rem,8vw,15rem);line-height:clamp(1rem,8vw,15rem);text-align:center}"],data:{animation:[le({duration:N})]}}),t})();var Z=c(7214);const xn=function(t,i,e){return t==t&&(void 0!==e&&(t=t<=e?t:e),void 0!==i&&(t=t>=i?t:i)),t};var vn=c(1994);const ec=function(t,i){return(0,vn.Z)((0,zi.Z)(t),xn(i,0,t.length))},nc=function(t,i){var e=(0,Bi.Z)(t);return(0,vn.Z)(e,xn(i,0,e.length))};var sc=c(8078);var lc=/\s/;var uc=/^\s+/;const gc=function(t){return t&&t.slice(0,function(t){for(var i=t.length;i--&&lc.test(t.charAt(i)););return i}(t)+1).replace(uc,"")};var pc=/^[-+]0x[0-9a-f]+$/i,yc=/^0b[01]+$/i,xc=/^0o[0-7]+$/i,vc=parseInt;const Cc=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||(0,Nt.Z)(t)&&"[object Symbol]"==(0,Pe.Z)(t)}(t))return NaN;if((0,_t.Z)(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=(0,_t.Z)(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=gc(t);var e=yc.test(t);return e||xc.test(t)?vc(t.slice(2),e?2:8):pc.test(t)?NaN:+t},Sc=function(t){var i=function(t){return t?1/0===(t=Cc(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),e=i%1;return i==i?e?i-e:i:0},ze=function(t,i,e){return i=(e?function(t,i,e){if(!(0,_t.Z)(e))return!1;var n=typeof i;return!!("number"==n?(0,Ni.Z)(e)&&(0,sc.Z)(i,e.length):"string"==n&&i in e)&&(0,Me.Z)(e[i],t)}(t,i,e):void 0===i)?1:Sc(i),((0,yt.Z)(t)?ec:nc)(t,i)};var v=c(4751);const Ht={_origin:"https://api.emailjs.com"};class bn{constructor(i){this.status=i.status,this.text=i.responseText}}const Sn=(t,i,e,n)=>{const r=n||Ht._userID;return((t,i,e)=>{if(!t)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!i)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(r,t,i),((t,i,e={})=>new Promise((n,r)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:l})=>{const a=new bn(l);200===a.status||"OK"===a.text?n(a):r(a)}),o.addEventListener("error",({target:l})=>{r(new bn(l))}),o.open("POST",Ht._origin+t,!0),Object.keys(e).forEach(l=>{o.setRequestHeader(l,e[l])}),o.send(i)}))("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:r,service_id:t,template_id:i,template_params:e}),{"Content-type":"application/json"})};var Qe=c(9119);const Tn="Throughout this experiment, you will be presented with two sets of letter sequences, one at the top portion of\n    the screen and one in the middle portion of the screen. You will also be presented with some response option\n    buttons along the bottom of the screen. These buttons may denote the relationship between the letter sequences.\n    They may or may not be familiar to you. Your task is to select the response option that accurately represents the\n    relationship between the letter sequences. You can make your selection by touching the screen or clicking on the\n    relevant response option at the bottom of the screen.\n\n    Your participation has to be done in one sitting. Typically, participation takes approximately 90 minutes or more to\n    complete. To successfully complete, it is recommended that you minimize sources of distraction while\n    participating. This includes being in a quiet space away from other devices and putting this device on \u201cDo not\n    disturb\u201d mode or its equivalent.\n\n    Successful completion may be challenging and confusing. Please persist to the end and give it your best effort.\n    During some portions of the experiment you will be provided feedback on your selections. If you don\u2019t see\n    feedback, please continue making selections. There is a time limit for making your selections. Please choose your\n    response as fast as you can while still being accurate. Your compensation will go up the more accurate you are.\n\n    This experiment will restart if it is no longer the active window. In order to complete quickly, please do not open \n    other tabs or software while doing this task.";var Mc=c(2376);let gt=(()=>{class t{constructor(e,n){this.fb=e,this.studyConfigService=n,this.reportEntries=[],this.formGroup=this.fb.group({studyInstructions:[""],participantId:["",v.kI.required],iCannotKnow:["",v.kI.required],contextualControl:["",v.kI.required],cueType:["",[v.kI.required]],trialTimeoutSeconds:[0,v.kI.min(1)],balanceEquivalence:[0,v.kI.min(1)],balanceLessThan:[0,v.kI.min(1)],balanceGreaterThan:[0,v.kI.min(1)],balanceICannotKnow:[-1,v.kI.min(0)],blockId:["",v.kI.required],blockAttempts:[-1,v.kI.min(0)],stimulusCase:["",v.kI.required],trainingAttempts:[-1,v.kI.min(0)],probeAttempts:[-1,v.kI.min(0)],trialNumber:[-1,v.kI.min(0)],totalTrials:[-1,v.kI.min(0)],sampleNode:["",v.kI.required],sample:["",v.kI.required],comparisonNode:["",v.kI.required],comparison:["",v.kI.required],correctResponse:["",v.kI.required],button1Image:["",v.kI.required],button1Relation:["",v.kI.required],button2Image:["",v.kI.required],button2Relation:["",v.kI.required],button3Image:["",v.kI.required],button3Relation:["",v.kI.required],button4Image:["",v.kI.required],button4Relation:["",v.kI.required],buttonPosition:[-2,v.kI.min(-1)],selectedResponse:[""],consequence:[""],trialStarted:["",v.kI.required],trialCompleted:["",v.kI.required],trialDurationInSeconds:[-1,v.kI.min(0)],trialOutcome:["",v.kI.required],containsSequentialTriplicates:["",v.kI.required],failSafeDuration:["",v.kI.required],startInstructions:["",v.kI.required],retryInstructions:["",v.kI.required],studyFailed:["FALSE"],sequentialCorrect:[-1,v.kI.min(0)]})}add(e,n){this.formGroup.get(e).setValue(n)}addTrial(e,n){var r,o;if(!e.studyConfig)throw Error("Study configuration is undefined");if(!e.trial)throw Error("Trial is undefined");this.studyConfig=e.studyConfig,this.add("studyInstructions",0===this.reportEntries.length?Tn.replaceAll("\n",""):""),this.add("participantId",e.studyConfig.participantId),this.add("iCannotKnow",e.studyConfig.iCannotKnow),this.add("contextualControl",e.studyConfig.contextualControl),this.add("cueType",e.studyConfig.cueType),this.add("trialTimeoutSeconds",e.studyConfig.trialTimeoutSeconds),this.add("balanceEquivalence",e.studyConfig.balance.same),this.add("balanceLessThan",e.studyConfig.balance.lessThan),this.add("balanceGreaterThan",e.studyConfig.balance.greaterThan),this.add("balanceICannotKnow",null!==(r=e.studyConfig.balance.iCannotKnow)&&void 0!==r?r:0),this.add("blockId",e.name),this.add("blockAttempts",e.attempts),this.add("trainingAttempts",e.trainingAttempts),this.add("probeAttempts",e.probeAttempts),this.add("trialNumber",e.trialNum),this.add("totalTrials",e.totalTrials),this.add("sampleNode",e.trial.stimuli[0].toString()),this.add("sample",e.trial.stimuli[0].value),this.add("comparisonNode",e.trial.stimuli[1].toString()),this.add("comparison",e.trial.stimuli[1].value),this.add("correctResponse",e.trial.relation),this.add("button1Image",e.trial.cueComponentConfigs[0].fileName),this.add("button1Relation",e.trial.cueComponentConfigs[0].value),this.add("button2Image",e.trial.cueComponentConfigs[1].fileName),this.add("button2Relation",e.trial.cueComponentConfigs[1].value),this.add("button3Image",e.trial.cueComponentConfigs[2].fileName),this.add("button3Relation",e.trial.cueComponentConfigs[2].value),this.add("button4Image",e.trial.cueComponentConfigs.length>=4?e.trial.cueComponentConfigs[3].fileName:"UNDEFINED"),this.add("button4Relation",e.trial.cueComponentConfigs.length>=4?e.trial.cueComponentConfigs[3].value:"UNDEFINED"),this.add("buttonPosition",(null==n?void 0:n.position)?n.position:-1),this.add("selectedResponse",(null==n?void 0:n.cue)?n.cue.value:""),this.add("consequence",(null==n?void 0:n.cue)?(null==e?void 0:e.feedback)?e.feedback:"NEXT TRIAL":"TIME EXPIRED"),this.add("trialStarted",n.startedAt),this.add("trialCompleted",n.completedAt),this.add("trialDurationInSeconds",Math.abs(n.startedAt.getTime()-n.completedAt.getTime())/1e3),this.add("trialOutcome",(null===(o=null==n?void 0:n.cue)||void 0===o?void 0:o.value)===e.trial.relation?"PASS":"FAIL"),this.add("containsSequentialTriplicates",e.containsSequentialTriplicates?"TRUE":"FALSE"),this.add("failSafeDuration",e.failSafeDuration.toString()),this.add("startInstructions",e.startInstructions),this.add("retryInstructions",e.retryInstructions),this.add("studyFailed",e.studyFailed?"TRUE":"FALSE"),this.add("sequentialCorrect",e.sequentialCorrect),this.reportEntries.push(this.formGroup.value),this.formGroup.reset(),console.log(this.reportEntries)}blobToBase64(e){return new Promise((n,r)=>{const o=new FileReader;o.onloadend=()=>n(o.result),o.readAsDataURL(e)})}sendReport(e){return(0,Q.mG)(this,void 0,void 0,function*(){const n=yield this.studyConfigService.studyConfig.toPromise(),r="\r\n",o=this.reportEntries.map(g=>Object.values(g).map(m=>{var h;return null!==(h=null==m?void 0:m.toString())&&void 0!==h?h:""}).join(";")).join(r),l=`MEEKU - ${n.participantId}.csv`,a=new Blob([e+r+Object.keys(this.formGroup.value).join(";")+r+o],{type:"text/csv"}),d=yield this.blobToBase64(a);((t,i="https://api.emailjs.com")=>{Ht._userID=t,Ht._origin=i})("user_OawQbiPiSgdzcdY3SkdGT"),Sn("meeku-report","meeku-report",{attachmentName:l,content:d,from_name:"Meeku Robot",to_name:"Patrick",message:`New report has been issued! ${n.participantId}`,participant:l},"user_OawQbiPiSgdzcdY3SkdGT").then(function(g){},function(g){console.error("Failed to send report...",g)})})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Mc.qu),s.LFG(Qe.R))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const tt=850;var Ft;class W{constructor(){Ft.set(this,0)}get showColorTrial(){return 100===(0,Q.Q_)(this,Ft,"f")}increase(){(0,Q.YH)(this,Ft,+(0,Q.Q_)(this,Ft,"f")+1,"f")}reset(){(0,Q.YH)(this,Ft,0,"f")}}Ft=new WeakMap,W.\u0275fac=function(i){return new(i||W)},W.\u0275prov=s.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"});const Rc=function(t,i){return{value:t,params:i}};let Gc=(()=>{class t{constructor(e,n){this.data=e,this.ref=n,this.animated=!1,setTimeout(()=>this.animated=!0,0),setTimeout(()=>this.ref.close(),this.data.durationMs);const r=new Audio;r.src=`./assets/${e.feedback.toLowerCase().replaceAll(" ","-")}.mp3`,r.load(),r.play().then(()=>r.remove())}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Te),s.Y36(Lt))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-correct-dialog"]],decls:3,vars:5,consts:[[1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",s.WLB(2,Rc,n.animated,n.data.animationParams)),s.xp6(2),s.Oqu(n.data.feedback))},styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{font-size:clamp(1rem,8vw,15rem);white-space:nowrap}"],data:{animation:[le()]}}),t})();var Oc=c(409);const H=500,Fn={stimuli:[H,2*H],cues:Array(5).fill(3*H)},Ze=Math.max(...Object.values(Fn).flat())+1e3;function Mn(t){return(0,b.X$)((null==t?void 0:t.anchor)||"fadeIn",[(0,b.SB)("void",(0,b.oB)({visibility:"hidden",opacity:0})),(0,b.SB)("false",(0,b.oB)({visibility:"hidden",opacity:0})),(0,b.SB)("true",(0,b.oB)({visibility:"visible",opacity:1})),(0,b.eR)("* => true",(0,b.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}var Rn=c(730);const Ec=function(t){return{delay:t}},Lc=function(t,i){return{value:t,params:i}},Bc=function(t,i){return{"d-none":t,"hover-able":i}},Ic=function(t){return{"pointer-events":t}};let Gn=(()=>{class t{constructor(e){this.deviceDetectorSvc=e,this.animationDelay=0,this.disabled=!1,this.selected=new s.vpe,this.isDesktop=this.deviceDetectorSvc.isDesktop()}select(){this.disabled=!0,this.selected.emit(this.config)}set(e){return(0,Q.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield(0,St.H)(N).toPromise(),this.disabled=!1,this.config=e,this.animate="fade-in"})}tap(){this.disabled=!0,this.selected.emit(this.config)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Rn.x0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-cue"]],inputs:{animationDelay:"animationDelay"},outputs:{selected:"selected"},decls:2,vars:18,consts:[["onclick","blur()","matRipple","",1,"trial-item","dynamic-text",3,"matRippleDisabled","ngClass","ngStyle","tap"]],template:function(e,n){1&e&&(s.TgZ(0,"button",0),s.NdJ("tap",function(){return!n.disabled&&n.select()}),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",null==n.config?null:n.config.fileName),s.Q6J("@fadeIn",s.WLB(10,Lc,"fade-in"===n.animate,s.VKq(8,Ec,n.animationDelay)))("@fadeOut","fade-out"===n.animate)("matRippleDisabled",n.disabled)("ngClass",s.WLB(13,Bc,void 0===n.config,n.isDesktop))("ngStyle",s.VKq(16,Ic,null!=n.config&&n.config.value?"all":"none")),s.xp6(1),s.hij(" ",null!=n.config&&n.config.isArbitrary?"\xa0":(null==n.config?null:n.config.viewValue)||""," "))},directives:[dt.wG,y.mk,y.PC],styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[Mn(),le({duration:N})]}}),t})();const kc=function(t){return{delay:t}},Pc=function(t,i){return{value:t,params:i}};let On=(()=>{class t{constructor(e){this.deviceDetectorSvc=e,this.animationDelay=0,this.isDesktop=this.deviceDetectorSvc.isDesktop()}set(e){return(0,Q.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield(0,St.H)(N).toPromise(),this.backgroundImage=f.Sg,this.cue=e,this.animate="fade-in"})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Rn.x0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-stimulus"]],inputs:{animationDelay:"animationDelay"},decls:2,vars:10,consts:[[1,"trial-item","dynamic-text"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",n.backgroundImage),s.Q6J("@fadeIn",s.WLB(7,Pc,"fade-in"===n.animate,s.VKq(5,kc,n.animationDelay)))("@fadeOut","fade-out"===n.animate),s.xp6(1),s.hij(" ",n.cue,"\n"))},styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[Mn(),le({duration:N})]}}),t})();function Yc(t,i){1&t&&s._UZ(0,"trial-stimulus",4),2&t&&s.Q6J("animationDelay",i.$implicit)}function jc(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial-cue",5),s.NdJ("selected",function(r){const l=s.CHM(e).index;return s.oxw().selected(r,l+1)}),s.qZA()}2&t&&s.Q6J("animationDelay",i.$implicit)}let q=class{constructor(){this.animationDelayMs=Fn,this.complete=!1,this.completed=new s.vpe,this.secondsInTrial=0}clearTimer(){this.timerSub&&this.timerSub.unsubscribe()}ngAfterViewInit(){if(!this.trialCueComponents)throw Error("Trial cue components are undefined");if(!this.trialStimulusComponents)throw Error("Trial stimulus components are undefined");this.trialCueComponents.changes.pipe((0,Dt.t)(this)).subscribe(),this.trialStimulusComponents.changes.pipe((0,Dt.t)(this)).subscribe()}selected(i,e){if(!this.startedAt)throw Error("Started at date is undefined");this.clearTimer(),this.complete=!0,this.completed.emit({cue:i,position:e,startedAt:this.startedAt,completedAt:new Date})}setTimer(){const{studyConfig:i}=this;if(!i)throw Error("Study configuration is undefined");this.clearTimer(),this.secondsInTrial=0,this.timerSub=(0,St.H)(Ze,1e3).pipe((0,Oc.o)(()=>this.secondsInTrial<i.trialTimeoutSeconds&&!this.complete),(0,K.b)(()=>{this.secondsInTrial++,this.secondsInTrial===i.trialTimeoutSeconds&&!this.complete&&this.selected()}),(0,Dt.t)(this)).subscribe()}show(i){var e,n;if(!this.trialCueComponents)throw Error("Trial cue components are undefined");if(!this.trialStimulusComponents)throw Error("Trial stimulus components are undefined");this.startedAt=new Date,this.complete=!1,this.setTimer();for(const[r,o]of i.stimuli.entries())null===(e=this.trialStimulusComponents.get(r))||void 0===e||e.set(o.value);for(let r=0;r<this.trialCueComponents.length;r++)null===(n=this.trialCueComponents.get(r))||void 0===n||n.set(i.cueComponentConfigs[r])}};function ae(t){return{data:t,disableClose:!0,hasBackdrop:!1,closeOnNavigation:!0,height:"100vh",maxHeight:"100vh",maxWidth:"100vw",panelClass:["fullscreen-dialog-container","animate__animated","animate__fadeIn"],width:"100vw"}}function Vc(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}}q.\u0275fac=function(i){return new(i||q)},q.\u0275cmp=s.Xpm({type:q,selectors:[["trial"]],viewQuery:function(i,e){if(1&i&&(s.Gf(Gn,5),s.Gf(On,5)),2&i){let n;s.iGM(n=s.CRH())&&(e.trialCueComponents=n),s.iGM(n=s.CRH())&&(e.trialStimulusComponents=n)}},inputs:{studyConfig:"studyConfig"},outputs:{completed:"completed"},decls:4,vars:2,consts:[[1,"trial-sample-stimuli"],[3,"animationDelay",4,"ngFor","ngForOf"],[1,"trial-buttons"],[3,"animationDelay","selected",4,"ngFor","ngForOf"],[3,"animationDelay"],[3,"animationDelay","selected"]],template:function(i,e){1&i&&(s.TgZ(0,"div",0),s.YNc(1,Yc,1,1,"trial-stimulus",1),s.qZA(),s.TgZ(2,"div",2),s.YNc(3,jc,1,1,"trial-cue",3),s.qZA()),2&i&&(s.xp6(1),s.Q6J("ngForOf",e.animationDelayMs.stimuli),s.xp6(2),s.Q6J("ngForOf",e.animationDelayMs.cues))},directives:[y.sg,On,Gn],styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}"]}),q=(0,Q.gn)([(0,Dt.c)()],q);let de=(()=>{class t{constructor(e,n,r){this.dialog=e,this.reportSvc=n,this.trialCounterSvc=r,this.completed=new s.vpe,this.containsSequentialTriplicates=!1,this.correct=0,this.failSafeDuration=0,this.feedBackShown=!1,this.incorrect=0,this.index=-1,this.isVisible=!0,this.name="Block",this.retryInstructions="CLICK TO TRY AGAIN",this.sequentialCorrect=0,this.startInstructions="CLICK TO START",this.studyFailed=!1,this.trialCompleted=new s.vpe,this.trials=[],this._attempts=0,this._probeAttempts=0,this._totalTrials=0,this._trainingAttempts=0}get attempts(){return this._attempts}get probeAttempts(){return this._probeAttempts}get totalTrials(){return this._totalTrials}get trainingAttempts(){return this._trainingAttempts}get percentCorrect(){return this.correct/(this.correct+this.incorrect)*100}get trialNum(){return this.index+1}complete(){this.incrementAttempt(),this.setVisibility(!1,H),this.completedAt=new Date,setTimeout(()=>{this.completed.emit()},H+(this.feedBackShown?tt:N))}createTrials(){return[]}failed(){this.studyFailed=!0,this.setVisibility(!1,0),this.prompt("THANKS FOR PARTICIPATING!",!0,H+(this.feedBackShown?tt:N)).subscribe(),this.completed.emit()}feedbackEnabled(){return!1}grade(e){var n,r;if(!this.trial)throw Error("Trial is undefined");const o=(null===(n=null==e?void 0:e.cue)||void 0===n?void 0:n.value)===this.trial.relation;return(null===(r=null==e?void 0:e.cue)||void 0===r?void 0:r.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++):(this.incorrect++,this.sequentialCorrect=0),o?"CORRECT":"WRONG"}increaseTotalTrials(){this._totalTrials++}incrementAttempt(){this._attempts++}incrementProbeAttempts(){return this._probeAttempts++}incrementTrainingAttempts(){return this._trainingAttempts++}nextTrial(){-1===this.index&&(this.startedAt=new Date),this.trialCounterSvc.increase(),this.trialCounterSvc.showColorTrial?(this.showTrial(function(){const t=kt(["red","green","blue"]);if(!t)throw Error("Missing color in create color trial");return{relation:t,relationType:"N/A",stimuli:[new k("choose",0,"choose"),new k(t,0,t)],cueComponentConfigs:(0,Z.Z)([{fileName:f.Sg,isArbitrary:!1,value:"red",viewValue:"red"},{fileName:f.Sg,isArbitrary:!1,value:"blue",viewValue:"blue"},{fileName:f.Sg,isArbitrary:!1,value:"green",viewValue:"green"}])}}(),this.feedBackShown?tt:0),this.trialCompleted.pipe((0,Tt.P)()).subscribe(e=>this.cueSelected(e)),this.trialCounterSvc.reset()):this.index!==this.trials.length-1?(this.index++,this.showTrial(this.trials[this.index],this.feedBackShown?tt:0),this.trialCompleted.pipe((0,Tt.P)()).subscribe(e=>this.cueSelected(e))):this.complete()}prompt(e,n=!1,r=Ze){return(0,St.H)(r).pipe((0,Tt.P)(),(0,Vt.w)(()=>this.dialog.open($e,ae({text:e,disableClose:n})).afterClosed()))}reset(){this.index=-1,this.correct=0,this.incorrect=0,this.sequentialCorrect=0,this.trials=this.createTrials()}setVisibility(e,n=Ze){setTimeout(()=>this.isVisible=e,n)}showFeedback(e,n=1e3,r={delay:tt,duration:N}){this.dialog.open(Gc,ae({animationParams:r,durationMs:n,feedback:e}))}showTrial(e,n=tt){this.trial=e,setTimeout(()=>{var r;return null===(r=this.trialComponent)||void 0===r?void 0:r.show(e)},n)}start(){0===this.trials.length&&this.reset(),this.prompt(this.startInstructions,!1,H).subscribe(()=>{this.setVisibility(!0,0),this.nextTrial()})}cueSelected(e){this.feedback=this.grade(e),(null==e?void 0:e.cue)?this.feedback&&this.feedbackEnabled()?(this.showFeedback(this.feedback),this.feedBackShown=!0):this.feedBackShown=!1:(this.showFeedback("TIME EXPIRED"),this.feedBackShown=!0),this.reportSvc.addTrial(this,e),this.increaseTotalTrials(),this.nextTrial()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(U),s.Y36(gt),s.Y36(W))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block"]],viewQuery:function(e,n){if(1&e&&s.Gf(q,5),2&e){let r;s.iGM(r=s.CRH())&&(n.trialComponent=r.first)}},inputs:{studyConfig:"studyConfig"},outputs:{completed:"completed",trialCompleted:"trialCompleted"},decls:1,vars:1,consts:[[3,"completed",4,"ngIf"],[3,"completed"]],template:function(e,n){1&e&&s.YNc(0,Vc,1,0,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[y.O5,q],styles:[""],data:{animation:[]}}),t})();var ue=c(2151);function Ke(t,i){return new Array(t.iCannotKnow?4:3).fill(void 0).map(()=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[i],value:i,viewValue:ue.upper(i)}))}function ce(t){return(0,Z.Z)(t.iCannotKnow?f.Tz:f.do).map(e=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[e],value:e,viewValue:ue.upper(e)}))}function qc(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let $c=(()=>{class t extends de{constructor(e,n,r,o){super(e,n,r),this.network1And2Graph=o,this.name="Forced Choice",this.numDifferentProbeTrials=5,this.numIdkProbeTrials=5,this.numIdkTrainingTrials=6,this.numProbeTrials=10,this.probeFailuresAllotted=2,this.probesFailed=0,this.trainingFailuresAllotted=2,this.trainingsFailed=0}get numTrainingTrials(){if(!this.studyConfig)throw Error("Study configuration is undefined");return this.studyConfig.iCannotKnow?18:12}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study studyConfig not defined");const n=Ke(e,f.bR.same),r=Ke(e,f.bR.different),o=Ke(e,f.bR.iCannotKnow),l=this.network1And2Graph.identities.filter(x=>1===x.stimuli[0].network),a=(0,Z.Z)([l,l].flat().map(x=>Object.assign(Object.assign({},x),{cueComponentConfigs:n}))),d=(0,Z.Z)([this.network1And2Graph.trained,this.network1And2Graph.mutuallyEntailed].flat().map(x=>Object.assign(Object.assign({},x),{cueComponentConfigs:r}))),g=(0,Z.Z)([this.network1And2Graph.combinatoriallyEntailed.filter(x=>!(2===x.stimuli[0].network&&2===x.stimuli[1].network))].flat().map(x=>Object.assign(Object.assign({},x),{cueComponentConfigs:o}))),m=e.iCannotKnow?a.concat(d,ze(g,this.numIdkTrainingTrials)):a.concat(d);if(m.length>this.numTrainingTrials)throw Error(`Training trials length "${m.length}" is greater than specified length "${this.numTrainingTrials}"`);const h=(0,Z.Z)(oe(ze(d,this.numDifferentProbeTrials)).concat(oe(ze(g,this.numIdkProbeTrials))).map(x=>(x.cueComponentConfigs=function(t,i,e){return(0,Z.Z)(new Array(2).fill(void 0).map(()=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[i],value:i,viewValue:ue.upper(i)})).concat(new Array(2).fill(void 0).map(()=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[e],value:e,viewValue:ue.upper(e)}))))}(e,f.bR.different,f.bR.iCannotKnow),x)));if(h.length>this.numProbeTrials)throw Error(`Probe trials length "${h.length}" is greater than specified length "${this.numIdkProbeTrials}"`);return e.iCannotKnow?m.concat(h):m}feedbackEnabled(){return this.index<this.numTrainingTrials}nextTrial(){this.trialNum===this.numTrainingTrials&&100!==this.percentCorrect?(this.trainingsFailed++,this.incrementTrainingAttempts(),this.trainingsFailed>=this.trainingFailuresAllotted?this.failed():this.retry()):this.trialNum===this.numProbeTrials+this.numTrainingTrials&&100!==this.percentCorrect?(this.probesFailed++,this.incrementProbeAttempts(),this.probesFailed>=this.probeFailuresAllotted?this.failed():this.retry()):(this.trialNum>=this.numTrainingTrials&&(this.trainingsFailed=0),super.nextTrial())}ngOnInit(){this.start()}retry(){this.incrementAttempt(),this.setVisibility(!1,N),this.prompt(this.retryInstructions,!1,H+(this.feedBackShown?tt:N)).subscribe(()=>{this.feedBackShown=!1,this.setVisibility(!0,0),this.nextTrial()}),this.reset()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(U),s.Y36(gt),s.Y36(W),s.Y36(hn))},t.\u0275cmp=s.Xpm({type:t,selectors:[["forced-choice-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,qc,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[y.O5,q],styles:[""],data:{animation:[]}}),t})();function ge(t){var i=-1,e=null==t?0:t.length;for(this.__data__=new Pi;++i<e;)this.add(t[i])}ge.prototype.add=ge.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ge.prototype.has=function(t){return this.__data__.has(t)};const Wc=ge,Xc=function(t,i){for(var e=-1,n=null==t?0:t.length;++e<n;)if(i(t[e],e,t))return!0;return!1},eg=function(t,i){return t.has(i)},En=function(t,i,e,n,r,o){var l=1&e,a=t.length,d=i.length;if(a!=d&&!(l&&d>a))return!1;var g=o.get(t),m=o.get(i);if(g&&m)return g==i&&m==t;var h=-1,x=!0,A=2&e?new Wc:void 0;for(o.set(t,i),o.set(i,t);++h<a;){var S=t[h],_=i[h];if(n)var E=l?n(_,S,h,i,t,o):n(S,_,h,t,i,o);if(void 0!==E){if(E)continue;x=!1;break}if(A){if(!Xc(i,function(w,V){if(!eg(A,V)&&(S===w||r(S,w,e,n,o)))return A.push(V)})){x=!1;break}}else if(S!==_&&!r(S,_,e,n,o)){x=!1;break}}return o.delete(t),o.delete(i),x},og=function(t){var i=-1,e=Array(t.size);return t.forEach(function(n,r){e[++i]=[r,n]}),e},ag=function(t){var i=-1,e=Array(t.size);return t.forEach(function(n){e[++i]=n}),e};var Ln=ne.Z?ne.Z.prototype:void 0,Ue=Ln?Ln.valueOf:void 0;var Sg=Object.prototype.hasOwnProperty;var Mg=c(8137),Bn="[object Arguments]",In="[object Array]",fe="[object Object]",kn=Object.prototype.hasOwnProperty;const Eg=function(t,i,e,n,r,o){var l=(0,yt.Z)(t),a=(0,yt.Z)(i),d=l?In:jt(t),g=a?In:jt(i),m=(d=d==Bn?fe:d)==fe,h=(g=g==Bn?fe:g)==fe,x=d==g;if(x&&(0,je.Z)(t)){if(!(0,je.Z)(i))return!1;l=!0,m=!1}if(x&&!m)return o||(o=new te),l||(0,Mg.Z)(t)?En(t,i,e,n,r,o):function(t,i,e,n,r,o,l){switch(e){case"[object DataView]":if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=i.byteLength||!o(new ie(t),new ie(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,Me.Z)(+t,+i);case"[object Error]":return t.name==i.name&&t.message==i.message;case"[object RegExp]":case"[object String]":return t==i+"";case"[object Map]":var a=og;case"[object Set]":if(a||(a=ag),t.size!=i.size&&!(1&n))return!1;var g=l.get(t);if(g)return g==i;n|=2,l.set(t,i);var m=En(a(t),a(i),n,r,o,l);return l.delete(t),m;case"[object Symbol]":if(Ue)return Ue.call(t)==Ue.call(i)}return!1}(t,i,d,e,n,r,o);if(!(1&e)){var A=m&&kn.call(t,"__wrapped__"),S=h&&kn.call(i,"__wrapped__");if(A||S){var _=A?t.value():t,E=S?i.value():i;return o||(o=new te),r(_,E,e,n,o)}}return!!x&&(o||(o=new te),function(t,i,e,n,r,o){var l=1&e,a=Ee(t),d=a.length;if(d!=Ee(i).length&&!l)return!1;for(var h=d;h--;){var x=a[h];if(!(l?x in i:Sg.call(i,x)))return!1}var A=o.get(t),S=o.get(i);if(A&&S)return A==i&&S==t;var _=!0;o.set(t,i),o.set(i,t);for(var E=l;++h<d;){var w=t[x=a[h]],V=i[x];if(n)var me=l?n(V,w,x,i,t,o):n(w,V,x,t,i,o);if(!(void 0===me?w===V||r(w,V,e,n,o):me)){_=!1;break}E||(E="constructor"==x)}if(_&&!E){var pe=t.constructor,ye=i.constructor;pe!=ye&&"constructor"in t&&"constructor"in i&&!("function"==typeof pe&&pe instanceof pe&&"function"==typeof ye&&ye instanceof ye)&&(_=!1)}return o.delete(t),o.delete(i),_}(t,i,e,n,r,o))},Lg=function Pn(t,i,e,n,r){return t===i||(null==t||null==i||!(0,Nt.Z)(t)&&!(0,Nt.Z)(i)?t!=t&&i!=i:Eg(t,i,e,n,Pn,r))},Ig=function(t,i){return Lg(t,i)};function kg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}const he=(t,i)=>t?he(i%t,t):i,Pg=(t,i)=>t*i/he(t,i);let Yg=(()=>{class t extends de{constructor(e,n,r,o){super(e,n,r),this.network5And6Graph=o,this.correctCount={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0,red:0,green:0,blue:0},this.index=-1,this.maxShuffles=2500,this.name="Operant Choice",this.numAllottedTimeouts=1,this.numTimeouts=0,this.stimuliComparisonCopies=2}get isComplete(){return this.sequentialCorrect>=2*this.trials.length||this.meetsMasterCriterion1&&this.meetsMasterCriterion2}get masterCriterion(){if(!this.studyConfig)throw Error("Study configuration is undefined");return{sequentialCorrectTarget:this.studyConfig.iCannotKnow?56:35,sequentialCorrectTargetAchieved:!1,comparisonTarget:24,iCannotKnowTarget:this.studyConfig.iCannotKnow?18:0,sameTarget:6}}get meetsMasterCriterion1(){const{sequentialCorrectTarget:e,sequentialCorrectTargetAchieved:n,comparisonTarget:r,iCannotKnowTarget:o,sameTarget:l}=this.masterCriterion,{greaterThan:a,iCannotKnow:d,lessThan:g,same:m}=this.correctCount;return this.sequentialCorrect===e&&(this.masterCriterion.sequentialCorrectTargetAchieved=!0),n||m>=l&&a+g>=r&&d>=o}get meetsMasterCriterion2(){return!!this.correctShownTargets&&this.correctCount.same>=this.correctShownTargets.same&&this.correctCount.lessThan>=this.correctShownTargets.lessThan&&this.correctCount.greaterThan>=this.correctShownTargets.greaterThan&&this.correctCount.iCannotKnow>=this.correctShownTargets.iCannotKnow}complete(){this.timeout&&clearTimeout(this.timeout),super.complete()}createTrials(){var e,n;const{studyConfig:r}=this;if(!r)throw Error("Study configuration is undefined");this.network5And6Graph.includeRelationsBetweenNetworks=r.iCannotKnow;const o=[this.network5And6Graph.trained,this.network5And6Graph.mutuallyEntailed].flat().concat(r.iCannotKnow?this.network5And6Graph.combinatoriallyEntailed:[]),l=f.Tz.reduce((A,S)=>Object.assign(Object.assign({},A),{[S]:o.filter(_=>_.relation===S)}),{}),a=f.Tz.reduce((A,S)=>Object.assign(Object.assign({},A),{[S]:o.filter(_=>_.relation===S).length}),{}),d=Object.values(a).filter(A=>A>0).reduce(Pg),g=f.Tz.reduce((A,S)=>Object.assign(Object.assign({},A),{[S]:d/o.filter(_=>_.relation===S).length}),{}),m=Object.values(r.balance).filter(A=>A).reduce(he);this.configBalanceDividedByGcd={different:0,same:r.balance.same/m,greaterThan:r.balance.greaterThan/m,lessThan:r.balance.lessThan/m,iCannotKnow:(null===(e=r.balance)||void 0===e?void 0:e.iCannotKnow)?r.balance.iCannotKnow/m:0};const h={different:0,same:r.balance.same*g.same,greaterThan:r.balance.greaterThan*g.greaterThan,lessThan:r.balance.lessThan*g.lessThan,iCannotKnow:(null===(n=r.balance)||void 0===n?void 0:n.iCannotKnow)?r.balance.iCannotKnow*g.iCannotKnow:0},x=Object.values(h).filter(A=>A).reduce(he);for(const A of f.Tz){if(0===a[A])continue;const S=h[A]/x*this.stimuliComparisonCopies;for(let _=0;_<S;_++)this.trials=this.trials.concat(l[A].flat().map(E=>Object.assign(Object.assign({},E),{cueComponentConfigs:ce(r)})))}return this.shuffleUntilNoTriplicatesInARow(),this.trials}feedbackEnabled(){return!0}grade(e){var n,r,o,l,a,d,g,m,h,x;if(!this.trial)throw Error("Trial is undefined");const A=(null===(n=null==e?void 0:e.cue)||void 0===n?void 0:n.value)===this.trial.relation;if((null===(r=null==e?void 0:e.cue)||void 0===r?void 0:r.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++,this.correctCount[e.cue.value]++):(this.sequentialCorrect=0,this.incorrect++),this.meetsMasterCriterion1&&!this.correctShownTargets)for(this.correctShownTargets={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0};this.correctShownTargets.same<this.correctCount.same||this.correctShownTargets.greaterThan<this.correctCount.greaterThan||this.correctShownTargets.lessThan<this.correctCount.lessThan||this.correctShownTargets.iCannotKnow<this.correctCount.iCannotKnow;){if(!this.configBalanceDividedByGcd)throw Error("Config balance has not been created");this.correctShownTargets={different:0,same:(null===(o=this.correctShownTargets)||void 0===o?void 0:o.same)+(null===(l=this.configBalanceDividedByGcd)||void 0===l?void 0:l.same),greaterThan:(null===(a=this.correctShownTargets)||void 0===a?void 0:a.greaterThan)+(null===(d=this.configBalanceDividedByGcd)||void 0===d?void 0:d.greaterThan),lessThan:(null===(g=this.correctShownTargets)||void 0===g?void 0:g.lessThan)+(null===(m=this.configBalanceDividedByGcd)||void 0===m?void 0:m.lessThan),iCannotKnow:(null===(h=this.correctShownTargets)||void 0===h?void 0:h.iCannotKnow)+(null===(x=this.configBalanceDividedByGcd)||void 0===x?void 0:x.iCannotKnow)}}return this.correctShownTargets&&A&&(null==e?void 0:e.cue)&&!["red","green","blue"].includes(e.cue.value)?this.correctCount[e.cue.value]<=this.correctShownTargets[e.cue.value]?"CORRECT":void 0:A?"CORRECT":"WRONG"}nextTrial(){this.isComplete?this.complete():(this.index==this.trials.length-1&&(this.setVisibility(!0,0),this.index=-1),super.nextTrial())}ngOnInit(){this.createTrials(),this.start()}reset(){this.correctCount={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0,red:0,green:0,blue:0},this.index=-1,this.correct=0,this.incorrect=0}retry(){this.incrementAttempt(),this.setVisibility(!1,N),this.prompt(this.retryInstructions,!1,H+(this.feedBackShown?tt:N)).subscribe(()=>{this.feedBackShown=!1,this.setVisibility(!0,0),this.nextTrial(),this.setTimeout()}),this.reset()}setTimeout(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.timeout&&clearTimeout(this.timeout),this.failSafeDuration=2*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3),this.timeout=setTimeout(()=>{var e;null===(e=this.trialComponent)||void 0===e||e.clearTimer(),this.numTimeouts++,this.numTimeouts>this.numAllottedTimeouts?this.failed():this.retry()},this.failSafeDuration)}shuffleUntilNoTriplicatesInARow(){let e,n=0;for(let r=0;r<this.maxShuffles;r++){this.trials=(0,Z.Z)(this.trials);for(const o of this.trials)if(Ig(o.stimuli,null==e?void 0:e.stimuli)?n++:(e=o,n=0),3===n)break;if(n)break}n>=3&&(this.containsSequentialTriplicates=!0)}start(){this.prompt(this.startInstructions,!1,H).subscribe(()=>{this.setTimeout(),this.setVisibility(!0,0),this.nextTrial()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(U),s.Y36(gt),s.Y36(W),s.Y36(mn))},t.\u0275cmp=s.Xpm({type:t,selectors:[["operant-choice-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,kg,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[y.O5,q],styles:[""],data:{animation:[]}}),t})();function jg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let Ng=(()=>{class t extends de{constructor(e,n,r,o){super(e,n,r),this.network3And4Graph=o,this.name="Pre Test",this.numDuplicates=4}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study configuration is undefined");for(let n=0;n<this.numDuplicates;n++)this.trials=this.trials.concat([this.network3And4Graph.mutuallyEntailed,this.network3And4Graph.combinatoriallyEntailed].flat().map(r=>Object.assign(Object.assign({},r),{cueComponentConfigs:ce(e)})));return(0,Z.Z)(this.trials)}ngOnInit(){this.start()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(U),s.Y36(gt),s.Y36(W),s.Y36(He))},t.\u0275cmp=s.Xpm({type:t,selectors:[["pre-test-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,jg,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[y.O5,q],styles:[""],data:{animation:[]}}),t})();function Vg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let Hg=(()=>{class t extends de{constructor(e,n,r,o){super(e,n,r),this.network3And4Graph=o,this.name="Training Networks",this.numAllottedTimeouts=1,this.numIdkProbeTrials=5,this.numProbeDuplicates=4,this.numProbeTrials=32,this.numTimeouts=0,this.numTrainingDuplicates=2,this.numTrainingTrials=20,this.probeFailuresAllotted=2,this.probesFailed=0,this.sequentialCorrectTarget=23}complete(){this.timeout&&clearTimeout(this.timeout),super.complete()}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study configuration is undefined");let n=[];for(let o=0;o<this.numTrainingDuplicates;o++)n=n.concat([this.network3And4Graph.identities,this.network3And4Graph.trained].flat().map(l=>Object.assign(Object.assign({},l),{cueComponentConfigs:ce(e)})));if(n.length!==this.numTrainingTrials)throw Error(`Training trials length "${n.length}" doesn't equal specified length "${this.numTrainingTrials}"`);let r=[];for(let o=0;o<this.numProbeDuplicates;o++)r=r.concat([this.network3And4Graph.mutuallyEntailed,this.network3And4Graph.combinatoriallyEntailed].flat().map(l=>Object.assign(Object.assign({},l),{cueComponentConfigs:ce(e)})));if(r.length!==this.numProbeTrials)throw Error(`Probe trials length "${r.length}" doesn't equal specified length "${this.numIdkProbeTrials}"`);return(0,Z.Z)(n).concat((0,Z.Z)(r))}feedbackEnabled(){return this.index<this.numTrainingTrials}nextTrial(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.sequentialCorrect===this.sequentialCorrectTarget&&(this.index=this.numTrainingTrials-1),this.trialNum===this.numTrainingTrials&&100!==this.percentCorrect&&this.sequentialCorrect!==this.sequentialCorrectTarget?(this.incrementTrainingAttempts(),this.reset(),super.nextTrial()):this.trialNum===this.numProbeTrials+this.numTrainingTrials&&this.percentCorrect<(this.studyConfig.iCannotKnow?90:67.5)?(this.probesFailed++,this.incrementProbeAttempts(),this.probesFailed===this.probeFailuresAllotted?this.failed():this.retry()):(this.trialNum===this.numTrainingTrials&&(this.timeout&&clearTimeout(this.timeout),this.correct=0,this.incorrect=0),super.nextTrial())}ngOnInit(){this.start()}reset(){this.index=-1,this.correct=0,this.incorrect=0,this.trials=this.createTrials()}retry(){this.incrementAttempt(),this.setVisibility(!1,N),this.prompt(this.retryInstructions,!1,H+(this.feedBackShown?tt:N)).subscribe(()=>{this.feedBackShown=!1,this.setVisibility(!0,0),this.nextTrial(),this.setTimeout()}),this.reset()}setTimeout(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.timeout&&clearTimeout(this.timeout),this.failSafeDuration=50*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3),this.timeout=setTimeout(()=>{var e;null===(e=this.trialComponent)||void 0===e||e.clearTimer(),this.numTimeouts++,this.numTimeouts>this.numAllottedTimeouts?this.failed():this.retry()},50*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3))}start(){0===this.trials.length&&this.reset(),this.prompt(this.startInstructions,!1,H).subscribe(()=>{this.setTimeout(),this.setVisibility(!0,0),this.nextTrial()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(U),s.Y36(gt),s.Y36(W),s.Y36(He))},t.\u0275cmp=s.Xpm({type:t,selectors:[["training-networks-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,Vg,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[y.O5,q],styles:[""],data:{animation:[]}}),t})();const qg=["container"];function $g(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"mat-card",2),s.TgZ(1,"mat-card-title"),s._uU(2,"Welcome"),s.qZA(),s.TgZ(3,"mat-card-content",3),s._uU(4),s.qZA(),s.TgZ(5,"mat-card-actions"),s.TgZ(6,"button",4),s.NdJ("tap",function(){return s.CHM(e),s.oxw().nextBlock()}),s._uU(7,"CONTINUE"),s.qZA(),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.xp6(4),s.hij(" ",e.instructions," ")}}let ft=class{constructor(i,e,n,r,o){this.document=i,this.componentFactoryResolver=e,this.dialog=n,this.reportSvc=r,this.studyConfigSvc=o,this.blocks=[Ng,$c,Yg,Hg],this.instructions=Tn,this.reportSent=!1,this.showInstructions=!0}createBlockComponent(i){if(!this.container)throw Error("Container is undefined");if(!this.studyConfig)throw Error("Study configuration is undefined");const e=this.componentFactoryResolver.resolveComponentFactory(i);this.container.clear();const r=this.container.createComponent(e).instance;r.studyConfig=this.studyConfig,r.completed.pipe((0,Tt.P)(),(0,K.b)(()=>this.nextBlock()),(0,Dt.t)(this)).subscribe()}nextBlock(){this.showInstructions=!1;const i=this.blocks.shift();i?this.createBlockComponent(i):this.showStudyCompleteDialog()}ngOnInit(){this.studyConfigSvc.studyConfig.pipe((0,K.b)(i=>this.studyConfig=i)).subscribe(),(0,Ju.R)(document,"visibilitychange").pipe((0,$.h)(()=>document.hidden&&!this.reportSent),(0,Tt.P)(),(0,K.b)(()=>{var i;return null===(i=this.container)||void 0===i?void 0:i.clear()}),(0,Vt.w)(()=>this.reportSvc.sendReport("abandoned")),(0,Vt.w)(()=>{var i;return this.dialog.open($e,ae({text:`STUDY ABANDONED!\n\n PARTICIPANT ID:\n ${null===(i=this.studyConfig)||void 0===i?void 0:i.participantId}`,disableClose:!0})).afterClosed()})).subscribe()}showStudyCompleteDialog(){(0,St.H)(H).pipe((0,Tt.P)(),(0,Vt.w)(()=>this.reportSvc.sendReport("completed")),(0,K.b)(()=>this.reportSent=!0),(0,Vt.w)(()=>{var i;return this.dialog.open($e,ae({text:`THANKS FOR PARTICIPATING!\n\n PARTICIPANT ID:\n ${null===(i=this.studyConfig)||void 0===i?void 0:i.participantId}`,disableClose:!0})).afterClosed()})).subscribe()}};ft.\u0275fac=function(i){return new(i||ft)(s.Y36(y.K0),s.Y36(s._Vd),s.Y36(U),s.Y36(gt),s.Y36(Qe.R))},ft.\u0275cmp=s.Xpm({type:ft,selectors:[["study"]],viewQuery:function(i,e){if(1&i&&s.Gf(qg,7,s.s_b),2&i){let n;s.iGM(n=s.CRH())&&(e.container=n.first)}},features:[s._Bn([])],decls:3,vars:1,consts:[["style","max-width: 400px",4,"ngIf"],["container",""],[2,"max-width","400px"],[2,"white-space","pre-line"],["color","primary","onclick","blur()","mat-button","",3,"tap"]],template:function(i,e){1&i&&(s.YNc(0,$g,8,1,"mat-card",0),s.GkF(1,null,1)),2&i&&s.Q6J("ngIf",e.showInstructions)},directives:[y.O5,J.a8,J.n5,J.dn,J.hq,zt.lW],styles:["[_nghost-%COMP%]{-webkit-box-align:center;-webkit-box-pack:center;align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}.mat-card[_ngcontent-%COMP%]{max-height:100%}.mat-card-content[_ngcontent-%COMP%]{height:calc(100% - 80px);overflow:auto}"]}),ft=(0,Q.gn)([(0,Dt.c)(),(0,Q.w6)("design:paramtypes",[Document,s._Vd,U,gt,Qe.R])],ft);const zg=[{path:"",component:ft}];let Qg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[pn.Bz.forChild(zg)],pn.Bz]}),t})();const $t=new s.OlP("Stimulus case");let Zg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[hn,He,mn,{provide:$t,useValue:Wu()}],imports:[[ml,y.ez,pl,zt.ot,J.QW,yl,xl,Qg,vl]]}),t})()},2151:function(xe){(function(){"use strict";var st=function(u,p){return u.replace(/(^|-)/g,"$1\\u"+(p=p||"")).replace(/,/g,"\\u"+p)},c=st("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),y="a-z"+st("DF-F6,F8-FF","00"),s="A-Z"+st("C0-D6,D8-DE","00"),J=function(u,p,D,R){return u=u||c,p=p||y,D=D||s,R=R||"A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",{capitalize:new RegExp("(^|["+u+"])(["+p+"])","g"),pascal:new RegExp("(^|["+u+"])+(["+p+D+"])","g"),fill:new RegExp("["+u+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+p+"])","g"),improper:new RegExp("\\b("+R+")\\b","g"),relax:new RegExp("([^"+D+"])(["+D+"]*)(["+D+"])(?=[^"+D+"]|$)","g"),upper:new RegExp("^[^"+p+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+u+"]")}},L=J(),C={re:L,unicodes:st,regexps:J,types:[],up:String.prototype.toUpperCase,low:String.prototype.toLowerCase,cap:function(u){return C.up.call(u.charAt(0))+u.slice(1)},decap:function(u){return C.low.call(u.charAt(0))+u.slice(1)},deapostrophe:function(u){return u.replace(L.apostrophe,"")},fill:function(u,p,D){return null!=p&&(u=u.replace(L.fill,function(R,I){return I?p+I:""})),D&&(u=C.deapostrophe(u)),u},prep:function(u,p,D,R){if(u=null==u?"":u+"",!R&&L.upper.test(u)&&(u=C.low.call(u)),!p&&!L.hole.test(u)){var I=C.fill(u," ");L.hole.test(I)&&(u=I)}return!D&&!L.room.test(u)&&(u=u.replace(L.relax,C.relax)),u},relax:function(u,p,D,R){return p+" "+(D?D+" ":"")+R}},P={_:C,of:function(u){for(var p=0,D=C.types.length;p<D;p++)if(P[C.types[p]].apply(P,arguments)===u)return C.types[p]},flip:function(u){return u.replace(/\w/g,function(p){return(p==C.up.call(p)?C.low:C.up).call(p)})},random:function(u){return u.replace(/\w/g,function(p){return(Math.round(Math.random())?C.up:C.low).call(p)})},type:function(u,p){P[u]=p,C.types.push(u)}},rt={lower:function(u,p,D){return C.fill(C.low.call(C.prep(u,p)),p,D)},snake:function(u){return P.lower(u,"_",!0)},constant:function(u){return P.upper(u,"_",!0)},camel:function(u){return C.decap(P.pascal(u))},kebab:function(u){return P.lower(u,"-",!0)},upper:function(u,p,D){return C.fill(C.up.call(C.prep(u,p,!1,!0)),p,D)},capital:function(u,p,D){return C.fill(C.prep(u).replace(L.capitalize,function(R,I,et){return I+C.up.call(et)}),p,D)},header:function(u){return P.capital(u,"-",!0)},pascal:function(u){return C.fill(C.prep(u,!1,!0).replace(L.pascal,function(p,D,R){return C.up.call(R)}),"",!0)},title:function(u){return P.capital(u).replace(L.improper,function(p,D,R,I){return R>0&&R<I.lastIndexOf(" ")?C.low.call(p):p})},sentence:function(u,p,D){return u=P.lower(u).replace(L.sentence,function(R,I,et){return I+C.up.call(et)}),p&&p.forEach(function(R){u=u.replace(new RegExp("\\b"+P.lower(R)+"\\b","g"),C.cap)}),D&&D.forEach(function(R){u=u.replace(new RegExp("(\\b"+P.lower(R)+"\\. +)(\\w)"),function(I,et,Mt){return et+C.low.call(Mt)})}),u}};for(var $ in rt.squish=rt.pascal,P.default=P,rt)P.type($,rt[$]);var K="function"==typeof K?K:function(){};K(xe.exports?xe.exports=P:this.Case=P)}).call(this)}}]);