"use strict";(self.webpackChunkknown_unknowns_multiple_exemplar_experiment=self.webpackChunkknown_unknowns_multiple_exemplar_experiment||[]).push([[684],{1684:(Mu,qt,d)=>{d.r(qt),d.d(qt,{StudyModule:()=>bu});var g=d(2057),s=d(793),G=d(9765),E=(d(6215),d(7574),d(6682),d(5435)),Xt=d(3342);const Ii={provide:s.tb,useFactory:function(t,n){return()=>{if((0,g.NF)(n)){const e=Array.from(t.querySelectorAll(`[class*=${te}]`)),i=/\bflex-layout-.+?\b/g;e.forEach(l=>{l.classList.contains(`${te}ssr`)&&l.parentNode?l.parentNode.removeChild(l):l.className.replace(i,"")})}}},deps:[g.K0,s.Lbi],multi:!0},te="flex-layout-";let wt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[Ii]}),t})();const Dt={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},b=new s.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Dt}),I=new s.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),_t=new s.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});d(9490),d(6782),d(1211);let we=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[wt]]}),t})();var it=d(6794);let be=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[wt,it.vT]]}),t})(),Ee=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[wt]]}),t})(),Be=(()=>{class t{constructor(e,i){(0,g.PM)(i)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,i=[]){return{ngModule:t,providers:e.serverLoaded?[{provide:b,useValue:Object.assign(Object.assign({},Dt),e)},{provide:_t,useValue:i,multi:!0},{provide:I,useValue:!0}]:[{provide:b,useValue:Object.assign(Object.assign({},Dt),e)},{provide:_t,useValue:i,multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(I),s.LFG(s.Lbi))},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[be,we,Ee],be,we,Ee]}),t})();var k=d(933),P=d(2414),j=d(7935),Zl=d(1439),ql=d(5917),Mt=d(5257),Jl=d(9761),Rt=d(9642),h=d(6083),Ie=d(3328),ke=d(2371);function Xl(t,n){}class Gt{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const tr={dialogContainer:(0,h.X$)("dialogContainer",[(0,h.SB)("void, exit",(0,h.oB)({opacity:0,transform:"scale(0.7)"})),(0,h.SB)("enter",(0,h.oB)({transform:"none"})),(0,h.eR)("* => enter",(0,h.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,h.oB)({transform:"none",opacity:1}))),(0,h.eR)("* => void, * => exit",(0,h.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,h.oB)({opacity:0})))])};let er=(()=>{class t extends P.en{constructor(e,i,l,r,o,a){super(),this._elementRef=e,this._focusTrapFactory=i,this._changeDetectorRef=l,this._config=o,this._focusMonitor=a,this._animationStateChanged=new s.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=c=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(c)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=r}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const i=(0,Rt.ht)(),l=this._elementRef.nativeElement;(!i||i===this._document.body||i===l||l.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,Rt.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=(0,Rt.ht)();return e===i||e.contains(i)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(ke.qV),s.Y36(s.sBO),s.Y36(g.K0,8),s.Y36(Gt),s.Y36(ke.tE))},t.\u0275dir=s.lG2({type:t,viewQuery:function(e,i){if(1&e&&s.Gf(P.Pl,7),2&e){let l;s.iGM(l=s.CRH())&&(i._portalOutlet=l.first)}},features:[s.qOj]}),t})(),ir=(()=>{class t extends er{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=s.n5z(t)))(i||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,i){1&e&&s.WFA("@dialogContainer.start",function(r){return i._onAnimationStart(r)})("@dialogContainer.done",function(r){return i._onAnimationDone(r)}),2&e&&(s.Ikx("id",i._id),s.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),s.d8E("@dialogContainer",i._state))},features:[s.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&s.YNc(0,Xl,0,0,"ng-template",0)},directives:[P.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[tr.dialogContainer]}}),t})(),nr=0;class st{constructor(n,e,i="mat-dialog-"+nr++){this._overlayRef=n,this._containerInstance=e,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new G.xQ,this._afterClosed=new G.xQ,this._beforeClosed=new G.xQ,this._state=0,e._id=i,e._animationStateChanged.pipe((0,E.h)(l=>"opened"===l.state),(0,Mt.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe((0,E.h)(l=>"closed"===l.state),(0,Mt.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),n.keydownEvents().pipe((0,E.h)(l=>l.keyCode===Ie.hY&&!this.disableClose&&!(0,Ie.Vb)(l))).subscribe(l=>{l.preventDefault(),Lt(this,"keyboard")}),n.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Lt(this,"mouse")})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe((0,E.h)(e=>"closing"===e.state),(0,Mt.q)(1)).subscribe(e=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(n){let e=this._getPositionStrategy();return n&&(n.left||n.right)?n.left?e.left(n.left):e.right(n.right):e.centerHorizontally(),n&&(n.top||n.bottom)?n.top?e.top(n.top):e.bottom(n.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(n="",e=""){return this._overlayRef.updateSize({width:n,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(n){return this._overlayRef.addPanelClass(n),this}removePanelClass(n){return this._overlayRef.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Lt(t,n,e){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=n),t.close(e)}const Ot=new s.OlP("MatDialogData"),sr=new s.OlP("mat-dialog-default-options"),Pe=new s.OlP("mat-dialog-scroll-strategy"),rr={provide:Pe,deps:[k.aV],useFactory:function(t){return()=>t.scrollStrategies.block()}};let or=(()=>{class t{constructor(e,i,l,r,o,a,c,D,S){this._overlay=e,this._injector=i,this._defaultOptions=l,this._parentDialog=r,this._overlayContainer=o,this._dialogRefConstructor=c,this._dialogContainerType=D,this._dialogDataToken=S,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new G.xQ,this._afterOpenedAtThisLevel=new G.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Zl.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Jl.O)(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){(i=function(t,n){return Object.assign(Object.assign({},n),t)}(i,this._defaultOptions||new Gt)).id&&this.getDialogById(i.id);const l=this._createOverlay(i),r=this._attachDialogContainer(l,i),o=this._attachDialogContent(e,r,l,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),r._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const i=this._getOverlayConfig(e);return this._overlay.create(i)}_getOverlayConfig(e){const i=new k.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachDialogContainer(e,i){const r=s.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:Gt,useValue:i}]}),o=new P.C5(this._dialogContainerType,i.viewContainerRef,r,i.componentFactoryResolver);return e.attach(o).instance}_attachDialogContent(e,i,l,r){const o=new this._dialogRefConstructor(l,i,r.id);if(e instanceof s.Rgc)i.attachTemplatePortal(new P.UE(e,null,{$implicit:r.data,dialogRef:o}));else{const a=this._createInjector(r,o,i),c=i.attachComponentPortal(new P.C5(e,r.viewContainerRef,a));o.componentInstance=c.instance}return o.updateSize(r.width,r.height).updatePosition(r.position),o}_createInjector(e,i,l){const r=e&&e.viewContainerRef&&e.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:i}];return e.direction&&(!r||!r.get(it.Is,null,s.XFs.Optional))&&o.push({provide:it.Is,useValue:{value:e.direction,change:(0,ql.of)()}}),s.zs3.create({parent:r||this._injector,providers:o})}_removeOpenDialog(e){const i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((l,r)=>{l?r.setAttribute("aria-hidden",l):r.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let l=i.length-1;l>-1;l--){let r=i[l];r!==e&&"SCRIPT"!==r.nodeName&&"STYLE"!==r.nodeName&&!r.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(k.aV),s.Y36(s.zs3),s.Y36(void 0),s.Y36(void 0),s.Y36(k.Xj),s.Y36(void 0),s.Y36(s.DyG),s.Y36(s.DyG),s.Y36(s.OlP))},t.\u0275dir=s.lG2({type:t}),t})(),ct=(()=>{class t extends or{constructor(e,i,l,r,o,a,c){super(e,i,r,a,c,o,st,ir,Ot)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(k.aV),s.LFG(s.zs3),s.LFG(g.Ye,8),s.LFG(sr,8),s.LFG(Pe),s.LFG(t,12),s.LFG(k.Xj))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),ur=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[ct,rr],imports:[[k.U8,P.eL,j.BQ],j.BQ]}),t})();var cr=d(7639);let gr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[g.ez,j.si]]}),t})(),fr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[g.ez,j.si]]}),t})(),hr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[g.ez,Be]]}),t})(),mr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[g.ez,cr.QW,gr,hr,fr]]}),t})(),xr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[g.ez,j.si]]}),t})();var Tt=d(8634),Ye=d(8049),pr=d(3190),yr=d(8002),vr=d(6839),Ve=d(4875),u=d(2745);const F=150,lt=2850,z=500,ze={stimuli:[z,2*z],cues:Array(5).fill(3*z)},Bt=Math.max(...Object.values(ze).flat())+1e3;class Cr extends class{constructor(n,e){this.attempts=0,this.correct=0,this.feedBackShown=!1,this.history=[],this.incorrect=0,this.index=-1,this.trials=[],this.name=n,this.config=e}get isLastTrial(){return this.index===this.trials.length-1}get percentCorrect(){return this.correct/this.trialNum*100}get trial(){return this.trials[this.index]}get trialNum(){return this.index+1}complete(){var n,e;this.attempts++,this.completed=new Date,null===(n=this.component)||void 0===n||n.prompt("BLOCK COMPLETE",!0,z+(this.feedBackShown?lt:F)).subscribe(),null===(e=this.component)||void 0===e||e.completed.emit()}cueSelected(n){var e,i,l;this.history.push(Object.assign(Object.assign({},this.trial),{selected:n})),this.isLastTrial&&(null===(e=this.component)||void 0===e||e.setVisibility(!1)),n?this.feedbackEnabled()?(null===(l=this.component)||void 0===l||l.showFeedback(this.grade(n)),this.feedBackShown=!0):this.feedBackShown=!1:(null===(i=this.component)||void 0===i||i.showFeedback("TIME EXPIRED"),this.feedBackShown=!0),this.nextTrial()}failed(){var n,e;null===(n=this.component)||void 0===n||n.setVisibility(!1),null===(e=this.component)||void 0===e||e.prompt("THANKS FOR PARTICIPATING",!0,z+(this.feedBackShown?lt:F)).subscribe()}feedbackEnabled(){return!1}grade(n){const e=(null==n?void 0:n.cue.value)===this.trial.cue;return(null==n?void 0:n.cue.value)===this.trial.cue?this.correct++:this.incorrect++,console.log("correct",this.correct),console.log("incorrect",this.incorrect),console.log("correctPercentage",this.percentCorrect),e?"CORRECT":"WRONG"}nextTrial(){var n,e;-1===this.index&&(this.started=new Date),this.index!==this.trials.length-1?(this.index++,null===(n=this.component)||void 0===n||n.showTrial(this.trial,this.feedBackShown?lt:0),null===(e=this.component)||void 0===e||e.trialCompleted.pipe((0,Ye.P)()).subscribe(i=>this.cueSelected(i))):this.complete()}reset(){this.index=22,this.correct=0,this.incorrect=0,this.trials=this.createTrials()}start(n){this.component=n,0===this.trials.length&&this.reset(),n.prompt("CLICK TO START",!1,z).subscribe(()=>this.nextTrial())}}{constructor(n,e,i){super("Operant Choice",i),this.stimuliComparisonCopies=2,this.equalityNetwork=n,this.greaterThanNetwork=e}createTrials(){var n;const i=(0,Ve.Z)(this.config.iCannotKnow?u.Tz:u.do).map(f=>({isArbitrary:this.config.cueType===u.j8.arbitrary,fileName:this.config.cueType===u.j8.nonArbitrary?u.Sg:u.FC[f],value:f})),l=[];for(const f of this.equalityNetwork.stimuli)for(const x of this.greaterThanNetwork.stimuli)l.push({cue:u.bR.iCannotKnow,stimuli:[f,x]},{cue:u.bR.iCannotKnow,stimuli:[x,f]});const r=[this.equalityNetwork,this.greaterThanNetwork].map(f=>[].concat(f.identities,f.trained,f.mutuallyEntailed,f.combinatoriallyEntailed,this.config.iCannotKnow?l:[])).flat(),o=u.Tz.reduce((f,x)=>Object.assign(Object.assign({},f),{[x]:r.filter(_=>_.cue===x)}),{}),a=u.Tz.reduce((f,x)=>Object.assign(Object.assign({},f),{[x]:r.filter(_=>_.cue===x).length}),{}),c=(f,x)=>f?c(x%f,f):x,S=Object.values(a).reduce((f,x)=>f*x/c(f,x));console.log("LEAST COMMON MULTIPLE",S);const C=u.Tz.reduce((f,x)=>Object.assign(Object.assign({},f),{[x]:S/r.filter(_=>_.cue===x).length}),{});console.log("CUE BY STIMULI",o),console.log("CUE COUNT BY STIMULI",a),console.log("CUE MULTIPLIER BY STIMULI",C);const M={DIFFERENT:0,SAME:this.config.balance.equalTo,"GREATER THAN":this.config.balance.greaterThan,"LESS THAN":this.config.balance.lessThan,"I CANNOT KNOW":(null===(n=this.config.balance)||void 0===n?void 0:n.iCannotKnow)||1},J=M.SAME===a.SAME&&M["LESS THAN"]===a["LESS THAN"]&&M["GREATER THAN"]===a["GREATER THAN"]&&(!this.config.iCannotKnow||M["I CANNOT KNOW"]===a["I CANNOT KNOW"]);for(const f of u.Tz){const x=new Array((J?C[f]:C[f]*M[f])*this.stimuliComparisonCopies).fill(void 0).map((_,m)=>m+1);for(const _ of x)this.trials=this.trials.concat(o[f].flat().map(m=>Object.assign(Object.assign({},m),{cueComponentConfigs:i})))}return console.log("un-shuffled trials",this.trials),(0,Ve.Z)(this.trials)}feedbackEnabled(){return!0}}var _r=d(6224);const gt=function(t,n){for(var e=t.length;e--;)if((0,_r.Z)(t[e][0],n))return e;return-1};var Fr=Array.prototype.splice;function $(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}$.prototype.clear=function(){this.__data__=[],this.size=0},$.prototype.delete=function(t){var n=this.__data__,e=gt(n,t);return!(e<0||(e==n.length-1?n.pop():Fr.call(n,e,1),--this.size,0))},$.prototype.get=function(t){var n=this.__data__,e=gt(n,t);return e<0?void 0:n[e][1]},$.prototype.has=function(t){return gt(this.__data__,t)>-1},$.prototype.set=function(t,n){var e=this.__data__,i=gt(e,t);return i<0?(++this.size,e.push([t,n])):e[i][1]=n,this};const ft=$;var Q=d(4423),Y=d(309);const rt=(0,Q.Z)(Y.Z,"Map"),ot=(0,Q.Z)(Object,"create");var Jr=Object.prototype.hasOwnProperty;var io=Object.prototype.hasOwnProperty;function U(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}U.prototype.clear=function(){this.__data__=ot?ot(null):{},this.size=0},U.prototype.delete=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},U.prototype.get=function(t){var n=this.__data__;if(ot){var e=n[t];return"__lodash_hash_undefined__"===e?void 0:e}return Jr.call(n,t)?n[t]:void 0},U.prototype.has=function(t){var n=this.__data__;return ot?void 0!==n[t]:io.call(n,t)},U.prototype.set=function(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ot&&void 0===n?"__lodash_hash_undefined__":n,this};const $e=U,ht=function(t,n){var e=t.__data__;return function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?e["string"==typeof n?"string":"hash"]:e.map};function W(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}W.prototype.clear=function(){this.size=0,this.__data__={hash:new $e,map:new(rt||ft),string:new $e}},W.prototype.delete=function(t){var n=ht(this,t).delete(t);return this.size-=n?1:0,n},W.prototype.get=function(t){return ht(this,t).get(t)},W.prototype.has=function(t){return ht(this,t).has(t)},W.prototype.set=function(t,n){var e=ht(this,t),i=e.size;return e.set(t,n),this.size+=e.size==i?0:1,this};const wo=W;function K(t){var n=this.__data__=new ft(t);this.size=n.size}K.prototype.clear=function(){this.__data__=new ft,this.size=0},K.prototype.delete=function(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e},K.prototype.get=function(t){return this.__data__.get(t)},K.prototype.has=function(t){return this.__data__.has(t)},K.prototype.set=function(t,n){var e=this.__data__;if(e instanceof ft){var i=e.__data__;if(!rt||i.length<199)return i.push([t,n]),this.size=++e.size,this;e=this.__data__=new wo(i)}return e.set(t,n),this.size=e.size,this};const bo=K;var Qe=d(5427),Ro=d(2753);const mt=function(t,n,e,i){var l=!e;e||(e={});for(var r=-1,o=n.length;++r<o;){var a=n[r],c=i?i(e[a],t[a],a,e,t):void 0;void 0===c&&(c=t[a]),l?(0,Ro.Z)(e,a,c):(0,Qe.Z)(e,a,c)}return e};var It=d(1163);var To=d(2615),kt=d(4214),Ue=d(1550);var ko=Object.prototype.hasOwnProperty;const jo=function(t){if(!(0,kt.Z)(t))return function(t){var n=[];if(null!=t)for(var e in Object(t))n.push(e);return n}(t);var n=(0,Ue.Z)(t),e=[];for(var i in t)"constructor"==i&&(n||!ko.call(t,i))||e.push(i);return e};var Yo=d(8402);const Pt=function(t){return(0,Yo.Z)(t)?(0,To.Z)(t,!0):jo(t)};var We="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ke=We&&"object"==typeof module&&module&&!module.nodeType&&module,Ze=Ke&&Ke.exports===We?Y.Z.Buffer:void 0,qe=Ze?Ze.allocUnsafe:void 0;var Uo=d(6889);const Je=function(){return[]};var Jo=Object.prototype.propertyIsEnumerable,Xe=Object.getOwnPropertySymbols;const jt=Xe?function(t){return null==t?[]:(t=Object(t),function(t,n){for(var e=-1,i=null==t?0:t.length,l=0,r=[];++e<i;){var o=t[e];n(o,e,t)&&(r[l++]=o)}return r}(Xe(t),function(n){return Jo.call(t,n)}))}:Je,ti=function(t,n){for(var e=-1,i=n.length,l=t.length;++e<i;)t[l+e]=n[e];return t},ei=(0,d(4184).Z)(Object.getPrototypeOf,Object),ii=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)ti(n,jt(t)),t=ei(t);return n}:Je;var Yt=d(4654);const ni=function(t,n,e){var i=n(t);return(0,Yt.Z)(t)?i:ti(i,e(t))},ca=function(t){return ni(t,It.Z,jt)},fa=function(t){return ni(t,Pt,ii)},Vt=(0,Q.Z)(Y.Z,"DataView"),Ht=(0,Q.Z)(Y.Z,"Promise"),Nt=(0,Q.Z)(Y.Z,"Set"),zt=(0,Q.Z)(Y.Z,"WeakMap");var si=d(4796),Z=d(2035),li="[object Map]",ri="[object Promise]",oi="[object Set]",ai="[object WeakMap]",di="[object DataView]",va=(0,Z.Z)(Vt),Aa=(0,Z.Z)(rt),Ca=(0,Z.Z)(Ht),wa=(0,Z.Z)(Nt),Da=(0,Z.Z)(zt),V=si.Z;(Vt&&V(new Vt(new ArrayBuffer(1)))!=di||rt&&V(new rt)!=li||Ht&&V(Ht.resolve())!=ri||Nt&&V(new Nt)!=oi||zt&&V(new zt)!=ai)&&(V=function(t){var n=(0,si.Z)(t),e="[object Object]"==n?t.constructor:void 0,i=e?(0,Z.Z)(e):"";if(i)switch(i){case va:return di;case Aa:return li;case Ca:return ri;case wa:return oi;case Da:return ai}return n});const $t=V;var Sa=Object.prototype.hasOwnProperty;const ui=Y.Z.Uint8Array,Qt=function(t){var n=new t.constructor(t.byteLength);return new ui(n).set(new ui(t)),n};var Oa=/\w*$/;var ci=d(5770),gi=ci.Z?ci.Z.prototype:void 0,fi=gi?gi.valueOf:void 0;const ld=function(t,n,e){var i=t.constructor;switch(n){case"[object ArrayBuffer]":return Qt(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return function(t,n){var e=n?Qt(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,n){var e=n?Qt(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return function(t){var n=new t.constructor(t.source,Oa.exec(t));return n.lastIndex=t.lastIndex,n}(t);case"[object Set]":return new i;case"[object Symbol]":return function(t){return fi?Object(fi.call(t)):{}}(t)}};var hi=Object.create;const od=function(){function t(){}return function(n){if(!(0,kt.Z)(n))return{};if(hi)return hi(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();var ud=d(4909),mi=d(6539);var xi=d(1162),xt=d(8514),pi=xt.Z&&xt.Z.isMap;const md=pi?(0,xi.Z)(pi):function(t){return(0,mi.Z)(t)&&"[object Map]"==$t(t)};var yi=xt.Z&&xt.Z.isSet;const Ad=yi?(0,xi.Z)(yi):function(t){return(0,mi.Z)(t)&&"[object Set]"==$t(t)};var vi="[object Arguments]",Ai="[object Function]",Ci="[object Object]",p={};p[vi]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object DataView]"]=p["[object Boolean]"]=p["[object Date]"]=p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Map]"]=p["[object Number]"]=p[Ci]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object Symbol]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p["[object Error]"]=p[Ai]=p["[object WeakMap]"]=!1;const Ud=function pt(t,n,e,i,l,r){var o,a=1&n,c=2&n,D=4&n;if(e&&(o=l?e(t,i,l,r):e(t)),void 0!==o)return o;if(!(0,kt.Z)(t))return t;var S=(0,Yt.Z)(t);if(S){if(o=function(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&Sa.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!a)return(0,Uo.Z)(t,o)}else{var C=$t(t),M=C==Ai||"[object GeneratorFunction]"==C;if((0,ud.Z)(t))return function(t,n){if(n)return t.slice();var e=t.length,i=qe?qe(e):new t.constructor(e);return t.copy(i),i}(t,a);if(C==Ci||C==vi||M&&!l){if(o=c||M?{}:function(t){return"function"!=typeof t.constructor||(0,Ue.Z)(t)?{}:od(ei(t))}(t),!a)return c?function(t,n){return mt(t,ii(t),n)}(t,function(t,n){return t&&mt(n,Pt(n),t)}(o,t)):function(t,n){return mt(t,jt(t),n)}(t,function(t,n){return t&&mt(n,(0,It.Z)(n),t)}(o,t))}else{if(!p[C])return l?t:{};o=ld(t,C,a)}}r||(r=new bo);var J=r.get(t);if(J)return J;r.set(t,o),Ad(t)?t.forEach(function(_){o.add(pt(_,n,e,_,t,r))}):md(t)&&t.forEach(function(_,m){o.set(m,pt(_,n,e,m,t,r))});var x=S?void 0:(D?c?fa:ca:c?Pt:It.Z)(t);return function(t,n){for(var e=-1,i=null==t?0:t.length;++e<i&&!1!==n(t[e],e,t););}(x||t,function(_,m){x&&(_=t[m=_]),(0,Qe.Z)(o,m,pt(_,n,e,m,t,r))}),o},yt=function(t){return Ud(t,4)};var Zd=d(7012);const wi=function(t){var n=t.length;return n?t[(0,Zd.Z)(0,n-1)]:void 0};var Jd=d(4724);const tu=function(t){return wi((0,Jd.Z)(t))},Ut=function(t){return((0,Yt.Z)(t)?wi:tu)(t)},Wt=["RWK","PGZ","QGK","FNK","ZVB","PWU","PLJ","KNF","GVW","KXL","GRQ","WPQ","BQP","FXX","ZTF","SGG","GQF","VXO","DZF","ZHD","JHH","VQP","JXY","ZVS","HGD","FJX","VHK","JTP","JTS","UHJ","WTZ","CXF","XFH","LWK","NWK","ZRG","FDG","NQC","WPW","YVR","HLJ","WBX","VGH","KXW","XAQ","WQG","DGJ","QUZ","QZX","HWL","DKX","ZDW","RZJ","VGJ","VWL","MKP","JFJ","GQY","BRX","IHG","YVP","SXG","FJC","QKU","WZY","QHJ","YTZ","RHF","YYB","QFH","ZUX","TQT","VZZ","BTQ","DHQ","XLW","VLW","VZJ","GGK","SWK","UFH","GPN","JSX","IQP","QUP","XDG","QWN","CBK","JVH","VXG","YBF","BVY","QZW","UPZ","WMX","XVN","RRX","QTX","DZN","WXP"],Di={lower:"lower",upper:"upper"},iu=Object.values(Di);class _i{constructor(n,e,i){this.num=n,this.case=e,this.stimuli=function(t,n){const e=[];for(;e.length<3;){const i=Ut(Wt);if(void 0===i)throw Error('Random value returned "undefined"!');const l=Wt.indexOf(i);l>-1&&Wt.splice(l,1),e.includes(i)||e.push(n===Di.lower?i.toLowerCase():i.toUpperCase())}return e}(0,e),this.selectedAtoBAToCOperators=Ut(i)}get identities(){return this.stimuli.map(n=>({cue:u.bR.same,stimuli:[n,n]}))}get trained(){const[n,e,i]=this.stimuli;return[{cue:this.selectedAtoBAToCOperators[0],stimuli:[n,e]},{cue:this.selectedAtoBAToCOperators[1],stimuli:[n,i]}]}comparisonToString(n){return n.map(({cue:e,stimuli:[i,l]})=>`${i} ${e} ${l}`).join(", ")}}class Si extends _i{constructor(n,e){super(n,e,[[u.bR.different,u.bR.different]])}get combinatoriallyEntailed(){const[n,e,i]=this.stimuli,l={cue:u.bR.different,stimuli:[e,i]};return[l,{cue:u.bR.different,stimuli:yt(l.stimuli).reverse()}]}get mutuallyEntailed(){return this.trained.map(({stimuli:n})=>({cue:u.bR.different,stimuli:yt(n).reverse()}))}toString(){return[`Network ${this.num}`,this.stimuli.map((n,e)=>`${String.fromCharCode(65+e)}${this.num} = ${this.stimuli[e]}`).join(", "),`Identities: ${this.comparisonToString(this.identities)}`,`Trained: ${this.comparisonToString(this.trained)}`,`MutuallyEntailed ${this.comparisonToString(this.mutuallyEntailed)}`,`CombinatoriallyEntailed ${this.comparisonToString(this.combinatoriallyEntailed)}`].join("\n")}}const su={[u.bR.same]:{[u.bR.same]:u.bR.same,[u.bR.greaterThan]:u.bR.greaterThan,[u.bR.lessThan]:u.bR.lessThan},[u.bR.lessThan]:{[u.bR.same]:u.bR.greaterThan,[u.bR.greaterThan]:u.bR.greaterThan,[u.bR.lessThan]:u.bR.iCannotKnow},[u.bR.greaterThan]:{[u.bR.same]:u.bR.lessThan,[u.bR.greaterThan]:u.bR.iCannotKnow,[u.bR.lessThan]:u.bR.lessThan}};function lu(t){const[n,e]=t;if("I CANNOT KNOW"===n||"DIFFERENT"===n||"I CANNOT KNOW"===e||"DIFFERENT"===e)throw Error(`Stimuli B and C were "${t.join(" and ")}", they cannot be "I CANNOT KNOW OR DIFFERENT"`);return su[n][e]}const bi={[u.bR.different]:u.bR.same,[u.bR.same]:u.bR.same,[u.bR.lessThan]:u.bR.greaterThan,[u.bR.greaterThan]:u.bR.lessThan,[u.bR.iCannotKnow]:u.bR.iCannotKnow};class Fi extends _i{constructor(n,e,i){super(n,e,i)}get combinatoriallyEntailed(){const[n,e,i]=this.stimuli;if("I CANNOT KNOW"===e||"DIFFERENT"===e||"I CANNOT KNOW"===i||"DIFFERENT"===i)throw Error(`Stimuli B and C were "${this.stimuli.join(" and ")}", they cannot be "I CANNOT KNOW OR DIFFERENT"`);const l={cue:lu(this.selectedAtoBAToCOperators),stimuli:[e,i]};return[l,{cue:bi[l.cue],stimuli:yt(l.stimuli).reverse()}]}get mutuallyEntailed(){return this.trained.map(({stimuli:n,cue:e})=>({cue:bi[e],stimuli:yt(n).reverse()}))}toString(){return[`Network ${this.num}`,this.stimuli.map((n,e)=>`${String.fromCharCode(65+e)}${this.num} = ${this.stimuli[e]}`).join(", "),`Identities: ${this.comparisonToString(this.identities)}`,`Trained: ${this.comparisonToString(this.trained)}`,`Mutually Entailed: ${this.comparisonToString(this.mutuallyEntailed)}`,`Combinatorially Entailed: ${this.comparisonToString(this.combinatoriallyEntailed)}`].join("\n")}}class ru extends Fi{constructor(n,e){super(n,e,[[u.bR.same,u.bR.same]])}}class ou extends Fi{constructor(n,e){super(n,e,[[u.bR.greaterThan,u.bR.greaterThan]])}}class du{constructor(n){this.blocks=[],this.stimulusCase=function(){const t=Ut(iu);if(void 0===t)throw Error('Random stimulus case returned "undefined"!');return t}(),this.config=n,new Si(3,this.stimulusCase),new Si(4,this.stimulusCase),this.blocks=[new Cr(new ru(5,this.stimulusCase),new ou(6,this.stimulusCase),n)]}}let vt=(()=>{class t{constructor(e){this.configSvc=e}get trialTimeoutSeconds(){if(!this.conditions)throw Error("conditions not defined");return this.conditions.config.trialTimeoutSeconds}blocks$(){return this.configSvc.config$().pipe((0,yr.U)(e=>(this.conditions=new du(e),this.conditions.blocks)))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(vr.R))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function At(t){return(0,h.X$)((null==t?void 0:t.anchor)||"fadeOut",[(0,h.SB)("false",(0,h.oB)({visibility:"visible",opacity:1})),(0,h.SB)(":leave",(0,h.oB)({visibility:"visible",opacity:1})),(0,h.SB)("true",(0,h.oB)({visibility:"hidden",opacity:0})),(0,h.eR)("void => *",(0,h.jt)(0)),(0,h.eR)("* => true",(0,h.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}const uu=function(t,n){return{value:t,params:n}};let cu=(()=>{class t{constructor(e,i){this.data=e,this.ref=i,this.animated=!1,setTimeout(()=>this.animated=!0,0),setTimeout(()=>this.ref.close(),this.data.durationMs)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ot),s.Y36(st))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-correct-dialog"]],decls:3,vars:5,consts:[[1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,i){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",s.WLB(2,uu,i.animated,i.data.animationParams)),s.xp6(2),s.Oqu(i.data.feedback))},styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{font-size:clamp(1rem,8vw,15rem);white-space:nowrap}"],data:{animation:[At()]}}),t})();var q=d(4762),Ct=d(9524),gu=d(409);function Mi(t){return(0,h.X$)((null==t?void 0:t.anchor)||"fadeIn",[(0,h.SB)("void",(0,h.oB)({visibility:"hidden",opacity:0})),(0,h.SB)("false",(0,h.oB)({visibility:"hidden",opacity:0})),(0,h.SB)("true",(0,h.oB)({visibility:"visible",opacity:1})),(0,h.eR)("* => true",(0,h.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}function Kt(t){return(0,Tt.H)(t).toPromise()}const fu=function(t){return{delay:t}},hu=function(t,n){return{value:t,params:n}},mu=function(t){return{"d-none":t}},xu=function(t){return{"pointer-events":t}};let Ri=(()=>{class t{constructor(){this.animationDelay=0,this.disabled=!1,this.selected=new s.vpe}select(){this.disabled=!0,this.selected.emit(this.config)}set(e){return(0,q.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield Kt(F),this.disabled=!1,this.config=e,this.animate="fade-in"})}tap(){this.disabled=!0,this.selected.emit(this.config)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-cue"]],inputs:{animationDelay:"animationDelay"},outputs:{selected:"selected"},decls:2,vars:17,consts:[["matRipple","",1,"trial-item","dynamic-text",3,"matRippleDisabled","ngClass","ngStyle","tap"]],template:function(e,i){1&e&&(s.TgZ(0,"button",0),s.NdJ("tap",function(){return!i.disabled&&i.select()}),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",null==i.config?null:i.config.fileName),s.Q6J("@fadeIn",s.WLB(10,hu,"fade-in"===i.animate,s.VKq(8,fu,i.animationDelay)))("@fadeOut","fade-out"===i.animate)("matRippleDisabled",i.disabled)("ngClass",s.VKq(13,mu,void 0===i.config))("ngStyle",s.VKq(15,xu,null!=i.config&&i.config.value?"all":"none")),s.xp6(1),s.hij(" ",null!=i.config&&i.config.isArbitrary?"\xa0":(null==i.config?null:i.config.value)||"","\n"))},directives:[j.wG,g.mk,g.PC],styles:["[_nghost-%COMP%]{display:block}button.trial-item[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;aspect-ratio:2;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[Mi(),At({duration:F})]}}),t})();const pu=function(t){return{delay:t}},yu=function(t,n){return{value:t,params:n}};let Gi=(()=>{class t{constructor(){this.animationDelay=0}set(e){return(0,q.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield Kt(F),this.backgroundImage=u.Sg,this.cue=e,this.animate="fade-in"})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-stimulus"]],inputs:{animationDelay:"animationDelay"},decls:2,vars:10,consts:[[1,"trial-item","dynamic-text"]],template:function(e,i){1&e&&(s.TgZ(0,"div",0),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",i.backgroundImage),s.Q6J("@fadeIn",s.WLB(7,yu,"fade-in"===i.animate,s.VKq(5,pu,i.animationDelay)))("@fadeOut","fade-out"===i.animate),s.xp6(1),s.hij(" ",i.cue,"\n"))},styles:["[_nghost-%COMP%]{display:block}button.trial-item[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;aspect-ratio:2;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[Mi(),At({duration:F})]}}),t})();function vu(t,n){1&t&&s._UZ(0,"trial-stimulus",4),2&t&&s.Q6J("animationDelay",n.$implicit)}function Au(t,n){if(1&t){const e=s.EpF();s.TgZ(0,"trial-cue",5),s.NdJ("selected",function(l){const o=s.CHM(e).index;return s.oxw().selected(l,o+1)}),s.qZA()}2&t&&s.Q6J("animationDelay",n.$implicit)}let T=class{constructor(n){this.conditionSvc=n,this.animationDelayMs=ze,this.complete=!1,this.completed=new s.vpe,this.secondsInTrial=0}ngAfterViewInit(){this.trialCueComponents.changes.pipe((0,Ct.t)(this)).subscribe(),this.trialStimulusComponents.changes.pipe((0,Ct.t)(this)).subscribe()}selected(n,e){var i;null===(i=this.timerSub)||void 0===i||i.unsubscribe(),this.completed.emit({cue:n,position:e})}setTimer(){this.timerSub&&this.timerSub.unsubscribe(),this.secondsInTrial=0,this.timerSub=(0,Tt.H)(Bt,1e3).pipe((0,gu.o)(()=>this.secondsInTrial<this.conditionSvc.trialTimeoutSeconds),(0,Xt.b)(()=>{this.secondsInTrial++,console.log(this.secondsInTrial),this.secondsInTrial==this.conditionSvc.trialTimeoutSeconds&&this.completed.emit()}),(0,Ct.t)(this)).subscribe()}show(n){var e,i;console.log(n),this.setTimer();for(const[l,r]of n.stimuli.entries())null===(e=this.trialStimulusComponents.get(l))||void 0===e||e.set(r);for(let l=0;l<this.trialCueComponents.length;l++)null===(i=this.trialCueComponents.get(l))||void 0===i||i.set(n.cueComponentConfigs[l])}};T.\u0275fac=function(n){return new(n||T)(s.Y36(vt))},T.\u0275cmp=s.Xpm({type:T,selectors:[["trial"]],viewQuery:function(n,e){if(1&n&&(s.Gf(Ri,5),s.Gf(Gi,5)),2&n){let i;s.iGM(i=s.CRH())&&(e.trialCueComponents=i),s.iGM(i=s.CRH())&&(e.trialStimulusComponents=i)}},outputs:{completed:"completed"},decls:4,vars:2,consts:[[1,"trial-sample-stimuli"],[3,"animationDelay",4,"ngFor","ngForOf"],[1,"trial-buttons"],[3,"animationDelay","selected",4,"ngFor","ngForOf"],[3,"animationDelay"],[3,"animationDelay","selected"]],template:function(n,e){1&n&&(s.TgZ(0,"div",0),s.YNc(1,vu,1,1,"trial-stimulus",1),s.qZA(),s.TgZ(2,"div",2),s.YNc(3,Au,1,1,"trial-cue",3),s.qZA()),2&n&&(s.xp6(1),s.Q6J("ngForOf",e.animationDelayMs.stimuli),s.xp6(2),s.Q6J("ngForOf",e.animationDelayMs.cues))},directives:[g.sg,Gi,Ri],styles:["[_nghost-%COMP%]{display:block}button.trial-item[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;aspect-ratio:2;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}"]}),T=(0,q.gn)([(0,Ct.c)(),(0,q.w6)("design:paramtypes",[vt])],T);let Cu=(()=>{class t{constructor(e,i){this.data=e,this.ref=i,this.animated=!1,this.disableClose=Boolean(this.data.disableClose)}close(){return(0,q.mG)(this,void 0,void 0,function*(){this.animated=!0,yield Kt(F),this.ref.close()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ot),s.Y36(st))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block-start-dialog"]],decls:3,vars:3,consts:[["matRipple","",1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white",3,"matRippleDisabled","tap"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,i){1&e&&(s.TgZ(0,"div",0),s.NdJ("tap",function(){return!1===i.disableClose&&i.close()}),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",i.animated)("matRippleDisabled",i.animated||i.disableClose),s.xp6(2),s.Oqu(i.data.text))},directives:[j.wG],styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{font-size:clamp(1rem,8vw,15rem);line-height:clamp(1rem,8vw,15rem);text-align:center}"],data:{animation:[At({duration:F})]}}),t})();function Li(t){return{data:t,disableClose:!0,hasBackdrop:!1,closeOnNavigation:!0,height:"100vh",maxHeight:"100vh",maxWidth:"100vw",panelClass:["fullscreen-dialog-container","animate__animated","animate__fadeIn"],width:"100vw"}}function wu(t,n){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(l){return s.CHM(e),s.oxw().trialCompleted.emit(l)}),s.qZA()}}let Zt=(()=>{class t{constructor(e,i){this.conditionSvc=e,this.dialog=i,this.completed=new s.vpe,this.conditions=this.conditionSvc.conditions,this.isVisible=!0,this.trialCompleted=new s.vpe}prompt(e,i=!1,l=Bt){return(0,Tt.H)(l).pipe((0,Ye.P)(),(0,pr.w)(()=>this.dialog.open(Cu,Li({text:e,disableClose:i})).afterClosed()))}setVisibility(e,i=Bt){setTimeout(()=>this.isVisible=e,i)}showFeedback(e,i=3e3,l={delay:lt,duration:F}){this.dialog.open(cu,Li({animationParams:l,durationMs:i,feedback:e}))}showTrial(e,i=lt){setTimeout(()=>{var l;return null===(l=this.trialComponent)||void 0===l?void 0:l.show(e)},i)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(vt),s.Y36(ct))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block"]],viewQuery:function(e,i){if(1&e&&s.Gf(T,5),2&e){let l;s.iGM(l=s.CRH())&&(i.trialComponent=l.first)}},outputs:{completed:"completed",trialCompleted:"trialCompleted"},decls:1,vars:1,consts:[[3,"completed",4,"ngIf"],[3,"completed"]],template:function(e,i){1&e&&s.YNc(0,wu,1,0,"trial",0),2&e&&s.Q6J("ngIf",i.isVisible)},styles:[""],data:{animation:[]}}),t})(),Du=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[xr,g.ez,Be,ur,mr]]}),t})();s.B6R(Zt,[g.O5,T],[]);var Oi=d(1896);const _u=[{path:"",component:(()=>{class t{constructor(e){this.conditionsSvc=e,this.blocks=[],this.completed=new s.vpe}nextBlock(){var e;this.blocks.length>0?null===(e=this.blocks.shift())||void 0===e||e.start(this.blockComponent):this.completed.emit()}ngOnInit(){return(0,q.mG)(this,void 0,void 0,function*(){this.blocks=yield this.conditionsSvc.blocks$().toPromise(),this.nextBlock()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(vt))},t.\u0275cmp=s.Xpm({type:t,selectors:[["study"]],viewQuery:function(e,i){if(1&e&&s.Gf(Zt,7),2&e){let l;s.iGM(l=s.CRH())&&(i.blockComponent=l.first)}},decls:1,vars:0,consts:[[3,"completed"]],template:function(e,i){1&e&&(s.TgZ(0,"block",0),s.NdJ("completed",function(){return i.nextBlock()}),s.qZA())},directives:[Zt],styles:["[_nghost-%COMP%]{-webkit-box-align:center;-webkit-box-pack:center;align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}"]}),t})()}];let Su=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Oi.Bz.forChild(_u)],Oi.Bz]}),t})(),bu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[g.ez,Su,Du]]}),t})()}}]);