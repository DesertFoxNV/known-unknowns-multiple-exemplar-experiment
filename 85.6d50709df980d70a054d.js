(self.webpackChunkknown_unknowns_multiple_exemplar_experiment=self.webpackChunkknown_unknowns_multiple_exemplar_experiment||[]).push([[85],{85:(ge,et,u)=>{"use strict";u.r(et),u.d(et,{STIMULUS_CASE:()=>Pt,StudyModule:()=>Bg});var p=u(2057),s=u(4788),jt=u(2895),q=u(7639),E=u(9765),z=(u(6215),u(7574),u(6682),u(5435)),K=u(8307);const h={provide:s.tb,useFactory:function(t,i){return()=>{if((0,p.NF)(i)){const e=Array.from(t.querySelectorAll(`[class*=${D}]`)),n=/\bflex-layout-.+?\b/g;e.forEach(r=>{r.classList.contains(`${D}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(n,"")})}}},deps:[p.K0,s.Lbi],multi:!0},D="flex-layout-";let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[h]}),t})();const bt={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},$=new s.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>bt}),nt=new s.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),fe=new s.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});u(9490),u(6782),u(1211);let ci=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[M]]}),t})();var Tt=u(6794);let hi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[M,Tt.vT]]}),t})(),wi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[M]]}),t})(),ft=(()=>{class t{constructor(e,n){(0,p.PM)(n)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,n=[]){return{ngModule:t,providers:e.serverLoaded?[{provide:$,useValue:Object.assign(Object.assign({},bt),e)},{provide:fe,useValue:n,multi:!0},{provide:nt,useValue:!0}]:[{provide:$,useValue:Object.assign(Object.assign({},bt),e)},{provide:fe,useValue:n,multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(nt),s.LFG(s.Lbi))},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[hi,ci,wi],hi,ci,wi]}),t})();var st=u(933),rt=u(2414),lt=u(7935),Nl=u(1439),Vl=u(5917),xe=u(5257),Hl=u(9761),ye=u(9642),_=u(6083),_i=u(3328),Di=u(2371);function $l(t,i){}class ve{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const zl={dialogContainer:(0,_.X$)("dialogContainer",[(0,_.SB)("void, exit",(0,_.oB)({opacity:0,transform:"scale(0.7)"})),(0,_.SB)("enter",(0,_.oB)({transform:"none"})),(0,_.eR)("* => enter",(0,_.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,_.oB)({transform:"none",opacity:1}))),(0,_.eR)("* => void, * => exit",(0,_.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,_.oB)({opacity:0})))])};let Ql=(()=>{class t extends rt.en{constructor(e,n,r,l,o,a){super(),this._elementRef=e,this._focusTrapFactory=n,this._changeDetectorRef=r,this._config=o,this._focusMonitor=a,this._animationStateChanged=new s.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=d=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(d)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=l}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const n=(0,ye.ht)(),r=this._elementRef.nativeElement;(!n||n===this._document.body||n===r||r.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,ye.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=(0,ye.ht)();return e===n||e.contains(n)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(Di.qV),s.Y36(s.sBO),s.Y36(p.K0,8),s.Y36(ve),s.Y36(Di.tE))},t.\u0275dir=s.lG2({type:t,viewQuery:function(e,n){if(1&e&&s.Gf(rt.Pl,7),2&e){let r;s.iGM(r=s.CRH())&&(n._portalOutlet=r.first)}},features:[s.qOj]}),t})(),Zl=(()=>{class t extends Ql{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:n}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:e,totalTime:n}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=s.n5z(t)))(n||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,n){1&e&&s.WFA("@dialogContainer.start",function(l){return n._onAnimationStart(l)})("@dialogContainer.done",function(l){return n._onAnimationDone(l)}),2&e&&(s.Ikx("id",n._id),s.uIk("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),s.d8E("@dialogContainer",n._state))},features:[s.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&s.YNc(0,$l,0,0,"ng-template",0)},directives:[rt.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[zl.dialogContainer]}}),t})(),ql=0;class Gt{constructor(i,e,n="mat-dialog-"+ql++){this._overlayRef=i,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new E.xQ,this._afterClosed=new E.xQ,this._beforeClosed=new E.xQ,this._state=0,e._id=n,e._animationStateChanged.pipe((0,z.h)(r=>"opened"===r.state),(0,xe.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe((0,z.h)(r=>"closed"===r.state),(0,xe.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),i.keydownEvents().pipe((0,z.h)(r=>r.keyCode===_i.hY&&!this.disableClose&&!(0,_i.Vb)(r))).subscribe(r=>{r.preventDefault(),Ae(this,"keyboard")}),i.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Ae(this,"mouse")})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe((0,z.h)(e=>"closing"===e.state),(0,xe.q)(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(i){let e=this._getPositionStrategy();return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(i="",e=""){return this._overlayRef.updateSize({width:i,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(i){return this._overlayRef.addPanelClass(i),this}removePanelClass(i){return this._overlayRef.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Ae(t,i,e){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=i),t.close(e)}const Ce=new s.OlP("MatDialogData"),Kl=new s.OlP("mat-dialog-default-options"),bi=new s.OlP("mat-dialog-scroll-strategy"),Wl={provide:bi,deps:[st.aV],useFactory:function(t){return()=>t.scrollStrategies.block()}};let Jl=(()=>{class t{constructor(e,n,r,l,o,a,d,g,x){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=l,this._overlayContainer=o,this._dialogRefConstructor=d,this._dialogContainerType=g,this._dialogDataToken=x,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new E.xQ,this._afterOpenedAtThisLevel=new E.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Nl.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Hl.O)(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,n){(n=function(t,i){return Object.assign(Object.assign({},i),t)}(n,this._defaultOptions||new ve)).id&&this.getDialogById(n.id);const r=this._createOverlay(n),l=this._attachDialogContainer(r,n),o=this._attachDialogContent(e,l,r,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),l._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const n=this._getOverlayConfig(e);return this._overlay.create(n)}_getOverlayConfig(e){const n=new st.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachDialogContainer(e,n){const l=s.zs3.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:ve,useValue:n}]}),o=new rt.C5(this._dialogContainerType,n.viewContainerRef,l,n.componentFactoryResolver);return e.attach(o).instance}_attachDialogContent(e,n,r,l){const o=new this._dialogRefConstructor(r,n,l.id);if(e instanceof s.Rgc)n.attachTemplatePortal(new rt.UE(e,null,{$implicit:l.data,dialogRef:o}));else{const a=this._createInjector(l,o,n),d=n.attachComponentPortal(new rt.C5(e,l.viewContainerRef,a));o.componentInstance=d.instance}return o.updateSize(l.width,l.height).updatePosition(l.position),o}_createInjector(e,n,r){const l=e&&e.viewContainerRef&&e.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:n}];return e.direction&&(!l||!l.get(Tt.Is,null,s.XFs.Optional))&&o.push({provide:Tt.Is,useValue:{value:e.direction,change:(0,Vl.of)()}}),s.zs3.create({parent:l||this._injector,providers:o})}_removeOpenDialog(e){const n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,l)=>{r?l.setAttribute("aria-hidden",r):l.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){let l=n[r];l!==e&&"SCRIPT"!==l.nodeName&&"STYLE"!==l.nodeName&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(st.aV),s.Y36(s.zs3),s.Y36(void 0),s.Y36(void 0),s.Y36(st.Xj),s.Y36(void 0),s.Y36(s.DyG),s.Y36(s.DyG),s.Y36(s.OlP))},t.\u0275dir=s.lG2({type:t}),t})(),Q=(()=>{class t extends Jl{constructor(e,n,r,l,o,a,d){super(e,n,l,a,d,o,Gt,Zl,Ce)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(st.aV),s.LFG(s.zs3),s.LFG(p.Ye,8),s.LFG(Kl,8),s.LFG(bi),s.LFG(t,12),s.LFG(st.Xj))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),Rt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[Q,Wl],imports:[[st.U8,rt.eL,lt.BQ],lt.BQ]}),t})(),eo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,lt.si]]}),t})(),io=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,lt.si]]}),t})(),no=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,ft]]}),t})(),Ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,q.QW,eo,io,no]]}),t})(),so=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,ft,Rt,Ot]]}),t})(),Ht=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.ez,lt.si]]}),t})(),ro=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ht,p.ez,ft,Rt,Ot]]}),t})(),lo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ht,p.ez,ft,Rt,Ot]]}),t})(),oo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ht,p.ez,ft,Rt,Ot]]}),t})(),ao=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ht,p.ez,ft,Rt,Ot]]}),t})();var co=u(7012);const Fi=function(t){var i=t.length;return i?t[(0,co.Z)(0,i-1)]:void 0};var Ti=u(4724);const fo=function(t){return Fi((0,Ti.Z)(t))};var ht=u(4654);const $t=function(t){return((0,ht.Z)(t)?Fi:fo)(t)},we=["RWK","PGZ","QGK","FNK","ZVB","PWU","PLJ","KNF","GVW","KXL","GRQ","WPQ","BQP","FXX","ZTF","SGG","GQF","VXO","DZF","ZHD","JHH","VQP","JXY","ZVS","HGD","FJX","VHK","JTP","JTS","UHJ","WTZ","CXF","XFH","LWK","NWK","ZRG","FDG","NQC","WPW","YVR","HLJ","WBX","VGH","KXW","XAQ","WQG","DGJ","QUZ","QZX","HWL","DKX","ZDW","RZJ","VGJ","VWL","MKP","JFJ","GQY","BRX","IHG","YVP","SXG","FJC","QKU","WZY","QHJ","YTZ","RHF","YYB","QFH","ZUX","TQT","VZZ","BTQ","DHQ","XLW","VLW","VZJ","GGK","SWK","UFH","GPN","JSX","IQP","QUP","XDG","QWN","CBK","JVH","VXG","YBF","BVY","QZW","UPZ","WMX","XVN","RRX","QTX","DZN","WXP"],Mi={lower:"lower",upper:"upper"},mo=Object.values(Mi);function P(t){const i=$t(we);if(void 0===i)throw Error('Random value returned "undefined"!');const e=we.indexOf(i);return e>-1&&we.splice(e,1),t===Mi.lower?i.toLowerCase():i.toUpperCase()}var S=(()=>{return(t=S||(S={})).identity="identity",t.trained="trained",t.mutuallyEntailed="mutually entailed",t.combinatoriallyEntailed="combinatorially entailed",S;var t})();class k extends class{constructor(i,e){this.dest=e,this.src=i}toString(){return`${this.src}->${this.dest}`}}{constructor(i,e,n,r){super(i,e),this.relation=n,this.relationType=r}toString(){return`${this.src} ${this.relation} ${this.dest} (${this.relationType})`}}var _e=u(6224);const zt=function(t,i){for(var e=t.length;e--;)if((0,_e.Z)(t[e][0],i))return e;return-1};var Co=Array.prototype.splice;function mt(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}mt.prototype.clear=function(){this.__data__=[],this.size=0},mt.prototype.delete=function(t){var i=this.__data__,e=zt(i,t);return!(e<0||(e==i.length-1?i.pop():Co.call(i,e,1),--this.size,0))},mt.prototype.get=function(t){var i=this.__data__,e=zt(i,t);return e<0?void 0:i[e][1]},mt.prototype.has=function(t){return zt(this.__data__,t)>-1},mt.prototype.set=function(t,i){var e=this.__data__,n=zt(e,t);return n<0?(++this.size,e.push([t,i])):e[n][1]=i,this};const Qt=mt;var pt=u(4423),ot=u(309);const Et=(0,pt.Z)(ot.Z,"Map"),Lt=(0,pt.Z)(Object,"create");var Qo=Object.prototype.hasOwnProperty;var Uo=Object.prototype.hasOwnProperty;function xt(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}xt.prototype.clear=function(){this.__data__=Lt?Lt(null):{},this.size=0},xt.prototype.delete=function(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},xt.prototype.get=function(t){var i=this.__data__;if(Lt){var e=i[t];return"__lodash_hash_undefined__"===e?void 0:e}return Qo.call(i,t)?i[t]:void 0},xt.prototype.has=function(t){var i=this.__data__;return Lt?void 0!==i[t]:Uo.call(i,t)},xt.prototype.set=function(t,i){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Lt&&void 0===i?"__lodash_hash_undefined__":i,this};const Gi=xt,Zt=function(t,i){var e=t.__data__;return function(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}(i)?e["string"==typeof i?"string":"hash"]:e.map};function yt(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}yt.prototype.clear=function(){this.size=0,this.__data__={hash:new Gi,map:new(Et||Qt),string:new Gi}},yt.prototype.delete=function(t){var i=Zt(this,t).delete(t);return this.size-=i?1:0,i},yt.prototype.get=function(t){return Zt(this,t).get(t)},yt.prototype.has=function(t){return Zt(this,t).has(t)},yt.prototype.set=function(t,i){var e=Zt(this,t),n=e.size;return e.set(t,i),this.size+=e.size==n?0:1,this};const Ri=yt;function vt(t){var i=this.__data__=new Qt(t);this.size=i.size}vt.prototype.clear=function(){this.__data__=new Qt,this.size=0},vt.prototype.delete=function(t){var i=this.__data__,e=i.delete(t);return this.size=i.size,e},vt.prototype.get=function(t){return this.__data__.get(t)},vt.prototype.has=function(t){return this.__data__.has(t)},vt.prototype.set=function(t,i){var e=this.__data__;if(e instanceof Qt){var n=e.__data__;if(!Et||n.length<199)return n.push([t,i]),this.size=++e.size,this;e=this.__data__=new Ri(n)}return e.set(t,i),this.size=e.size,this};const qt=vt;var Oi=u(5427),Aa=u(2753);const Kt=function(t,i,e,n){var r=!e;e||(e={});for(var l=-1,o=i.length;++l<o;){var a=i[l],d=n?n(e[a],t[a],a,e,t):void 0;void 0===d&&(d=t[a]),r?(0,Aa.Z)(e,a,d):(0,Oi.Z)(e,a,d)}return e};var De=u(1163);var Da=u(4741),At=u(4214),Ei=u(1550);var Ta=Object.prototype.hasOwnProperty;const Ga=function(t){if(!(0,At.Z)(t))return function(t){var i=[];if(null!=t)for(var e in Object(t))i.push(e);return i}(t);var i=(0,Ei.Z)(t),e=[];for(var n in t)"constructor"==n&&(i||!Ta.call(t,n))||e.push(n);return e};var Li=u(8402);const be=function(t){return(0,Li.Z)(t)?(0,Da.Z)(t,!0):Ga(t)};var Bi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ii=Bi&&"object"==typeof module&&module&&!module.nodeType&&module,ki=Ii&&Ii.exports===Bi?ot.Z.Buffer:void 0,Pi=ki?ki.allocUnsafe:void 0;var ji=u(6889);const Yi=function(){return[]};var Na=Object.prototype.propertyIsEnumerable,Ni=Object.getOwnPropertySymbols;const Se=Ni?function(t){return null==t?[]:(t=Object(t),function(t,i){for(var e=-1,n=null==t?0:t.length,r=0,l=[];++e<n;){var o=t[e];i(o,e,t)&&(l[r++]=o)}return l}(Ni(t),function(i){return Na.call(t,i)}))}:Yi,Vi=function(t,i){for(var e=-1,n=i.length,r=t.length;++e<n;)t[r+e]=i[e];return t},Hi=(0,u(4184).Z)(Object.getPrototypeOf,Object),$i=Object.getOwnPropertySymbols?function(t){for(var i=[];t;)Vi(i,Se(t)),t=Hi(t);return i}:Yi,zi=function(t,i,e){var n=i(t);return(0,ht.Z)(t)?n:Vi(n,e(t))},Fe=function(t){return zi(t,De.Z,Se)},ed=function(t){return zi(t,be,$i)},Te=(0,pt.Z)(ot.Z,"DataView"),Me=(0,pt.Z)(ot.Z,"Promise"),Ge=(0,pt.Z)(ot.Z,"Set"),Re=(0,pt.Z)(ot.Z,"WeakMap");var Oe=u(4796),Ct=u(2035),Qi="[object Map]",Zi="[object Promise]",qi="[object Set]",Ki="[object WeakMap]",Ui="[object DataView]",od=(0,Ct.Z)(Te),ad=(0,Ct.Z)(Et),dd=(0,Ct.Z)(Me),cd=(0,Ct.Z)(Ge),ud=(0,Ct.Z)(Re),at=Oe.Z;(Te&&at(new Te(new ArrayBuffer(1)))!=Ui||Et&&at(new Et)!=Qi||Me&&at(Me.resolve())!=Zi||Ge&&at(new Ge)!=qi||Re&&at(new Re)!=Ki)&&(at=function(t){var i=(0,Oe.Z)(t),e="[object Object]"==i?t.constructor:void 0,n=e?(0,Ct.Z)(e):"";if(n)switch(n){case od:return Ui;case ad:return Qi;case dd:return Zi;case cd:return qi;case ud:return Ki}return i});const Bt=at;var fd=Object.prototype.hasOwnProperty;const Ut=ot.Z.Uint8Array,Ee=function(t){var i=new t.constructor(t.byteLength);return new Ut(i).set(new Ut(t)),i};var Ad=/\w*$/;var Wt=u(5770),Wi=Wt.Z?Wt.Z.prototype:void 0,Ji=Wi?Wi.valueOf:void 0;const Zd=function(t,i,e){var n=t.constructor;switch(i){case"[object ArrayBuffer]":return Ee(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return function(t,i){var e=i?Ee(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,i){var e=i?Ee(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return function(t){var i=new t.constructor(t.source,Ad.exec(t));return i.lastIndex=t.lastIndex,i}(t);case"[object Set]":return new n;case"[object Symbol]":return function(t){return Ji?Object(Ji.call(t)):{}}(t)}};var Xi=Object.create;const Kd=function(){function t(){}return function(i){if(!(0,At.Z)(i))return{};if(Xi)return Xi(i);t.prototype=i;var e=new t;return t.prototype=void 0,e}}();var Le=u(4909),It=u(6539);var tn=u(1162),Jt=u(8514),en=Jt.Z&&Jt.Z.isMap;const ic=en?(0,tn.Z)(en):function(t){return(0,It.Z)(t)&&"[object Map]"==Bt(t)};var nn=Jt.Z&&Jt.Z.isSet;const oc=nn?(0,tn.Z)(nn):function(t){return(0,It.Z)(t)&&"[object Set]"==Bt(t)};var sn="[object Arguments]",rn="[object Function]",ln="[object Object]",F={};F[sn]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object DataView]"]=F["[object Boolean]"]=F["[object Date]"]=F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Map]"]=F["[object Number]"]=F[ln]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object Symbol]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Error]"]=F[rn]=F["[object WeakMap]"]=!1;const Lc=function Xt(t,i,e,n,r,l){var o,a=1&i,d=2&i,g=4&i;if(e&&(o=r?e(t,n,r,l):e(t)),void 0!==o)return o;if(!(0,At.Z)(t))return t;var x=(0,ht.Z)(t);if(x){if(o=function(t){var i=t.length,e=new t.constructor(i);return i&&"string"==typeof t[0]&&fd.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!a)return(0,ji.Z)(t,o)}else{var m=Bt(t),y=m==rn||"[object GeneratorFunction]"==m;if((0,Le.Z)(t))return function(t,i){if(i)return t.slice();var e=t.length,n=Pi?Pi(e):new t.constructor(e);return t.copy(n),n}(t,a);if(m==ln||m==sn||y&&!r){if(o=d||y?{}:function(t){return"function"!=typeof t.constructor||(0,Ei.Z)(t)?{}:Kd(Hi(t))}(t),!a)return d?function(t,i){return Kt(t,$i(t),i)}(t,function(t,i){return t&&Kt(i,be(i),t)}(o,t)):function(t,i){return Kt(t,Se(t),i)}(t,function(t,i){return t&&Kt(i,(0,De.Z)(i),t)}(o,t))}else{if(!F[m])return r?t:{};o=Zd(t,m,a)}}l||(l=new qt);var v=l.get(t);if(v)return v;l.set(t,o),oc(t)?t.forEach(function(O){o.add(Xt(O,i,e,O,t,l))}):ic(t)&&t.forEach(function(O,C){o.set(C,Xt(O,i,e,C,t,l))});var w=x?void 0:(g?d?ed:Fe:d?be:De.Z)(t);return function(t,i){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==i(t[e],e,t););}(w||t,function(O,C){w&&(O=t[C=O]),(0,Oi.Z)(o,C,Xt(O,i,e,C,t,l))}),o},te=function(t){return Lc(t,5)};class Be extends class{constructor(){this.edges=new Map,this.nodes=new Set}addEdge(i){var e;const n=i.src,r=i.dest;if(!this.hasNode(n))throw Error(`addEdge failed source node "${n.toString()}" is not in graph.`);if(!this.hasNode(r))throw Error(`addEdge failed destination node "${r.toString()}" is not in graph.`);if(null===(e=this.edges.get(i.src))||void 0===e?void 0:e.some(l=>l.src===n&&l.dest===r))throw Error(`Add edge failed an edge already exists with src ${n.toString()} => dest ${r.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i))}addNode(i){if(this.nodes.has(i))throw Error(`addNode failed node "${i.toString()}" already exists`);this.nodes.add(i),this.edges.set(i,[])}findPathway(i,e,n,r={nodes:[],edges:[]},l=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===e)return l.concat(r);for(const o of this.getEdgesForNode(i))if(!r.nodes.map(a=>a.toString()).includes(o.dest.toString())){const a=this.findPathway(o.dest,e,o,te(r),l);a&&(l=l.concat(a))}return l}getEdgesForNode(i){return this.edges.get(i)||[]}hasNode(i){return this.nodes.has(i)}toString(){return Array.from(this.edges.values()).flat().filter(Boolean).map(i=>i.toString()).join("\n")}}{constructor(i){super(),this.includeRelationsBetweenNetworks=!1,this.selfRelation=i.selfRelation,this.unknownRelation=i.unknownRelation,this.mutualDictionary=i.mutualDictionary,this.combinatorialDictionary=i.combinatorialDictionary}get combinatoriallyEntailed(){const i=[],e=[...this.nodes];for(const n of e)for(const r of e){if(n===r||!this.includeRelationsBetweenNetworks&&n.network!==r.network||this.getEdgesForNode(n).find(o=>o.dest===r))continue;const l=this.findPathway(n,r).map(o=>o.edges.map(a=>a.relation)).reduce((o,a,d)=>{const g=[...a];let x=g.shift();for(;g.length;){const m=g.shift();x=this.combinatorialDictionary[x][m]}return o.push(x),a.length=0,o},[]);0===l.length&&l.push(this.unknownRelation),[...new Set(l.filter(o=>o!==this.unknownRelation))].length>1?console.warn(`Multiple relations detected for ${n.toString()} => ${r.toString()} comparison`,l):i.push({relation:l[0],relationType:S.combinatoriallyEntailed,stimuli:[n,r]})}return i}get identities(){return[...this.nodes].map(i=>({relation:this.selfRelation,relationType:S.identity,stimuli:[i,i]}))}get mutuallyEntailed(){return[...this.edges.values()].flat().filter(i=>i.relationType===S.mutuallyEntailed).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}get trained(){return[...this.edges.values()].flat().filter(i=>i.relationType===S.trained).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}addTrainedAndMutualRelations(i){var e,n;const r=i.src,l=i.dest;if(!this.hasNode(r))throw Error(`Add edge failed source node "${r.toString()}" is not in graph.`);if(!this.hasNode(l))throw Error(`Add edge failed destination node "${l.toString()}" is not in graph.`);if(!(null===(e=this.mutualDictionary)||void 0===e?void 0:e[i.relation]))throw Error(`Could not find inverse of relation ${i.relation}`);if(null===(n=this.edges.get(i.src))||void 0===n?void 0:n.some(o=>o.src===r&&o.dest===l))throw Error(`Add edge failed an edge already exists with src ${r.toString()} => dest ${l.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i)),this.edges.set(i.dest,this.edges.get(i.dest).concat(new k(i.dest,i.src,this.mutualDictionary[i.relation],S.mutuallyEntailed)))}findPathway(i,e,n,r={nodes:[],edges:[]},l=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===e)return l.concat(r);for(const o of this.getEdgesForNode(i))if(!r.nodes.map(a=>a.toString()).includes(o.dest.toString())){const a=this.findPathway(o.dest,e,o,te(r),l);a&&(l=l.concat(a))}return l}toString(){return[].concat(this.identities,this.trained,this.mutuallyEntailed,this.combinatoriallyEntailed).flat().map(i=>`${i.relationType}: ${i.stimuli[0]} ${i.relation} ${i.stimuli[1]}`).join("\n")}}class j{constructor(i,e,n=""){this.name=i,this.network=e,this.value=n}repr(){return`new RelationalFrameNode('${this.name}','${this.network}','${this.value}')`}toString(){return`${this.name}${this.network}`}}var Ie=u(202);let on=(()=>{class t extends Be{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n,this.includeRelationsBetweenNetworks=!0;const r=new j("A",1,P(e)),l=new j("B",1,P(e)),o=new j("C",1,P(e));this.addNode(r),this.addNode(l),this.addNode(o),this.addEdge(new k(r,l,"different",S.trained)),this.addEdge(new k(r,o,"different",S.trained)),this.addEdge(new k(l,r,"different",S.trained)),this.addEdge(new k(l,o,"different",S.trained)),this.addEdge(new k(o,r,"different",S.trained)),this.addEdge(new k(o,l,"different",S.trained));const a=new j("D",2,P(e)),d=new j("E",2,P(e)),g=new j("F",2,P(e));this.addNode(a),this.addNode(d),this.addNode(g)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Pt),s.LFG(Ie.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=u(2745);const jc=[[f.bR.same,f.bR.same,void 0],[f.bR.same,f.bR.greaterThan,void 0],[f.bR.same,f.bR.lessThan,void 0],[f.bR.lessThan,f.bR.same,void 0],[f.bR.lessThan,void 0,f.bR.lessThan],[f.bR.lessThan,f.bR.greaterThan,void 0],[f.bR.greaterThan,f.bR.same,void 0],[f.bR.greaterThan,f.bR.lessThan,void 0],[f.bR.greaterThan,void 0,f.bR.greaterThan]],Yc=[[f.bR.lessThan,f.bR.lessThan,void 0],[f.bR.greaterThan,f.bR.greaterThan,void 0]];let ke=(()=>{class t extends Be{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n;const r=new j("A",3,P(e)),l=new j("B",3,P(e)),o=new j("C",3,P(e));this.addNode(r),this.addNode(l),this.addNode(o);const[a,d,g]=$t(jc);a&&this.addTrainedAndMutualRelations(new k(r,l,a,S.trained)),d&&this.addTrainedAndMutualRelations(new k(r,o,d,S.trained)),g&&this.addTrainedAndMutualRelations(new k(l,o,g,S.trained));const x=new j("A",4,P(e)),m=new j("B",4,P(e)),y=new j("C",4,P(e));this.addNode(x),this.addNode(m),this.addNode(y);const[v,b,w]=$t(Yc);v&&this.addTrainedAndMutualRelations(new k(x,m,v,S.trained)),b&&this.addTrainedAndMutualRelations(new k(x,y,b,S.trained)),w&&this.addTrainedAndMutualRelations(new k(m,y,w,S.trained))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Pt),s.LFG(Ie.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),an=(()=>{class t extends Be{constructor(e,n){super(n),this.stimulusCase=e,this.relationalFrameGraphConfig=n;const r=new j("A",5,P(e)),l=new j("B",5,P(e)),o=new j("C",5,P(e));this.addNode(r),this.addNode(l),this.addNode(o),this.addTrainedAndMutualRelations(new k(r,l,"same",S.trained)),this.addTrainedAndMutualRelations(new k(r,o,"same",S.trained)),this.addTrainedAndMutualRelations(new k(l,o,"same",S.trained));const a=new j("A",6,P(e)),d=new j("B",6,P(e)),g=new j("C",6,P(e));this.addNode(a),this.addNode(d),this.addNode(g),this.addTrainedAndMutualRelations(new k(a,d,"greaterThan",S.trained)),this.addTrainedAndMutualRelations(new k(a,g,"greaterThan",S.trained)),this.addTrainedAndMutualRelations(new k(d,g,"greaterThan",S.trained))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Pt),s.LFG(Ie.o))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Nc(){const t=$t(mo);if(void 0===t)throw Error('Random stimulus case returned "undefined"!');return t}var dn=u(2636),wt=u(4762),_t=u(9524),Dt=u(6797),ee=u(8049),cn=u(3190);function ie(t){return(0,_.X$)((null==t?void 0:t.anchor)||"fadeOut",[(0,_.SB)("false",(0,_.oB)({visibility:"visible",opacity:1})),(0,_.SB)(":leave",(0,_.oB)({visibility:"visible",opacity:1})),(0,_.SB)("true",(0,_.oB)({visibility:"hidden",opacity:0})),(0,_.eR)("void => *",(0,_.jt)(0)),(0,_.eR)("* => true",(0,_.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}const Y=150;let gn=(()=>{class t{constructor(e,n){this.data=e,this.ref=n,this.animated=!1,this.disableClose=Boolean(this.data.disableClose)}close(){return(0,wt.mG)(this,void 0,void 0,function*(){this.animated=!0,yield(0,Dt.H)(Y).toPromise(),this.ref.close()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ce),s.Y36(Gt))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block-start-dialog"]],decls:3,vars:3,consts:[["matRipple","",1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white",3,"matRippleDisabled","tap"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.NdJ("tap",function(){return!1===n.disableClose&&n.close()}),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",n.animated)("matRippleDisabled",n.animated||n.disableClose),s.xp6(2),s.Oqu(n.data.text))},directives:[lt.wG],styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{font-size:clamp(1rem,8vw,15rem);line-height:clamp(1rem,8vw,15rem);text-align:center}"],data:{animation:[ie({duration:Y})]}}),t})();function je(t){return{data:t,disableClose:!0,hasBackdrop:!1,closeOnNavigation:!0,height:"100vh",maxHeight:"100vh",maxWidth:"100vw",panelClass:["fullscreen-dialog-container","animate__animated","animate__fadeIn"],width:"100vw"}}var Z=u(7214),dt=u(2823);const tt=850,Vc=function(t,i){return{value:t,params:i}};let Hc=(()=>{class t{constructor(e,n){this.data=e,this.ref=n,this.animated=!1,setTimeout(()=>this.animated=!0,0),setTimeout(()=>this.ref.close(),this.data.durationMs);const r=new Audio;r.src=`./assets/${e.feedback.toLowerCase().replaceAll(" ","-")}.mp3`,r.load(),r.play().then(()=>r.remove())}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ce),s.Y36(Gt))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-correct-dialog"]],decls:3,vars:5,consts:[[1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",s.WLB(2,Vc,n.animated,n.data.animationParams)),s.xp6(2),s.Oqu(n.data.feedback))},styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{font-size:clamp(1rem,8vw,15rem);white-space:nowrap}"],data:{animation:[ie()]}}),t})();var $c=u(409);const V=500,fn={stimuli:[V,2*V],cues:Array(5).fill(3*V)},Ye=Math.max(...Object.values(fn).flat())+1e3;function hn(t){return(0,_.X$)((null==t?void 0:t.anchor)||"fadeIn",[(0,_.SB)("void",(0,_.oB)({visibility:"hidden",opacity:0})),(0,_.SB)("false",(0,_.oB)({visibility:"hidden",opacity:0})),(0,_.SB)("true",(0,_.oB)({visibility:"visible",opacity:1})),(0,_.eR)("* => true",(0,_.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}var mn=u(730);const zc=function(t){return{delay:t}},Qc=function(t,i){return{value:t,params:i}},Zc=function(t,i){return{"d-none":t,"hover-able":i}},qc=function(t){return{"pointer-events":t}};let pn=(()=>{class t{constructor(e){this.deviceDetectorSvc=e,this.animationDelay=0,this.disabled=!1,this.selected=new s.vpe,this.isDesktop=this.deviceDetectorSvc.isDesktop()}select(){this.disabled=!0,this.selected.emit(this.config)}set(e){return(0,wt.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield(0,Dt.H)(Y).toPromise(),this.disabled=!1,this.config=e,this.animate="fade-in"})}tap(){this.disabled=!0,this.selected.emit(this.config)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(mn.x0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-cue"]],inputs:{animationDelay:"animationDelay"},outputs:{selected:"selected"},decls:2,vars:18,consts:[["onclick","blur()","matRipple","",1,"trial-item","dynamic-text",3,"matRippleDisabled","ngClass","ngStyle","tap"]],template:function(e,n){1&e&&(s.TgZ(0,"button",0),s.NdJ("tap",function(){return!n.disabled&&n.select()}),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",null==n.config?null:n.config.fileName),s.Q6J("@fadeIn",s.WLB(10,Qc,"fade-in"===n.animate,s.VKq(8,zc,n.animationDelay)))("@fadeOut","fade-out"===n.animate)("matRippleDisabled",n.disabled)("ngClass",s.WLB(13,Zc,void 0===n.config,n.isDesktop))("ngStyle",s.VKq(16,qc,null!=n.config&&n.config.value?"all":"none")),s.xp6(1),s.hij(" ",null!=n.config&&n.config.isArbitrary?"\xa0":(null==n.config?null:n.config.viewValue)||""," "))},directives:[lt.wG,p.mk,p.PC],styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[hn(),ie({duration:Y})]}}),t})();const Kc=function(t){return{delay:t}},Uc=function(t,i){return{value:t,params:i}};let xn=(()=>{class t{constructor(e){this.deviceDetectorSvc=e,this.animationDelay=0,this.isDesktop=this.deviceDetectorSvc.isDesktop()}set(e){return(0,wt.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield(0,Dt.H)(Y).toPromise(),this.backgroundImage=f.Sg,this.cue=e,this.animate="fade-in"})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(mn.x0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-stimulus"]],inputs:{animationDelay:"animationDelay"},decls:2,vars:10,consts:[[1,"trial-item","dynamic-text"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",n.backgroundImage),s.Q6J("@fadeIn",s.WLB(7,Uc,"fade-in"===n.animate,s.VKq(5,Kc,n.animationDelay)))("@fadeOut","fade-out"===n.animate),s.xp6(1),s.hij(" ",n.cue,"\n"))},styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[hn(),ie({duration:Y})]}}),t})();function Wc(t,i){1&t&&s._UZ(0,"trial-stimulus",4),2&t&&s.Q6J("animationDelay",i.$implicit)}function Jc(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial-cue",5),s.NdJ("selected",function(r){const o=s.CHM(e).index;return s.oxw().selected(r,o+1)}),s.qZA()}2&t&&s.Q6J("animationDelay",i.$implicit)}let H=class{constructor(){this.animationDelayMs=fn,this.complete=!1,this.completed=new s.vpe,this.secondsInTrial=0}clearTimer(){this.timerSub&&this.timerSub.unsubscribe()}ngAfterViewInit(){if(!this.trialCueComponents)throw Error("Trial cue components are undefined");if(!this.trialStimulusComponents)throw Error("Trial stimulus components are undefined");this.trialCueComponents.changes.pipe((0,_t.t)(this)).subscribe(),this.trialStimulusComponents.changes.pipe((0,_t.t)(this)).subscribe()}selected(i,e){if(!this.startedAt)throw Error("Started at date is undefined");this.clearTimer(),this.complete=!0,this.completed.emit({cue:i,position:e,startedAt:this.startedAt,completedAt:new Date})}setTimer(){const{studyConfig:i}=this;if(!i)throw Error("Study configuration is undefined");this.clearTimer(),this.secondsInTrial=0,this.timerSub=(0,Dt.H)(Ye,1e3).pipe((0,$c.o)(()=>this.secondsInTrial<i.trialTimeoutSeconds&&!this.complete),(0,K.b)(()=>{this.secondsInTrial++,this.secondsInTrial===i.trialTimeoutSeconds&&!this.complete&&this.selected()}),(0,_t.t)(this)).subscribe()}show(i){var e,n;if(!this.trialCueComponents)throw Error("Trial cue components are undefined");if(!this.trialStimulusComponents)throw Error("Trial stimulus components are undefined");this.startedAt=new Date,this.complete=!1,this.setTimer();for(const[r,l]of i.stimuli.entries())null===(e=this.trialStimulusComponents.get(r))||void 0===e||e.set(l.value);for(let r=0;r<this.trialCueComponents.length;r++)null===(n=this.trialCueComponents.get(r))||void 0===n||n.set(i.cueComponentConfigs[r])}};function Xc(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}}H.\u0275fac=function(i){return new(i||H)},H.\u0275cmp=s.Xpm({type:H,selectors:[["trial"]],viewQuery:function(i,e){if(1&i&&(s.Gf(pn,5),s.Gf(xn,5)),2&i){let n;s.iGM(n=s.CRH())&&(e.trialCueComponents=n),s.iGM(n=s.CRH())&&(e.trialStimulusComponents=n)}},inputs:{studyConfig:"studyConfig"},outputs:{completed:"completed"},decls:4,vars:2,consts:[[1,"trial-sample-stimuli"],[3,"animationDelay",4,"ngFor","ngForOf"],[1,"trial-buttons"],[3,"animationDelay","selected",4,"ngFor","ngForOf"],[3,"animationDelay"],[3,"animationDelay","selected"]],template:function(i,e){1&i&&(s.TgZ(0,"div",0),s.YNc(1,Wc,1,1,"trial-stimulus",1),s.qZA(),s.TgZ(2,"div",2),s.YNc(3,Jc,1,1,"trial-cue",3),s.qZA()),2&i&&(s.xp6(1),s.Q6J("ngForOf",e.animationDelayMs.stimuli),s.xp6(2),s.Q6J("ngForOf",e.animationDelayMs.cues))},directives:[p.sg,xn,pn],styles:["[_nghost-%COMP%]{display:block}button.trial-item.hover-able[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;min-height:75px;height:10vw;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}"]}),H=(0,wt.gn)([(0,_t.c)()],H);let ne=(()=>{class t{constructor(e,n){this.dialog=e,this.reportSvc=n,this.completed=new s.vpe,this.containsSequentialTriplicates=!1,this.correct=0,this.failSafeDuration=0,this.feedBackShown=!1,this.incorrect=0,this.index=-1,this.isVisible=!0,this.name="Block",this.retryInstructions="CLICK TO TRY AGAIN",this.sequentialCorrect=0,this.startInstructions="CLICK TO START",this.studyFailed=!1,this.trialCompleted=new s.vpe,this.trials=[],this._attempts=0,this._probeAttempts=0,this._totalTrials=0,this._trainingAttempts=0}get attempts(){return this._attempts}get probeAttempts(){return this._probeAttempts}get totalTrials(){return this._totalTrials}get trainingAttempts(){return this._trainingAttempts}get percentCorrect(){return this.correct/(this.correct+this.incorrect)*100}get trial(){return this.trials[this.index]}get trialNum(){return this.index+1}complete(){this.incrementAttempt(),this.setVisibility(!1,V),this.completedAt=new Date,setTimeout(()=>{this.completed.emit()},V+(this.feedBackShown?tt:Y))}createTrials(){return[]}failed(){this.studyFailed=!0,this.setVisibility(!1,0),this.prompt("THANKS FOR PARTICIPATING!",!0,V+(this.feedBackShown?tt:Y)).subscribe(),this.completed.emit()}feedbackEnabled(){return!1}grade(e){var n,r;const l=(null===(n=null==e?void 0:e.cue)||void 0===n?void 0:n.value)===this.trial.relation;return(null===(r=null==e?void 0:e.cue)||void 0===r?void 0:r.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++):(this.incorrect++,this.sequentialCorrect=0),l?"CORRECT":"WRONG"}increaseTotalTrials(){this._totalTrials++}incrementAttempt(){this._attempts++}incrementProbeAttempts(){return this._probeAttempts++}incrementTrainingAttempts(){return this._trainingAttempts++}nextTrial(){-1===this.index&&(this.startedAt=new Date),this.index!==this.trials.length-1?(this.index++,this.showTrial(this.trial,this.feedBackShown?tt:0),this.trialCompleted.pipe((0,ee.P)()).subscribe(e=>this.cueSelected(e))):this.complete()}prompt(e,n=!1,r=Ye){return(0,Dt.H)(r).pipe((0,ee.P)(),(0,cn.w)(()=>this.dialog.open(gn,je({text:e,disableClose:n})).afterClosed()))}reset(){this.index=-1,this.correct=0,this.incorrect=0,this.sequentialCorrect=0,this.trials=this.createTrials()}setVisibility(e,n=Ye){setTimeout(()=>this.isVisible=e,n)}showFeedback(e,n=1e3,r={delay:tt,duration:Y}){this.dialog.open(Hc,je({animationParams:r,durationMs:n,feedback:e}))}showTrial(e,n=tt){setTimeout(()=>{var r;return null===(r=this.trialComponent)||void 0===r?void 0:r.show(e)},n)}start(){0===this.trials.length&&this.reset(),this.prompt(this.startInstructions,!1,V).subscribe(()=>{this.setVisibility(!0,0),this.nextTrial()})}cueSelected(e){this.feedback=this.grade(e),(null==e?void 0:e.cue)?this.feedback&&this.feedbackEnabled()?(this.showFeedback(this.feedback),this.feedBackShown=!0):this.feedBackShown=!1:(this.showFeedback("TIME EXPIRED"),this.feedBackShown=!0),this.reportSvc.addTrial(this,e),this.increaseTotalTrials(),this.nextTrial()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Q),s.Y36(dt.r))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block"]],viewQuery:function(e,n){if(1&e&&s.Gf(H,5),2&e){let r;s.iGM(r=s.CRH())&&(n.trialComponent=r.first)}},inputs:{studyConfig:"studyConfig"},outputs:{completed:"completed",trialCompleted:"trialCompleted"},decls:1,vars:1,consts:[[3,"completed",4,"ngIf"],[3,"completed"]],template:function(e,n){1&e&&s.YNc(0,Xc,1,0,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[p.O5,H],styles:[""],data:{animation:[]}}),t})();var se=u(2151);function Ne(t,i){return new Array(t.iCannotKnow?4:3).fill(void 0).map(()=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[i],value:i,viewValue:se.upper(i)}))}function re(t){return(0,Z.Z)(t.iCannotKnow?f.Tz:f.do).map(e=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[e],value:e,viewValue:se.upper(e)}))}function eu(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let iu=(()=>{class t extends ne{constructor(e,n,r){super(e,n),this.network3And4Graph=r,this.name="Training Networks",this.numAllottedTimeouts=1,this.numIdkProbeTrials=5,this.numProbeDuplicates=4,this.numProbeTrials=32,this.numTimeouts=0,this.numTrainingDuplicates=2,this.numTrainingTrials=20,this.probeFailuresAllotted=2,this.probesFailed=0,this.sequentialCorrectTarget=23}complete(){this.timeout&&clearTimeout(this.timeout),super.complete()}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study configuration is undefined");let n=[];for(let l=0;l<this.numTrainingDuplicates;l++)n=n.concat([this.network3And4Graph.identities,this.network3And4Graph.trained].flat().map(o=>Object.assign(Object.assign({},o),{cueComponentConfigs:re(e)})));if(n.length!==this.numTrainingTrials)throw Error(`Training trials length "${n.length}" doesn't equal specified length "${this.numTrainingTrials}"`);let r=[];for(let l=0;l<this.numProbeDuplicates;l++)r=r.concat([this.network3And4Graph.mutuallyEntailed,this.network3And4Graph.combinatoriallyEntailed].flat().map(o=>Object.assign(Object.assign({},o),{cueComponentConfigs:re(e)})));if(r.length!==this.numProbeTrials)throw Error(`Probe trials length "${r.length}" doesn't equal specified length "${this.numIdkProbeTrials}"`);return(0,Z.Z)(n).concat((0,Z.Z)(r))}feedbackEnabled(){return this.index<this.numTrainingTrials}grade(e){var n,r;const l=(null===(n=null==e?void 0:e.cue)||void 0===n?void 0:n.value)===this.trial.relation;return(null===(r=null==e?void 0:e.cue)||void 0===r?void 0:r.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++):(this.sequentialCorrect=0,this.incorrect++),l?"CORRECT":"WRONG"}nextTrial(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.sequentialCorrect===this.sequentialCorrectTarget&&(this.index=this.numTrainingTrials-1),this.trialNum===this.numTrainingTrials&&100!==this.percentCorrect&&this.sequentialCorrect!==this.sequentialCorrectTarget?(this.incrementTrainingAttempts(),this.reset(),super.nextTrial()):this.trialNum===this.numProbeTrials+this.numTrainingTrials&&this.percentCorrect<(this.studyConfig.iCannotKnow?90:67.5)?(this.probesFailed++,this.incrementProbeAttempts(),this.probesFailed===this.probeFailuresAllotted?this.failed():this.retry()):(this.trialNum===this.numTrainingTrials&&(this.timeout&&clearTimeout(this.timeout),this.correct=0,this.incorrect=0),super.nextTrial())}ngOnInit(){this.start()}reset(){this.index=-1,this.correct=0,this.incorrect=0,this.trials=this.createTrials()}retry(){this.incrementAttempt(),this.setVisibility(!1,Y),this.prompt(this.retryInstructions,!1,V+(this.feedBackShown?tt:Y)).subscribe(()=>{this.feedBackShown=!1,this.setVisibility(!0,0),this.nextTrial(),this.setTimeout()}),this.reset()}setTimeout(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.timeout&&clearTimeout(this.timeout),this.failSafeDuration=50*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3),this.timeout=setTimeout(()=>{var e;null===(e=this.trialComponent)||void 0===e||e.clearTimer(),this.numTimeouts++,this.numTimeouts>this.numAllottedTimeouts?this.failed():this.retry()},50*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3))}start(){0===this.trials.length&&this.reset(),this.prompt(this.startInstructions,!1,V).subscribe(()=>{this.setTimeout(),this.setVisibility(!0,0),this.nextTrial()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Q),s.Y36(dt.r),s.Y36(ke))},t.\u0275cmp=s.Xpm({type:t,selectors:[["training-networks-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,eu,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[p.O5,H],styles:[""],data:{animation:[]}}),t})();var yn=u(9119),nu=u(3579);function su(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let ru=(()=>{class t extends ne{constructor(e,n,r){super(e,n),this.network3And4Graph=r,this.name="Pre Test",this.numDuplicates=4}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study configuration is undefined");for(let n=0;n<this.numDuplicates;n++)this.trials=this.trials.concat([this.network3And4Graph.mutuallyEntailed,this.network3And4Graph.combinatoriallyEntailed].flat().map(r=>Object.assign(Object.assign({},r),{cueComponentConfigs:re(e)})));return(0,Z.Z)(this.trials)}ngOnInit(){this.start()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Q),s.Y36(dt.r),s.Y36(ke))},t.\u0275cmp=s.Xpm({type:t,selectors:[["pre-test-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,su,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[p.O5,H],styles:[""],data:{animation:[]}}),t})();const vn=function(t,i,e){return t==t&&(void 0!==e&&(t=t<=e?t:e),void 0!==i&&(t=t>=i?t:i)),t};var An=u(1994);const au=function(t,i){return(0,An.Z)((0,ji.Z)(t),vn(i,0,t.length))},cu=function(t,i){var e=(0,Ti.Z)(t);return(0,An.Z)(e,vn(i,0,e.length))};var uu=u(8078);var hu=/\s/;var xu=/^\s+/;const vu=function(t){return t&&t.slice(0,function(t){for(var i=t.length;i--&&hu.test(t.charAt(i)););return i}(t)+1).replace(xu,"")};var _u=/^[-+]0x[0-9a-f]+$/i,Du=/^0b[01]+$/i,bu=/^0o[0-7]+$/i,Su=parseInt;const Tu=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||(0,It.Z)(t)&&"[object Symbol]"==(0,Oe.Z)(t)}(t))return NaN;if((0,At.Z)(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=(0,At.Z)(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=vu(t);var e=Du.test(t);return e||bu.test(t)?Su(t.slice(2),e?2:8):_u.test(t)?NaN:+t},Eu=function(t){var i=function(t){return t?1/0===(t=Tu(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),e=i%1;return i==i?e?i-e:i:0},Ve=function(t,i,e){return i=(e?function(t,i,e){if(!(0,At.Z)(e))return!1;var n=typeof i;return!!("number"==n?(0,Li.Z)(e)&&(0,uu.Z)(i,e.length):"string"==n&&i in e)&&(0,_e.Z)(e[i],t)}(t,i,e):void 0===i)?1:Eu(i),((0,ht.Z)(t)?au:cu)(t,i)};function Bu(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}let Iu=(()=>{class t extends ne{constructor(e,n,r){super(e,n),this.network1And2Graph=r,this.name="Forced Choice",this.numDifferentProbeTrials=5,this.numIdkProbeTrials=5,this.numIdkTrainingTrials=6,this.numProbeTrials=10,this.probeFailuresAllotted=2,this.probesFailed=0,this.trainingFailuresAllotted=2,this.trainingsFailed=0}get numTrainingTrials(){if(!this.studyConfig)throw Error("Study configuration is undefined");return this.studyConfig.iCannotKnow?18:12}createTrials(){const{studyConfig:e}=this;if(!e)throw Error("Study studyConfig not defined");const n=Ne(e,f.bR.same),r=Ne(e,f.bR.different),l=Ne(e,f.bR.iCannotKnow),o=this.network1And2Graph.identities.filter(y=>1===y.stimuli[0].network),a=(0,Z.Z)([o,o].flat().map(y=>Object.assign(Object.assign({},y),{cueComponentConfigs:n}))),d=(0,Z.Z)([this.network1And2Graph.trained,this.network1And2Graph.mutuallyEntailed].flat().map(y=>Object.assign(Object.assign({},y),{cueComponentConfigs:r}))),g=(0,Z.Z)([this.network1And2Graph.combinatoriallyEntailed.filter(y=>!(2===y.stimuli[0].network&&2===y.stimuli[1].network))].flat().map(y=>Object.assign(Object.assign({},y),{cueComponentConfigs:l}))),x=e.iCannotKnow?a.concat(d,Ve(g,this.numIdkTrainingTrials)):a.concat(d);if(x.length>this.numTrainingTrials)throw Error(`Training trials length "${x.length}" is greater than specified length "${this.numTrainingTrials}"`);const m=(0,Z.Z)(te(Ve(d,this.numDifferentProbeTrials)).concat(te(Ve(g,this.numIdkProbeTrials))).map(y=>(y.cueComponentConfigs=function(t,i,e){return(0,Z.Z)(new Array(2).fill(void 0).map(()=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[i],value:i,viewValue:se.upper(i)})).concat(new Array(2).fill(void 0).map(()=>({isArbitrary:t.cueType===f.j8.arbitrary,fileName:t.cueType===f.j8.nonArbitrary?f.Sg:f.FC[e],value:e,viewValue:se.upper(e)}))))}(e,f.bR.different,f.bR.iCannotKnow),y)));if(m.length>this.numProbeTrials)throw Error(`Probe trials length "${m.length}" is greater than specified length "${this.numIdkProbeTrials}"`);return e.iCannotKnow?x.concat(m):x}feedbackEnabled(){return this.index<this.numTrainingTrials}nextTrial(){this.trialNum===this.numTrainingTrials&&100!==this.percentCorrect?(this.trainingsFailed++,this.incrementTrainingAttempts(),this.trainingsFailed>=this.trainingFailuresAllotted?this.failed():this.retry()):this.trialNum===this.numProbeTrials+this.numTrainingTrials&&100!==this.percentCorrect?(this.probesFailed++,this.incrementProbeAttempts(),this.probesFailed>=this.probeFailuresAllotted?this.failed():this.retry()):(this.trialNum>=this.numTrainingTrials&&(this.trainingsFailed=0),super.nextTrial())}ngOnInit(){this.start()}retry(){this.incrementAttempt(),this.setVisibility(!1,Y),this.prompt(this.retryInstructions,!1,V+(this.feedBackShown?tt:Y)).subscribe(()=>{this.feedBackShown=!1,this.setVisibility(!0,0),this.nextTrial()}),this.reset()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Q),s.Y36(dt.r),s.Y36(on))},t.\u0275cmp=s.Xpm({type:t,selectors:[["forced-choice-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,Bu,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[p.O5,H],styles:[""],data:{animation:[]}}),t})();function le(t){var i=-1,e=null==t?0:t.length;for(this.__data__=new Ri;++i<e;)this.add(t[i])}le.prototype.add=le.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},le.prototype.has=function(t){return this.__data__.has(t)};const Vu=le,$u=function(t,i){for(var e=-1,n=null==t?0:t.length;++e<n;)if(i(t[e],e,t))return!0;return!1},Qu=function(t,i){return t.has(i)},_n=function(t,i,e,n,r,l){var o=1&e,a=t.length,d=i.length;if(a!=d&&!(o&&d>a))return!1;var g=l.get(t),x=l.get(i);if(g&&x)return g==i&&x==t;var m=-1,y=!0,v=2&e?new Vu:void 0;for(l.set(t,i),l.set(i,t);++m<a;){var b=t[m],w=i[m];if(n)var O=o?n(w,b,m,i,t,l):n(b,w,m,t,i,l);if(void 0!==O){if(O)continue;y=!1;break}if(v){if(!$u(i,function(C,N){if(!Qu(v,N)&&(b===C||r(b,C,e,n,l)))return v.push(N)})){y=!1;break}}else if(b!==w&&!r(b,w,e,n,l)){y=!1;break}}return l.delete(t),l.delete(i),y},Wu=function(t){var i=-1,e=Array(t.size);return t.forEach(function(n,r){e[++i]=[r,n]}),e},Xu=function(t){var i=-1,e=Array(t.size);return t.forEach(function(n){e[++i]=n}),e};var Dn=Wt.Z?Wt.Z.prototype:void 0,He=Dn?Dn.valueOf:void 0;var xg=Object.prototype.hasOwnProperty;var Ag=u(8137),bn="[object Arguments]",Sn="[object Array]",oe="[object Object]",Fn=Object.prototype.hasOwnProperty;const Dg=function(t,i,e,n,r,l){var o=(0,ht.Z)(t),a=(0,ht.Z)(i),d=o?Sn:Bt(t),g=a?Sn:Bt(i),x=(d=d==bn?oe:d)==oe,m=(g=g==bn?oe:g)==oe,y=d==g;if(y&&(0,Le.Z)(t)){if(!(0,Le.Z)(i))return!1;o=!0,x=!1}if(y&&!x)return l||(l=new qt),o||(0,Ag.Z)(t)?_n(t,i,e,n,r,l):function(t,i,e,n,r,l,o){switch(e){case"[object DataView]":if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=i.byteLength||!l(new Ut(t),new Ut(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,_e.Z)(+t,+i);case"[object Error]":return t.name==i.name&&t.message==i.message;case"[object RegExp]":case"[object String]":return t==i+"";case"[object Map]":var a=Wu;case"[object Set]":if(a||(a=Xu),t.size!=i.size&&!(1&n))return!1;var g=o.get(t);if(g)return g==i;n|=2,o.set(t,i);var x=_n(a(t),a(i),n,r,l,o);return o.delete(t),x;case"[object Symbol]":if(He)return He.call(t)==He.call(i)}return!1}(t,i,d,e,n,r,l);if(!(1&e)){var v=x&&Fn.call(t,"__wrapped__"),b=m&&Fn.call(i,"__wrapped__");if(v||b){var w=v?t.value():t,O=b?i.value():i;return l||(l=new qt),r(w,O,e,n,l)}}return!!y&&(l||(l=new qt),function(t,i,e,n,r,l){var o=1&e,a=Fe(t),d=a.length;if(d!=Fe(i).length&&!o)return!1;for(var m=d;m--;){var y=a[m];if(!(o?y in i:xg.call(i,y)))return!1}var v=l.get(t),b=l.get(i);if(v&&b)return v==i&&b==t;var w=!0;l.set(t,i),l.set(i,t);for(var O=o;++m<d;){var C=t[y=a[m]],N=i[y];if(n)var de=o?n(N,C,y,i,t,l):n(C,N,y,t,i,l);if(!(void 0===de?C===N||r(C,N,e,n,l):de)){w=!1;break}O||(O="constructor"==y)}if(w&&!O){var ce=t.constructor,ue=i.constructor;ce!=ue&&"constructor"in t&&"constructor"in i&&!("function"==typeof ce&&ce instanceof ce&&"function"==typeof ue&&ue instanceof ue)&&(w=!1)}return l.delete(t),l.delete(i),w}(t,i,e,n,r,l))},bg=function Tn(t,i,e,n,r){return t===i||(null==t||null==i||!(0,It.Z)(t)&&!(0,It.Z)(i)?t!=t&&i!=i:Dg(t,i,e,n,Tn,r))},Fg=function(t,i){return bg(t,i)};function Tg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}if(2&t){const e=s.oxw();s.Q6J("studyConfig",e.studyConfig)}}const ae=(t,i)=>t?ae(i%t,t):i,Mg=(t,i)=>t*i/ae(t,i);let Gg=(()=>{class t extends ne{constructor(e,n,r){super(e,n),this.network5And6Graph=r,this.correctCount={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0},this.index=-1,this.maxShuffles=2500,this.name="Operant Choice",this.numAllottedTimeouts=1,this.numTimeouts=0,this.stimuliComparisonCopies=2}get isComplete(){return this.sequentialCorrect>=2*this.trials.length||this.meetsMasterCriterion1&&this.meetsMasterCriterion2}get masterCriterion(){if(!this.studyConfig)throw Error("Study configuration is undefined");return{sequentialCorrectTarget:this.studyConfig.iCannotKnow?56:35,sequentialCorrectTargetAchieved:!1,comparisonTarget:24,iCannotKnowTarget:this.studyConfig.iCannotKnow?18:0,sameTarget:6}}get meetsMasterCriterion1(){const{sequentialCorrectTarget:e,sequentialCorrectTargetAchieved:n,comparisonTarget:r,iCannotKnowTarget:l,sameTarget:o}=this.masterCriterion,{greaterThan:a,iCannotKnow:d,lessThan:g,same:x}=this.correctCount;return this.sequentialCorrect===e&&(this.masterCriterion.sequentialCorrectTargetAchieved=!0),n||x>=o&&a+g>=r&&d>=l}get meetsMasterCriterion2(){return!!this.correctShownTargets&&this.correctCount.same>=this.correctShownTargets.same&&this.correctCount.lessThan>=this.correctShownTargets.lessThan&&this.correctCount.greaterThan>=this.correctShownTargets.greaterThan&&this.correctCount.iCannotKnow>=this.correctShownTargets.iCannotKnow}complete(){this.timeout&&clearTimeout(this.timeout),super.complete()}createTrials(){var e,n;const{studyConfig:r}=this;if(!r)throw Error("Study configuration is undefined");this.network5And6Graph.includeRelationsBetweenNetworks=r.iCannotKnow;const l=[this.network5And6Graph.trained,this.network5And6Graph.mutuallyEntailed].flat().concat(r.iCannotKnow?this.network5And6Graph.combinatoriallyEntailed:[]),o=f.Tz.reduce((v,b)=>Object.assign(Object.assign({},v),{[b]:l.filter(w=>w.relation===b)}),{}),a=f.Tz.reduce((v,b)=>Object.assign(Object.assign({},v),{[b]:l.filter(w=>w.relation===b).length}),{}),d=Object.values(a).filter(v=>v>0).reduce(Mg),g=f.Tz.reduce((v,b)=>Object.assign(Object.assign({},v),{[b]:d/l.filter(w=>w.relation===b).length}),{}),x=Object.values(r.balance).filter(v=>v).reduce(ae);this.configBalanceDividedByGcd={different:0,same:r.balance.same/x,greaterThan:r.balance.greaterThan/x,lessThan:r.balance.lessThan/x,iCannotKnow:(null===(e=r.balance)||void 0===e?void 0:e.iCannotKnow)?r.balance.iCannotKnow/x:0};const m={different:0,same:r.balance.same*g.same,greaterThan:r.balance.greaterThan*g.greaterThan,lessThan:r.balance.lessThan*g.lessThan,iCannotKnow:(null===(n=r.balance)||void 0===n?void 0:n.iCannotKnow)?r.balance.iCannotKnow*g.iCannotKnow:0},y=Object.values(m).filter(v=>v).reduce(ae);for(const v of f.Tz){if(0===a[v])continue;const b=m[v]/y*this.stimuliComparisonCopies;for(let w=0;w<b;w++)this.trials=this.trials.concat(o[v].flat().map(O=>Object.assign(Object.assign({},O),{cueComponentConfigs:re(r)})))}return this.shuffleUntilNoTriplicatesInARow(),this.trials}feedbackEnabled(){return!0}grade(e){var n,r,l,o,a,d,g,x,m,y;const v=(null===(n=null==e?void 0:e.cue)||void 0===n?void 0:n.value)===this.trial.relation;if((null===(r=null==e?void 0:e.cue)||void 0===r?void 0:r.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++,this.correctCount[e.cue.value]++):(this.sequentialCorrect=0,this.incorrect++),this.meetsMasterCriterion1&&!this.correctShownTargets)for(this.correctShownTargets={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0};this.correctShownTargets.same<this.correctCount.same||this.correctShownTargets.greaterThan<this.correctCount.greaterThan||this.correctShownTargets.lessThan<this.correctCount.lessThan||this.correctShownTargets.iCannotKnow<this.correctCount.iCannotKnow;){if(!this.configBalanceDividedByGcd)throw Error("Config balance has not been created");this.correctShownTargets={different:0,same:(null===(l=this.correctShownTargets)||void 0===l?void 0:l.same)+(null===(o=this.configBalanceDividedByGcd)||void 0===o?void 0:o.same),greaterThan:(null===(a=this.correctShownTargets)||void 0===a?void 0:a.greaterThan)+(null===(d=this.configBalanceDividedByGcd)||void 0===d?void 0:d.greaterThan),lessThan:(null===(g=this.correctShownTargets)||void 0===g?void 0:g.lessThan)+(null===(x=this.configBalanceDividedByGcd)||void 0===x?void 0:x.lessThan),iCannotKnow:(null===(m=this.correctShownTargets)||void 0===m?void 0:m.iCannotKnow)+(null===(y=this.configBalanceDividedByGcd)||void 0===y?void 0:y.iCannotKnow)}}return this.correctShownTargets&&v&&(null==e?void 0:e.cue)?this.correctCount[e.cue.value]<=this.correctShownTargets[e.cue.value]?"CORRECT":void 0:v?"CORRECT":"WRONG"}nextTrial(){this.isComplete?this.complete():(this.index==this.trials.length-1&&(this.setVisibility(!0,0),this.index=-1),super.nextTrial())}ngOnInit(){this.createTrials(),this.start()}reset(){this.correctCount={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0},this.index=-1,this.correct=0,this.incorrect=0}retry(){this.incrementAttempt(),this.setVisibility(!1,Y),this.prompt(this.retryInstructions,!1,V+(this.feedBackShown?tt:Y)).subscribe(()=>{this.feedBackShown=!1,this.setVisibility(!0,0),this.nextTrial(),this.setTimeout()}),this.reset()}setTimeout(){if(!this.studyConfig)throw Error("Study configuration is undefined");this.timeout&&clearTimeout(this.timeout),this.failSafeDuration=2*this.trials.length*(1e3*this.studyConfig.trialTimeoutSeconds+1e3),this.timeout=setTimeout(()=>{var e;null===(e=this.trialComponent)||void 0===e||e.clearTimer(),this.numTimeouts++,this.numTimeouts>this.numAllottedTimeouts?this.failed():this.retry()},this.failSafeDuration)}shuffleUntilNoTriplicatesInARow(){let e,n=0;for(let r=0;r<this.maxShuffles;r++){this.trials=(0,Z.Z)(this.trials);for(const l of this.trials)if(Fg(l.stimuli,null==e?void 0:e.stimuli)?n++:(e=l,n=0),3===n)break;if(n)break}n>=3&&(this.containsSequentialTriplicates=!0)}start(){this.prompt(this.startInstructions,!1,V).subscribe(()=>{this.setTimeout(),this.setVisibility(!0,0),this.nextTrial()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Q),s.Y36(dt.r),s.Y36(an))},t.\u0275cmp=s.Xpm({type:t,selectors:[["operant-choice-block"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"studyConfig","completed",4,"ngIf"],[3,"studyConfig","completed"]],template:function(e,n){1&e&&s.YNc(0,Tg,1,1,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},directives:[p.O5,H],styles:[""],data:{animation:[]}}),t})();const Rg=["container"];function Og(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"mat-card",2),s.TgZ(1,"mat-card-title"),s._uU(2,"Welcome"),s.qZA(),s.TgZ(3,"mat-card-content",3),s._uU(4),s.qZA(),s.TgZ(5,"mat-card-actions"),s.TgZ(6,"button",4),s.NdJ("tap",function(){return s.CHM(e),s.oxw().nextBlock()}),s._uU(7,"CONTINUE"),s.qZA(),s.qZA(),s.qZA()}if(2&t){const e=s.oxw();s.xp6(4),s.hij(" ",e.instructions," ")}}let ct=class{constructor(i,e,n,r){this.componentFactoryResolver=i,this.dialog=e,this.reportSvc=n,this.studyConfigSvc=r,this.blocks=[ru,Iu,Gg,iu],this.instructions=nu.i,this.showInstructions=!0}createBlockComponent(i){if(!this.container)throw Error("Container is undefined");if(!this.studyConfig)throw Error("Study configuration is undefined");const e=this.componentFactoryResolver.resolveComponentFactory(i);this.container.clear();const r=this.container.createComponent(e).instance;r.studyConfig=this.studyConfig,r.completed.pipe((0,ee.P)(),(0,K.b)(()=>this.nextBlock()),(0,_t.t)(this)).subscribe()}nextBlock(){this.showInstructions=!1;const i=this.blocks.shift();i?this.createBlockComponent(i):this.showStudyCompleteDialog()}ngOnInit(){this.studyConfigSvc.studyConfig.pipe((0,K.b)(i=>this.studyConfig=i)).subscribe()}showStudyCompleteDialog(){(0,Dt.H)(V).pipe((0,ee.P)(),(0,K.b)(()=>this.reportSvc.sendReport()),(0,cn.w)(()=>this.dialog.open(gn,je({text:"THANKS FOR PARTICIPATING!",disableClose:!0})).afterClosed())).subscribe()}};ct.\u0275fac=function(i){return new(i||ct)(s.Y36(s._Vd),s.Y36(Q),s.Y36(dt.r),s.Y36(yn.R))},ct.\u0275cmp=s.Xpm({type:ct,selectors:[["study"]],viewQuery:function(i,e){if(1&i&&s.Gf(Rg,7,s.s_b),2&i){let n;s.iGM(n=s.CRH())&&(e.container=n.first)}},features:[s._Bn([])],decls:3,vars:1,consts:[["style","max-width: 400px",4,"ngIf"],["container",""],[2,"max-width","400px"],[2,"white-space","pre-line"],["color","primary","onclick","blur()","mat-button","",3,"tap"]],template:function(i,e){1&i&&(s.YNc(0,Og,8,1,"mat-card",0),s.GkF(1,null,1)),2&i&&s.Q6J("ngIf",e.showInstructions)},directives:[p.O5,q.a8,q.n5,q.dn,q.hq,jt.lW],styles:["[_nghost-%COMP%]{-webkit-box-align:center;-webkit-box-pack:center;align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}.mat-card[_ngcontent-%COMP%]{max-height:100%}.mat-card-content[_ngcontent-%COMP%]{height:calc(100% - 80px);overflow:auto}"]}),ct=(0,wt.gn)([(0,_t.c)(),(0,wt.w6)("design:paramtypes",[s._Vd,Q,dt.r,yn.R])],ct);const Eg=[{path:"",component:ct}];let Lg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[dn.Bz.forChild(Eg)],dn.Bz]}),t})();const Pt=new s.OlP("Stimulus case");let Bg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[on,ke,an,{provide:Pt,useValue:Nc()}],imports:[[so,p.ez,ro,jt.ot,q.QW,lo,oo,Lg,ao]]}),t})()},2151:function(ge){(function(){"use strict";var et=function(c,h){return c.replace(/(^|-)/g,"$1\\u"+(h=h||"")).replace(/,/g,"\\u"+h)},u=et("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),p="a-z"+et("DF-F6,F8-FF","00"),s="A-Z"+et("C0-D6,D8-DE","00"),q=function(c,h,D,M){return c=c||u,h=h||p,D=D||s,M=M||"A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",{capitalize:new RegExp("(^|["+c+"])(["+h+"])","g"),pascal:new RegExp("(^|["+c+"])+(["+h+D+"])","g"),fill:new RegExp("["+c+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+h+"])","g"),improper:new RegExp("\\b("+M+")\\b","g"),relax:new RegExp("([^"+D+"])(["+D+"]*)(["+D+"])(?=[^"+D+"]|$)","g"),upper:new RegExp("^[^"+h+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+c+"]")}},E=q(),A={re:E,unicodes:et,regexps:q,types:[],up:String.prototype.toUpperCase,low:String.prototype.toLowerCase,cap:function(c){return A.up.call(c.charAt(0))+c.slice(1)},decap:function(c){return A.low.call(c.charAt(0))+c.slice(1)},deapostrophe:function(c){return c.replace(E.apostrophe,"")},fill:function(c,h,D){return null!=h&&(c=c.replace(E.fill,function(M,B){return B?h+B:""})),D&&(c=A.deapostrophe(c)),c},prep:function(c,h,D,M){if(c=null==c?"":c+"",!M&&E.upper.test(c)&&(c=A.low.call(c)),!h&&!E.hole.test(c)){var B=A.fill(c," ");E.hole.test(B)&&(c=B)}return!D&&!E.room.test(c)&&(c=c.replace(E.relax,A.relax)),c},relax:function(c,h,D,M){return h+" "+(D?D+" ":"")+M}},I={_:A,of:function(c){for(var h=0,D=A.types.length;h<D;h++)if(I[A.types[h]].apply(I,arguments)===c)return A.types[h]},flip:function(c){return c.replace(/\w/g,function(h){return(h==A.up.call(h)?A.low:A.up).call(h)})},random:function(c){return c.replace(/\w/g,function(h){return(Math.round(Math.random())?A.up:A.low).call(h)})},type:function(c,h){I[c]=h,A.types.push(c)}},it={lower:function(c,h,D){return A.fill(A.low.call(A.prep(c,h)),h,D)},snake:function(c){return I.lower(c,"_",!0)},constant:function(c){return I.upper(c,"_",!0)},camel:function(c){return A.decap(I.pascal(c))},kebab:function(c){return I.lower(c,"-",!0)},upper:function(c,h,D){return A.fill(A.up.call(A.prep(c,h,!1,!0)),h,D)},capital:function(c,h,D){return A.fill(A.prep(c).replace(E.capitalize,function(M,B,W){return B+A.up.call(W)}),h,D)},header:function(c){return I.capital(c,"-",!0)},pascal:function(c){return A.fill(A.prep(c,!1,!0).replace(E.pascal,function(h,D,M){return A.up.call(M)}),"",!0)},title:function(c){return I.capital(c).replace(E.improper,function(h,D,M,B){return M>0&&M<B.lastIndexOf(" ")?A.low.call(h):h})},sentence:function(c,h,D){return c=I.lower(c).replace(E.sentence,function(M,B,W){return B+A.up.call(W)}),h&&h.forEach(function(M){c=c.replace(new RegExp("\\b"+I.lower(M)+"\\b","g"),A.cap)}),D&&D.forEach(function(M){c=c.replace(new RegExp("(\\b"+I.lower(M)+"\\. +)(\\w)"),function(B,W,bt){return W+A.low.call(bt)})}),c}};for(var z in it.squish=it.pascal,I.default=I,it)I.type(z,it[z]);var K="function"==typeof K?K:function(){};K(ge.exports?ge.exports=I:this.Case=I)}).call(this)}}]);