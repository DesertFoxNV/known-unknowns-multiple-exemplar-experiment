(self.webpackChunkknown_unknowns_multiple_exemplar_experiment=self.webpackChunkknown_unknowns_multiple_exemplar_experiment||[]).push([[498],{6498:(ie,J,c)=>{"use strict";c.r(J),c.d(J,{StudyModule:()=>Dg});var x=c(2057),s=c(793),$=c(9765),S=(c(6215),c(7574),c(6682),c(5435)),X=c(3342);const pt={provide:s.tb,useFactory:function(t,i){return()=>{if((0,x.NF)(i)){const e=Array.from(t.querySelectorAll(`[class*=${u}]`)),n=/\bflex-layout-.+?\b/g;e.forEach(r=>{r.classList.contains(`${u}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(n,"")})}}},deps:[x.K0,s.Lbi],multi:!0},u="flex-layout-";let h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[pt]}),t})();const j={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},P=new s.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>j}),z=new s.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),ne=new s.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});c(9490),c(6782),c(1211);let ti=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[h]]}),t})();var vt=c(6794);let si=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[h,vt.vT]]}),t})(),gi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[h]]}),t})(),fi=(()=>{class t{constructor(e,n){(0,x.PM)(n)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,n=[]){return{ngModule:t,providers:e.serverLoaded?[{provide:P,useValue:Object.assign(Object.assign({},j),e)},{provide:ne,useValue:n,multi:!0},{provide:z,useValue:!0}]:[{provide:P,useValue:Object.assign(Object.assign({},j),e)},{provide:ne,useValue:n,multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(z),s.LFG(s.Lbi))},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[si,ti,gi],si,ti,gi]}),t})();var tt=c(933),et=c(2414),it=c(7935),Rl=c(1439),Gl=c(5917),ae=c(5257),Ol=c(9761),oe=c(9642),w=c(6083),hi=c(3328),mi=c(2371);function Ll(t,i){}class de{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const El={dialogContainer:(0,w.X$)("dialogContainer",[(0,w.SB)("void, exit",(0,w.oB)({opacity:0,transform:"scale(0.7)"})),(0,w.SB)("enter",(0,w.oB)({transform:"none"})),(0,w.eR)("* => enter",(0,w.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,w.oB)({transform:"none",opacity:1}))),(0,w.eR)("* => void, * => exit",(0,w.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,w.oB)({opacity:0})))])};let Bl=(()=>{class t extends et.en{constructor(e,n,r,l,a,o){super(),this._elementRef=e,this._focusTrapFactory=n,this._changeDetectorRef=r,this._config=a,this._focusMonitor=o,this._animationStateChanged=new s.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=d=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(d)),this._ariaLabelledBy=a.ariaLabelledBy||null,this._document=l}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const n=(0,oe.ht)(),r=this._elementRef.nativeElement;(!n||n===this._document.body||n===r||r.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,oe.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=(0,oe.ht)();return e===n||e.contains(n)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(mi.qV),s.Y36(s.sBO),s.Y36(x.K0,8),s.Y36(de),s.Y36(mi.tE))},t.\u0275dir=s.lG2({type:t,viewQuery:function(e,n){if(1&e&&s.Gf(et.Pl,7),2&e){let r;s.iGM(r=s.CRH())&&(n._portalOutlet=r.first)}},features:[s.qOj]}),t})(),Il=(()=>{class t extends Bl{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:n}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:e,totalTime:n}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=s.n5z(t)))(n||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,n){1&e&&s.WFA("@dialogContainer.start",function(l){return n._onAnimationStart(l)})("@dialogContainer.done",function(l){return n._onAnimationDone(l)}),2&e&&(s.Ikx("id",n._id),s.uIk("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),s.d8E("@dialogContainer",n._state))},features:[s.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&s.YNc(0,Ll,0,0,"ng-template",0)},directives:[et.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[El.dialogContainer]}}),t})(),kl=0;class Ct{constructor(i,e,n="mat-dialog-"+kl++){this._overlayRef=i,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new $.xQ,this._afterClosed=new $.xQ,this._beforeClosed=new $.xQ,this._state=0,e._id=n,e._animationStateChanged.pipe((0,S.h)(r=>"opened"===r.state),(0,ae.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe((0,S.h)(r=>"closed"===r.state),(0,ae.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),i.keydownEvents().pipe((0,S.h)(r=>r.keyCode===hi.hY&&!this.disableClose&&!(0,hi.Vb)(r))).subscribe(r=>{r.preventDefault(),ue(this,"keyboard")}),i.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():ue(this,"mouse")})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe((0,S.h)(e=>"closing"===e.state),(0,ae.q)(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(i){let e=this._getPositionStrategy();return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(i="",e=""){return this._overlayRef.updateSize({width:i,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(i){return this._overlayRef.addPanelClass(i),this}removePanelClass(i){return this._overlayRef.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function ue(t,i,e){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=i),t.close(e)}const ce=new s.OlP("MatDialogData"),Pl=new s.OlP("mat-dialog-default-options"),pi=new s.OlP("mat-dialog-scroll-strategy"),Yl={provide:pi,deps:[tt.aV],useFactory:function(t){return()=>t.scrollStrategies.block()}};let Nl=(()=>{class t{constructor(e,n,r,l,a,o,d,g,p){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=l,this._overlayContainer=a,this._dialogRefConstructor=d,this._dialogContainerType=g,this._dialogDataToken=p,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new $.xQ,this._afterOpenedAtThisLevel=new $.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Rl.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Ol.O)(void 0))),this._scrollStrategy=o}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,n){(n=function(t,i){return Object.assign(Object.assign({},i),t)}(n,this._defaultOptions||new de)).id&&this.getDialogById(n.id);const r=this._createOverlay(n),l=this._attachDialogContainer(r,n),a=this._attachDialogContent(e,l,r,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.afterClosed().subscribe(()=>this._removeOpenDialog(a)),this.afterOpened.next(a),l._initializeWithAttachedContent(),a}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const n=this._getOverlayConfig(e);return this._overlay.create(n)}_getOverlayConfig(e){const n=new tt.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachDialogContainer(e,n){const l=s.zs3.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:de,useValue:n}]}),a=new et.C5(this._dialogContainerType,n.viewContainerRef,l,n.componentFactoryResolver);return e.attach(a).instance}_attachDialogContent(e,n,r,l){const a=new this._dialogRefConstructor(r,n,l.id);if(e instanceof s.Rgc)n.attachTemplatePortal(new et.UE(e,null,{$implicit:l.data,dialogRef:a}));else{const o=this._createInjector(l,a,n),d=n.attachComponentPortal(new et.C5(e,l.viewContainerRef,o));a.componentInstance=d.instance}return a.updateSize(l.width,l.height).updatePosition(l.position),a}_createInjector(e,n,r){const l=e&&e.viewContainerRef&&e.viewContainerRef.injector,a=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:n}];return e.direction&&(!l||!l.get(vt.Is,null,s.XFs.Optional))&&a.push({provide:vt.Is,useValue:{value:e.direction,change:(0,Gl.of)()}}),s.zs3.create({parent:l||this._injector,providers:a})}_removeOpenDialog(e){const n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,l)=>{r?l.setAttribute("aria-hidden",r):l.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){let l=n[r];l!==e&&"SCRIPT"!==l.nodeName&&"STYLE"!==l.nodeName&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(tt.aV),s.Y36(s.zs3),s.Y36(void 0),s.Y36(void 0),s.Y36(tt.Xj),s.Y36(void 0),s.Y36(s.DyG),s.Y36(s.DyG),s.Y36(s.OlP))},t.\u0275dir=s.lG2({type:t}),t})(),Gt=(()=>{class t extends Nl{constructor(e,n,r,l,a,o,d){super(e,n,l,o,d,a,Ct,Il,ce)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(tt.aV),s.LFG(s.zs3),s.LFG(x.Ye,8),s.LFG(Pl,8),s.LFG(pi),s.LFG(t,12),s.LFG(tt.Xj))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),$l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[Gt,Yl],imports:[[tt.U8,et.eL,it.BQ],it.BQ]}),t})();var Kl=c(7639);let zl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[x.ez,it.si]]}),t})(),Ql=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[x.ez,it.si]]}),t})(),Zl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[x.ez,fi]]}),t})(),ql=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[x.ez,Kl.QW,zl,Zl,Ql]]}),t})(),Ul=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[x.ez,it.si]]}),t})();var ge=c(8634),yi=c(8049),Wl=c(3190),Jl=c(8002),Xl=c(6839),ta=c(7012);const vi=function(t){var i=t.length;return i?t[(0,ta.Z)(0,i-1)]:void 0};var Ai=c(4724);const na=function(t){return vi((0,Ai.Z)(t))};var at=c(4654);const Ot=function(t){return((0,at.Z)(t)?vi:na)(t)},Ci={lower:"lower",upper:"upper"},ra=Object.values(Ci);function la(){const t=Ot(ra);if(void 0===t)throw Error('Random stimulus case returned "undefined"!');return t}var K=c(7214);const wi=function(t,i,e){return t==t&&(void 0!==e&&(t=t<=e?t:e),void 0!==i&&(t=t>=i?t:i)),t};var _i=c(6889),Di=c(1994);const da=function(t,i){return(0,Di.Z)((0,_i.Z)(t),wi(i,0,t.length))},ca=function(t,i){var e=(0,Ai.Z)(t);return(0,Di.Z)(e,wi(i,0,e.length))};var fe=c(6224),bi=c(8402),ga=c(8078),ot=c(4214);var ma=/\s/;var ya=/^\s+/;const Aa=function(t){return t&&t.slice(0,function(t){for(var i=t.length;i--&&ma.test(t.charAt(i)););return i}(t)+1).replace(ya,"")};var he=c(4796),wt=c(6539);var Da=/^[-+]0x[0-9a-f]+$/i,ba=/^0b[01]+$/i,Sa=/^0o[0-7]+$/i,Fa=parseInt;const Ma=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||(0,wt.Z)(t)&&"[object Symbol]"==(0,he.Z)(t)}(t))return NaN;if((0,ot.Z)(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=(0,ot.Z)(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=Aa(t);var e=ba.test(t);return e||Sa.test(t)?Fa(t.slice(2),e?2:8):Da.test(t)?NaN:+t},Ea=function(t){var i=function(t){return t?1/0===(t=Ma(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),e=i%1;return i==i?e?i-e:i:0},me=function(t,i,e){return i=(e?function(t,i,e){if(!(0,ot.Z)(e))return!1;var n=typeof i;return!!("number"==n?(0,bi.Z)(e)&&(0,ga.Z)(i,e.length):"string"==n&&i in e)&&(0,fe.Z)(e[i],t)}(t,i,e):void 0===i)?1:Ea(i),((0,at.Z)(t)?da:ca)(t,i)},Lt=function(t,i){for(var e=t.length;e--;)if((0,fe.Z)(t[e][0],i))return e;return-1};var Ya=Array.prototype.splice;function dt(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}dt.prototype.clear=function(){this.__data__=[],this.size=0},dt.prototype.delete=function(t){var i=this.__data__,e=Lt(i,t);return!(e<0||(e==i.length-1?i.pop():Ya.call(i,e,1),--this.size,0))},dt.prototype.get=function(t){var i=this.__data__,e=Lt(i,t);return e<0?void 0:i[e][1]},dt.prototype.has=function(t){return Lt(this.__data__,t)>-1},dt.prototype.set=function(t,i){var e=this.__data__,n=Lt(e,t);return n<0?(++this.size,e.push([t,i])):e[n][1]=i,this};const Et=dt;var ut=c(4423),nt=c(309);const _t=(0,ut.Z)(nt.Z,"Map"),Dt=(0,ut.Z)(Object,"create");var go=Object.prototype.hasOwnProperty;var po=Object.prototype.hasOwnProperty;function ct(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}ct.prototype.clear=function(){this.__data__=Dt?Dt(null):{},this.size=0},ct.prototype.delete=function(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},ct.prototype.get=function(t){var i=this.__data__;if(Dt){var e=i[t];return"__lodash_hash_undefined__"===e?void 0:e}return go.call(i,t)?i[t]:void 0},ct.prototype.has=function(t){var i=this.__data__;return Dt?void 0!==i[t]:po.call(i,t)},ct.prototype.set=function(t,i){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Dt&&void 0===i?"__lodash_hash_undefined__":i,this};const Ti=ct,Bt=function(t,i){var e=t.__data__;return function(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}(i)?e["string"==typeof i?"string":"hash"]:e.map};function gt(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}gt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ti,map:new(_t||Et),string:new Ti}},gt.prototype.delete=function(t){var i=Bt(this,t).delete(t);return this.size-=i?1:0,i},gt.prototype.get=function(t){return Bt(this,t).get(t)},gt.prototype.has=function(t){return Bt(this,t).has(t)},gt.prototype.set=function(t,i){var e=Bt(this,t),n=e.size;return e.set(t,i),this.size+=e.size==n?0:1,this};const Mi=gt;function ft(t){var i=this.__data__=new Et(t);this.size=i.size}ft.prototype.clear=function(){this.__data__=new Et,this.size=0},ft.prototype.delete=function(t){var i=this.__data__,e=i.delete(t);return this.size=i.size,e},ft.prototype.get=function(t){return this.__data__.get(t)},ft.prototype.has=function(t){return this.__data__.has(t)},ft.prototype.set=function(t,i){var e=this.__data__;if(e instanceof Et){var n=e.__data__;if(!_t||n.length<199)return n.push([t,i]),this.size=++e.size,this;e=this.__data__=new Mi(n)}return e.set(t,i),this.size=e.size,this};const It=ft;var Ri=c(5427),Yo=c(2753);const kt=function(t,i,e,n){var r=!e;e||(e={});for(var l=-1,a=i.length;++l<a;){var o=i[l],d=n?n(e[o],t[o],o,e,t):void 0;void 0===d&&(d=t[o]),r?(0,Yo.Z)(e,o,d):(0,Ri.Z)(e,o,d)}return e};var pe=c(1163);var $o=c(4741),Gi=c(1550);var Zo=Object.prototype.hasOwnProperty;const Uo=function(t){if(!(0,ot.Z)(t))return function(t){var i=[];if(null!=t)for(var e in Object(t))i.push(e);return i}(t);var i=(0,Gi.Z)(t),e=[];for(var n in t)"constructor"==n&&(i||!Zo.call(t,n))||e.push(n);return e},xe=function(t){return(0,bi.Z)(t)?(0,$o.Z)(t,!0):Uo(t)};var Oi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Li=Oi&&"object"==typeof module&&module&&!module.nodeType&&module,Ei=Li&&Li.exports===Oi?nt.Z.Buffer:void 0,Bi=Ei?Ei.allocUnsafe:void 0;const Ii=function(){return[]};var ad=Object.prototype.propertyIsEnumerable,ki=Object.getOwnPropertySymbols;const ye=ki?function(t){return null==t?[]:(t=Object(t),function(t,i){for(var e=-1,n=null==t?0:t.length,r=0,l=[];++e<n;){var a=t[e];i(a,e,t)&&(l[r++]=a)}return l}(ki(t),function(i){return ad.call(t,i)}))}:Ii,Pi=function(t,i){for(var e=-1,n=i.length,r=t.length;++e<n;)t[r+e]=i[e];return t},ji=(0,c(4184).Z)(Object.getPrototypeOf,Object),Yi=Object.getOwnPropertySymbols?function(t){for(var i=[];t;)Pi(i,ye(t)),t=ji(t);return i}:Ii,Ni=function(t,i,e){var n=i(t);return(0,at.Z)(t)?n:Pi(n,e(t))},ve=function(t){return Ni(t,pe.Z,ye)},Cd=function(t){return Ni(t,xe,Yi)},Ae=(0,ut.Z)(nt.Z,"DataView"),Ce=(0,ut.Z)(nt.Z,"Promise"),we=(0,ut.Z)(nt.Z,"Set"),_e=(0,ut.Z)(nt.Z,"WeakMap");var ht=c(2035),Vi="[object Map]",Hi="[object Promise]",$i="[object Set]",Ki="[object WeakMap]",zi="[object DataView]",Fd=(0,ht.Z)(Ae),Td=(0,ht.Z)(_t),Md=(0,ht.Z)(Ce),Rd=(0,ht.Z)(we),Gd=(0,ht.Z)(_e),st=he.Z;(Ae&&st(new Ae(new ArrayBuffer(1)))!=zi||_t&&st(new _t)!=Vi||Ce&&st(Ce.resolve())!=Hi||we&&st(new we)!=$i||_e&&st(new _e)!=Ki)&&(st=function(t){var i=(0,he.Z)(t),e="[object Object]"==i?t.constructor:void 0,n=e?(0,ht.Z)(e):"";if(n)switch(n){case Fd:return zi;case Td:return Vi;case Md:return Hi;case Rd:return $i;case Gd:return Ki}return i});const bt=st;var Ld=Object.prototype.hasOwnProperty;const Pt=nt.Z.Uint8Array,De=function(t){var i=new t.constructor(t.byteLength);return new Pt(i).set(new Pt(t)),i};var Yd=/\w*$/;var jt=c(5770),Qi=jt.Z?jt.Z.prototype:void 0,Zi=Qi?Qi.valueOf:void 0;const fu=function(t,i,e){var n=t.constructor;switch(i){case"[object ArrayBuffer]":return De(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return function(t,i){var e=i?De(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,i){var e=i?De(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return function(t){var i=new t.constructor(t.source,Yd.exec(t));return i.lastIndex=t.lastIndex,i}(t);case"[object Set]":return new n;case"[object Symbol]":return function(t){return Zi?Object(Zi.call(t)):{}}(t)}};var qi=Object.create;const mu=function(){function t(){}return function(i){if(!(0,ot.Z)(i))return{};if(qi)return qi(i);t.prototype=i;var e=new t;return t.prototype=void 0,e}}();var be=c(4909);var Ui=c(1162),Yt=c(8514),Wi=Yt.Z&&Yt.Z.isMap;const wu=Wi?(0,Ui.Z)(Wi):function(t){return(0,wt.Z)(t)&&"[object Map]"==bt(t)};var Ji=Yt.Z&&Yt.Z.isSet;const Fu=Ji?(0,Ui.Z)(Ji):function(t){return(0,wt.Z)(t)&&"[object Set]"==bt(t)};var Xi="[object Arguments]",tn="[object Function]",en="[object Object]",_={};_[Xi]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object DataView]"]=_["[object Boolean]"]=_["[object Date]"]=_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Map]"]=_["[object Number]"]=_[en]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object Symbol]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Error]"]=_[tn]=_["[object WeakMap]"]=!1;const tc=function Nt(t,i,e,n,r,l){var a,o=1&i,d=2&i,g=4&i;if(e&&(a=r?e(t,n,r,l):e(t)),void 0!==a)return a;if(!(0,ot.Z)(t))return t;var p=(0,at.Z)(t);if(p){if(a=function(t){var i=t.length,e=new t.constructor(i);return i&&"string"==typeof t[0]&&Ld.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!o)return(0,_i.Z)(t,a)}else{var f=bt(t),v=f==tn||"[object GeneratorFunction]"==f;if((0,be.Z)(t))return function(t,i){if(i)return t.slice();var e=t.length,n=Bi?Bi(e):new t.constructor(e);return t.copy(n),n}(t,o);if(f==en||f==Xi||v&&!r){if(a=d||v?{}:function(t){return"function"!=typeof t.constructor||(0,Gi.Z)(t)?{}:mu(ji(t))}(t),!o)return d?function(t,i){return kt(t,Yi(t),i)}(t,function(t,i){return t&&kt(i,xe(i),t)}(a,t)):function(t,i){return kt(t,ye(t),i)}(t,function(t,i){return t&&kt(i,(0,pe.Z)(i),t)}(a,t))}else{if(!_[f])return r?t:{};a=fu(t,f,o)}}l||(l=new It);var b=l.get(t);if(b)return b;l.set(t,a),Fu(t)?t.forEach(function(E){a.add(Nt(E,i,e,E,t,l))}):wu(t)&&t.forEach(function(E,C){a.set(C,Nt(E,i,e,C,t,l))});var L=p?void 0:(g?d?Cd:ve:d?xe:pe.Z)(t);return function(t,i){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==i(t[e],e,t););}(L||t,function(E,C){L&&(E=t[C=E]),(0,Ri.Z)(a,C,Nt(E,i,e,C,t,l))}),a},Vt=function(t){return tc(t,5)},nn={greaterThan:{same:"greaterThan",greaterThan:"greaterThan",lessThan:"iCannotKnow",iCannotKnow:"iCannotKnow"},lessThan:{same:"lessThan",greaterThan:"iCannotKnow",lessThan:"lessThan",iCannotKnow:"iCannotKnow"},same:{same:"same",greaterThan:"greaterThan",lessThan:"lessThan",iCannotKnow:"iCannotKnow"},iCannotKnow:{same:"iCannotKnow",greaterThan:"iCannotKnow",lessThan:"iCannotKnow",iCannotKnow:"iCannotKnow"}},sc={same:{same:"same",different:"different",iCannotKnow:"iCannotKnow"},different:{same:"same",different:"different",iCannotKnow:"iCannotKnow"},iCannotKnow:{same:"iCannotKnow",different:"iCannotKnow",iCannotKnow:"iCannotKnow"}},sn={same:"same",lessThan:"greaterThan",greaterThan:"lessThan",iCannotKnow:"iCannotKnow"},rc={same:"same",different:"same",iCannotKnow:"iCannotKnow"};var D=(()=>{return(t=D||(D={})).identity="identity",t.trained="trained",t.mutuallyEntailed="mutually entailed",t.combinatoriallyEntailed="combinatorially entailed",D;var t})();class B extends class{constructor(i,e){this.dest=e,this.src=i}toString(){return`${this.src}->${this.dest}`}}{constructor(i,e,n,r){super(i,e),this.relation=n,this.relationType=r}toString(){return`${this.src} ${this.relation} ${this.dest} (${this.relationType})`}}class Se extends class{constructor(){this.edges=new Map,this.nodes=new Set}addEdge(i){var e;const n=i.src,r=i.dest;if(!this.hasNode(n))throw Error(`addEdge failed source node "${n.toString()}" is not in graph.`);if(!this.hasNode(r))throw Error(`addEdge failed destination node "${r.toString()}" is not in graph.`);if(null===(e=this.edges.get(i.src))||void 0===e?void 0:e.some(l=>l.src===n&&l.dest===r))throw Error(`Add edge failed an edge already exists with src ${n.toString()} => dest ${r.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i))}addNode(i){if(this.nodes.has(i))throw Error(`addNode failed node "${i.toString()}" already exists`);this.nodes.add(i),this.edges.set(i,[])}findPathway(i,e,n,r={nodes:[],edges:[]},l=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===e)return l.concat(r);for(const a of this.getEdgesForNode(i))if(!r.nodes.map(o=>o.toString()).includes(a.dest.toString())){const o=this.findPathway(a.dest,e,a,Vt(r),l);o&&(l=l.concat(o))}return l}getEdgesForNode(i){return this.edges.get(i)||[]}hasNode(i){return this.nodes.has(i)}toString(){return Array.from(this.edges.values()).flat().filter(Boolean).map(i=>i.toString()).join("\n")}}{constructor(i,e,n,r){super(),this.includeRelationsBetweenNetworks=!1,this.selfRelation=i,this.unknownRelation=e,this.reverseDictionary=n,this.combinatorialDictionary=r}get combinatoriallyEntailed(){const i=[],e=[...this.nodes];for(const n of e)for(const r of e){if(n===r||!this.includeRelationsBetweenNetworks&&n.network!==r.network||this.getEdgesForNode(n).find(a=>a.dest===r))continue;const l=this.findPathway(n,r).map(a=>a.edges.map(o=>o.relation)).reduce((a,o,d)=>{const g=[...o];let p=g.shift();for(;g.length;){const f=g.shift();p=this.combinatorialDictionary[p][f]}return a.push(p),o.length=0,a},[]);0===l.length&&l.push(this.unknownRelation),[...new Set(l.filter(a=>a!==this.unknownRelation))].length>1?console.warn(`Multiple relations detected for ${n.toString()} => ${r.toString()} comparison`,l):i.push({relation:l[0],relationType:D.combinatoriallyEntailed,stimuli:[n,r]})}return i}get identities(){return[...this.nodes].map(i=>({relation:this.selfRelation,relationType:D.identity,stimuli:[i,i]}))}get mutuallyEntailed(){return[...this.edges.values()].flat().filter(i=>i.relationType===D.mutuallyEntailed).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}get trained(){return[...this.edges.values()].flat().filter(i=>i.relationType===D.trained).map(i=>({relation:i.relation,relationType:i.relationType,stimuli:[i.src,i.dest]}))}addTrainedAndMutualRelations(i){var e,n;const r=i.src,l=i.dest;if(!this.hasNode(r))throw Error(`Add edge failed source node "${r.toString()}" is not in graph.`);if(!this.hasNode(l))throw Error(`Add edge failed destination node "${l.toString()}" is not in graph.`);if(!(null===(e=this.reverseDictionary)||void 0===e?void 0:e[i.relation]))throw Error(`Could not find inverse of relation ${i.relation}`);if(null===(n=this.edges.get(i.src))||void 0===n?void 0:n.some(a=>a.src===r&&a.dest===l))throw Error(`Add edge failed an edge already exists with src ${r.toString()} => dest ${l.toString()}`);this.edges.set(i.src,this.edges.get(i.src).concat(i)),this.edges.set(i.dest,this.edges.get(i.dest).concat(new B(i.dest,i.src,this.reverseDictionary[i.relation],D.mutuallyEntailed)))}findPathway(i,e,n,r={nodes:[],edges:[]},l=[]){if(r.nodes=r.nodes.concat(i),n&&(r.edges=r.edges.concat(n)),i===e)return l.concat(r);for(const a of this.getEdgesForNode(i))if(!r.nodes.map(o=>o.toString()).includes(a.dest.toString())){const o=this.findPathway(a.dest,e,a,Vt(r),l);o&&(l=l.concat(o))}return l}toString(){return[].concat(this.identities,this.trained,this.mutuallyEntailed,this.combinatoriallyEntailed).flat().map(i=>`${i.relationType}: ${i.stimuli[0]} ${i.relation} ${i.stimuli[1]}`).join("\n")}}class I{constructor(i,e,n=""){this.name=i,this.network=e,this.value=n}repr(){return`new RelationalFrameNode('${this.name}','${this.network}','${this.value}')`}toString(){return`${this.name}${this.network}`}}var m=c(2745);const Fe=["RWK","PGZ","QGK","FNK","ZVB","PWU","PLJ","KNF","GVW","KXL","GRQ","WPQ","BQP","FXX","ZTF","SGG","GQF","VXO","DZF","ZHD","JHH","VQP","JXY","ZVS","HGD","FJX","VHK","JTP","JTS","UHJ","WTZ","CXF","XFH","LWK","NWK","ZRG","FDG","NQC","WPW","YVR","HLJ","WBX","VGH","KXW","XAQ","WQG","DGJ","QUZ","QZX","HWL","DKX","ZDW","RZJ","VGJ","VWL","MKP","JFJ","GQY","BRX","IHG","YVP","SXG","FJC","QKU","WZY","QHJ","YTZ","RHF","YYB","QFH","ZUX","TQT","VZZ","BTQ","DHQ","XLW","VLW","VZJ","GGK","SWK","UFH","GPN","JSX","IQP","QUP","XDG","QWN","CBK","JVH","VXG","YBF","BVY","QZW","UPZ","WMX","XVN","RRX","QTX","DZN","WXP"];function k(t){const i=Ot(Fe);if(void 0===i)throw Error('Random value returned "undefined"!');const e=Fe.indexOf(i);return e>-1&&Fe.splice(e,1),t===Ci.lower?i.toLowerCase():i.toUpperCase()}const N=150,Z=850,V=500,ln={stimuli:[V,2*V],cues:Array(5).fill(3*V)},Me=Math.max(...Object.values(ln).flat())+1e3;class $t{constructor(i,e){this.attempts=0,this.correct=0,this.feedBackShown=!1,this.history=[],this.incorrect=0,this.index=-1,this.trials=[],this.name=i,this.config=e}get isLastTrial(){return this.index===this.trials.length-1}get percentCorrect(){return this.correct/(this.correct+this.incorrect)*100}get trial(){return this.trials[this.index]}get trialNum(){return this.index+1}complete(){var i;this.attempts++,null===(i=this.component)||void 0===i||i.setVisibility(!1,V),this.completed=new Date,setTimeout(()=>{var e;null===(e=this.component)||void 0===e||e.completed.emit()},V+(this.feedBackShown?Z:N))}cueSelected(i){var e,n;this.history.push(Object.assign(Object.assign({},this.trial),{selected:i}));const r=this.grade(i);i?r&&this.feedbackEnabled()?(null===(n=this.component)||void 0===n||n.showFeedback(r),this.feedBackShown=!0):this.feedBackShown=!1:(null===(e=this.component)||void 0===e||e.showFeedback("TIME EXPIRED"),this.feedBackShown=!0),this.nextTrial()}failed(){var i,e;null===(i=this.component)||void 0===i||i.setVisibility(!1),null===(e=this.component)||void 0===e||e.prompt("THANKS FOR PARTICIPATING",!0,V+(this.feedBackShown?Z:N)).subscribe()}feedbackEnabled(){return!1}grade(i){const e=(null==i?void 0:i.cue.value)===this.trial.relation;return(null==i?void 0:i.cue.value)===this.trial.relation?this.correct++:this.incorrect++,console.log("correct",this.correct),console.log("incorrect",this.incorrect),console.log("correctPercentage",this.percentCorrect),e?"CORRECT":"WRONG"}nextTrial(){var i,e;-1===this.index&&(this.started=new Date),this.index!==this.trials.length-1?(this.index++,null===(i=this.component)||void 0===i||i.showTrial(this.trial,this.feedBackShown?Z:0),null===(e=this.component)||void 0===e||e.trialCompleted.pipe((0,yi.P)()).subscribe(n=>this.cueSelected(n))):this.complete()}reset(){this.index=-1,this.correct=0,this.incorrect=0,this.trials=this.createTrials()}start(i){this.component=i,0===this.trials.length&&this.reset(),i.prompt("CLICK TO START",!1,V).subscribe(()=>{var e;null===(e=this.component)||void 0===e||e.setVisibility(!0,0),this.nextTrial()})}}var Kt=c(2151);function Re(t,i){return new Array(t.iCannotKnow?4:3).fill(void 0).map(()=>({isArbitrary:t.cueType===m.j8.arbitrary,fileName:t.cueType===m.j8.nonArbitrary?m.Sg:m.FC[i],value:i,viewValue:Kt.upper(i)}))}function zt(t){return(0,K.Z)(t.iCannotKnow?m.Tz:m.do).map(e=>({isArbitrary:t.cueType===m.j8.arbitrary,fileName:t.cueType===m.j8.nonArbitrary?m.Sg:m.FC[e],value:e,viewValue:Kt.upper(e)}))}class dc extends $t{constructor(i){super("Forced Choice",i),this.numDifferentProbeTrials=5,this.numIdkProbeTrials=5,this.numIdkTrainingTrials=6,this.numProbeTrials=10,this.numTrainingTrials=this.config.iCannotKnow?18:12,this.probeFailuresAllotted=2,this.probesFailed=0,this.trainingFailuresAllotted=2,this.trainingsFailed=0,this.graph=this.createGraph(i)}createGraph(i){const e=new Se("same","iCannotKnow",rc,sc);e.includeRelationsBetweenNetworks=!0;const n=new I("A",1,k(i.stimulusCase)),r=new I("B",1,k(i.stimulusCase)),l=new I("C",1,k(i.stimulusCase));e.addNode(n),e.addNode(r),e.addNode(l),e.addEdge(new B(n,r,"different",D.trained)),e.addEdge(new B(n,l,"different",D.trained)),e.addEdge(new B(r,n,"different",D.trained)),e.addEdge(new B(r,l,"different",D.trained)),e.addEdge(new B(l,n,"different",D.trained)),e.addEdge(new B(l,r,"different",D.trained));const a=new I("D",2,k(i.stimulusCase)),o=new I("E",2,k(i.stimulusCase)),d=new I("F",2,k(i.stimulusCase));return e.addNode(a),e.addNode(o),e.addNode(d),e}createTrials(){const i=Re(this.config,m.bR.same),e=Re(this.config,m.bR.different),n=Re(this.config,m.bR.iCannotKnow),r=this.graph.identities.filter(p=>1===p.stimuli[0].network),l=(0,K.Z)([r,r].flat().map(p=>Object.assign(Object.assign({},p),{cueComponentConfigs:i}))),a=(0,K.Z)([this.graph.trained,this.graph.mutuallyEntailed].flat().map(p=>Object.assign(Object.assign({},p),{cueComponentConfigs:e}))),o=(0,K.Z)([this.graph.combinatoriallyEntailed.filter(p=>!(2===p.stimuli[0].network&&2===p.stimuli[1].network))].flat().map(p=>Object.assign(Object.assign({},p),{cueComponentConfigs:n}))),d=this.config.iCannotKnow?l.concat(a,me(o,this.numIdkTrainingTrials)):l.concat(a);if(d.length>this.numTrainingTrials)throw Error(`Training trials length "${d.length}" is greater than specified length "${this.numTrainingTrials}"`);const g=(0,K.Z)(Vt(me(a,this.numDifferentProbeTrials)).concat(Vt(me(o,this.numIdkProbeTrials))).map(p=>(p.cueComponentConfigs=function(t,i,e){return(0,K.Z)(new Array(2).fill(void 0).map(()=>({isArbitrary:t.cueType===m.j8.arbitrary,fileName:t.cueType===m.j8.nonArbitrary?m.Sg:m.FC[i],value:i,viewValue:Kt.upper(i)})).concat(new Array(2).fill(void 0).map(()=>({isArbitrary:t.cueType===m.j8.arbitrary,fileName:t.cueType===m.j8.nonArbitrary?m.Sg:m.FC[e],value:e,viewValue:Kt.upper(e)}))))}(this.config,m.bR.different,m.bR.iCannotKnow),p)));if(g.length>this.numProbeTrials)throw Error(`Probe trials length "${g.length}" is greater than specified length "${this.numIdkProbeTrials}"`);return this.config.iCannotKnow?d.concat(g):d}feedbackEnabled(){return this.index<this.numTrainingTrials}nextTrial(){console.log("block name",this.name),this.trialNum===this.numTrainingTrials&&(this.trainingFailuresAllotted=0),this.trialNum===this.numTrainingTrials&&100!==this.percentCorrect?(this.trainingsFailed++,console.log("training failed",this.trainingsFailed),this.trainingsFailed===this.trainingFailuresAllotted?this.failed():this.retry()):this.trialNum===this.numProbeTrials+this.numTrainingTrials&&100!==this.percentCorrect?(this.probesFailed++,console.log("probes failed",this.probesFailed),this.probesFailed===this.probeFailuresAllotted?this.failed():this.retry()):super.nextTrial()}retry(){var i,e;this.attempts++,null===(i=this.component)||void 0===i||i.setVisibility(!1),null===(e=this.component)||void 0===e||e.prompt("CLICK TO TRY AGAIN",!1,V+(this.feedBackShown?Z:N)).subscribe(()=>{var n;this.feedBackShown=!1,null===(n=this.component)||void 0===n||n.setVisibility(!0,0),this.nextTrial()}),this.reset()}}function Qt(t){var i=-1,e=null==t?0:t.length;for(this.__data__=new Mi;++i<e;)this.add(t[i])}Qt.prototype.add=Qt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Qt.prototype.has=function(t){return this.__data__.has(t)};const mc=Qt,xc=function(t,i){for(var e=-1,n=null==t?0:t.length;++e<n;)if(i(t[e],e,t))return!0;return!1},vc=function(t,i){return t.has(i)},an=function(t,i,e,n,r,l){var a=1&e,o=t.length,d=i.length;if(o!=d&&!(a&&d>o))return!1;var g=l.get(t),p=l.get(i);if(g&&p)return g==i&&p==t;var f=-1,v=!0,b=2&e?new mc:void 0;for(l.set(t,i),l.set(i,t);++f<o;){var O=t[f],L=i[f];if(n)var E=a?n(L,O,f,i,t,l):n(O,L,f,t,i,l);if(void 0!==E){if(E)continue;v=!1;break}if(b){if(!xc(i,function(C,H){if(!vc(b,H)&&(O===C||r(O,C,e,n,l)))return b.push(H)})){v=!1;break}}else if(O!==L&&!r(O,L,e,n,l)){v=!1;break}}return l.delete(t),l.delete(i),v},Dc=function(t){var i=-1,e=Array(t.size);return t.forEach(function(n,r){e[++i]=[r,n]}),e},Sc=function(t){var i=-1,e=Array(t.size);return t.forEach(function(n){e[++i]=n}),e};var on=jt.Z?jt.Z.prototype:void 0,Ge=on?on.valueOf:void 0;var $c=Object.prototype.hasOwnProperty;var Qc=c(8137),dn="[object Arguments]",un="[object Array]",Zt="[object Object]",cn=Object.prototype.hasOwnProperty;const Wc=function(t,i,e,n,r,l){var a=(0,at.Z)(t),o=(0,at.Z)(i),d=a?un:bt(t),g=o?un:bt(i),p=(d=d==dn?Zt:d)==Zt,f=(g=g==dn?Zt:g)==Zt,v=d==g;if(v&&(0,be.Z)(t)){if(!(0,be.Z)(i))return!1;a=!0,p=!1}if(v&&!p)return l||(l=new It),a||(0,Qc.Z)(t)?an(t,i,e,n,r,l):function(t,i,e,n,r,l,a){switch(e){case"[object DataView]":if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=i.byteLength||!l(new Pt(t),new Pt(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,fe.Z)(+t,+i);case"[object Error]":return t.name==i.name&&t.message==i.message;case"[object RegExp]":case"[object String]":return t==i+"";case"[object Map]":var o=Dc;case"[object Set]":if(o||(o=Sc),t.size!=i.size&&!(1&n))return!1;var g=a.get(t);if(g)return g==i;n|=2,a.set(t,i);var p=an(o(t),o(i),n,r,l,a);return a.delete(t),p;case"[object Symbol]":if(Ge)return Ge.call(t)==Ge.call(i)}return!1}(t,i,d,e,n,r,l);if(!(1&e)){var b=p&&cn.call(t,"__wrapped__"),O=f&&cn.call(i,"__wrapped__");if(b||O){var L=b?t.value():t,E=O?i.value():i;return l||(l=new It),r(L,E,e,n,l)}}return!!v&&(l||(l=new It),function(t,i,e,n,r,l){var a=1&e,o=ve(t),d=o.length;if(d!=ve(i).length&&!a)return!1;for(var f=d;f--;){var v=o[f];if(!(a?v in i:$c.call(i,v)))return!1}var b=l.get(t),O=l.get(i);if(b&&O)return b==i&&O==t;var L=!0;l.set(t,i),l.set(i,t);for(var E=a;++f<d;){var C=t[v=o[f]],H=i[v];if(n)var Xt=a?n(H,C,v,i,t,l):n(C,H,v,t,i,l);if(!(void 0===Xt?C===H||r(C,H,e,n,l):Xt)){L=!1;break}E||(E="constructor"==v)}if(L&&!E){var te=t.constructor,ee=i.constructor;te!=ee&&"constructor"in t&&"constructor"in i&&!("function"==typeof te&&te instanceof te&&"function"==typeof ee&&ee instanceof ee)&&(L=!1)}return l.delete(t),l.delete(i),L}(t,i,e,n,r,l))},Jc=function gn(t,i,e,n,r){return t===i||(null==t||null==i||!(0,wt.Z)(t)&&!(0,wt.Z)(i)?t!=t&&i!=i:Wc(t,i,e,n,gn,r))},tg=function(t,i){return Jc(t,i)},qt=(t,i)=>t?qt(i%t,t):i,eg=(t,i)=>t*i/qt(t,i);class ig extends $t{constructor(i){super("Operant Choice",i),this.containsSequentialTriplicates=!1,this.correctCount={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0},this.index=-1,this.masterCriterion={sequentialCorrectTarget:this.config.iCannotKnow?56:35,sequentialCorrectTargetAchieved:!1,comparisonTarget:24,iCannotKnowTarget:this.config.iCannotKnow?18:0,sameTarget:6},this.maxShuffles=2500,this.numAllottedTimeouts=1,this.numTimeouts=0,this.sequentialCorrect=0,this.stimuliComparisonCopies=2,this.graph=this.createGraph(i),this.trials=this.createTrials()}get isComplete(){return console.log("this.sequentialCorrect >= this.trials.length * 2 (alternative criterion)",this.sequentialCorrect>=2*this.trials.length),console.log("this.meetsMasterCriterion1 && this.meetsMasterCriterion2",this.meetsMasterCriterion1&&this.meetsMasterCriterion2),this.sequentialCorrect>=2*this.trials.length||this.meetsMasterCriterion1&&this.meetsMasterCriterion2}get meetsMasterCriterion1(){const{sequentialCorrectTarget:i,sequentialCorrectTargetAchieved:e,comparisonTarget:n,iCannotKnowTarget:r,sameTarget:l}=this.masterCriterion,{greaterThan:a,iCannotKnow:o,lessThan:d,same:g}=this.correctCount;return this.sequentialCorrect===i&&(this.masterCriterion.sequentialCorrectTargetAchieved=!0),console.log(`Correctly sequentially completed ${i} trials during this block:`,e),console.log(`Same trials is gte than ${l}, comparison trials is gte than ${n}, and i cannot know trials is gte ${r}: `,g>=l&&a+d>=n&&o>=r),e||g>=l&&a+d>=n&&o>=r}get meetsMasterCriterion2(){return!!this.correctShownTargets&&this.correctCount.same>=this.correctShownTargets.same&&this.correctCount.lessThan>=this.correctShownTargets.lessThan&&this.correctCount.greaterThan>=this.correctShownTargets.greaterThan&&this.correctCount.iCannotKnow>=this.correctShownTargets.iCannotKnow}complete(){this.timeout&&clearTimeout(this.timeout),super.complete()}createGraph(i){const e=new Se("same","iCannotKnow",sn,nn);e.includeRelationsBetweenNetworks=i.iCannotKnow;const n=new I("A",1,k(i.stimulusCase)),r=new I("B",1,k(i.stimulusCase)),l=new I("C",1,k(i.stimulusCase));e.addNode(n),e.addNode(r),e.addNode(l),e.addTrainedAndMutualRelations(new B(n,r,"same",D.trained)),e.addTrainedAndMutualRelations(new B(n,l,"same",D.trained)),e.addTrainedAndMutualRelations(new B(r,l,"same",D.trained));const a=new I("A",2,k(i.stimulusCase)),o=new I("B",2,k(i.stimulusCase)),d=new I("C",2,k(i.stimulusCase));return e.addNode(a),e.addNode(o),e.addNode(d),e.addTrainedAndMutualRelations(new B(a,o,"greaterThan",D.trained)),e.addTrainedAndMutualRelations(new B(a,d,"greaterThan",D.trained)),e.addTrainedAndMutualRelations(new B(o,d,"greaterThan",D.trained)),console.log(e.toString()),e}createTrials(){var i,e;const n=[this.graph.trained,this.graph.mutuallyEntailed].flat().concat(this.config.iCannotKnow?this.graph.combinatoriallyEntailed:[]),r=m.Tz.reduce((f,v)=>Object.assign(Object.assign({},f),{[v]:n.filter(b=>b.relation===v)}),{}),l=m.Tz.reduce((f,v)=>Object.assign(Object.assign({},f),{[v]:n.filter(b=>b.relation===v).length}),{}),a=Object.values(l).filter(f=>f>0).reduce(eg),o=m.Tz.reduce((f,v)=>Object.assign(Object.assign({},f),{[v]:a/n.filter(b=>b.relation===v).length}),{}),d=Object.values(this.config.balance).filter(f=>f).reduce(qt);this.configBalanceDividedByGcd={different:0,same:this.config.balance.same/d,greaterThan:this.config.balance.greaterThan/d,lessThan:this.config.balance.lessThan/d,iCannotKnow:(null===(i=this.config.balance)||void 0===i?void 0:i.iCannotKnow)?this.config.balance.iCannotKnow/d:0};const g={different:0,same:this.config.balance.same*o.same,greaterThan:this.config.balance.greaterThan*o.greaterThan,lessThan:this.config.balance.lessThan*o.lessThan,iCannotKnow:(null===(e=this.config.balance)||void 0===e?void 0:e.iCannotKnow)?this.config.balance.iCannotKnow*o.iCannotKnow:0},p=Object.values(g).filter(f=>f).reduce(qt);for(const f of m.Tz){if(0===l[f])continue;const v=g[f]/p*this.stimuliComparisonCopies;for(let b=0;b<v;b++)this.trials=this.trials.concat(r[f].flat().map(O=>Object.assign(Object.assign({},O),{cueComponentConfigs:zt(this.config)})))}return this.shuffleUntilNoTriplicatesInARow(),this.trials}failed(){var i,e;null===(i=this.component)||void 0===i||i.setVisibility(!1),null===(e=this.component)||void 0===e||e.prompt("THANKS FOR PARTICIPATING",!0,V+(this.feedBackShown?Z:N)).subscribe()}feedbackEnabled(){return!0}grade(i){var e,n,r,l,a,o,d,g;const p=(null==i?void 0:i.cue.value)===this.trial.relation;if((null==i?void 0:i.cue.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++,this.correctCount[i.cue.value]++):(this.sequentialCorrect=0,this.incorrect++),this.meetsMasterCriterion1&&!this.correctShownTargets){for(this.correctShownTargets={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0};this.correctShownTargets.same<this.correctCount.same||this.correctShownTargets.greaterThan<this.correctCount.greaterThan||this.correctShownTargets.lessThan<this.correctCount.lessThan||this.correctShownTargets.iCannotKnow<this.correctCount.iCannotKnow;){if(!this.configBalanceDividedByGcd)throw Error("Config balance has not been created");this.correctShownTargets={different:0,same:(null===(e=this.correctShownTargets)||void 0===e?void 0:e.same)+(null===(n=this.configBalanceDividedByGcd)||void 0===n?void 0:n.same),greaterThan:(null===(r=this.correctShownTargets)||void 0===r?void 0:r.greaterThan)+(null===(l=this.configBalanceDividedByGcd)||void 0===l?void 0:l.greaterThan),lessThan:(null===(a=this.correctShownTargets)||void 0===a?void 0:a.lessThan)+(null===(o=this.configBalanceDividedByGcd)||void 0===o?void 0:o.lessThan),iCannotKnow:(null===(d=this.correctShownTargets)||void 0===d?void 0:d.iCannotKnow)+(null===(g=this.configBalanceDividedByGcd)||void 0===g?void 0:g.iCannotKnow)}}console.log("Shown targets set to",this.correctShownTargets)}return console.log("correct",this.correctCount),console.log("sequentialCorrect",this.sequentialCorrect),this.correctShownTargets&&p&&i?this.correctCount[i.cue.value]<=this.correctShownTargets[i.cue.value]?"CORRECT":null:p?"CORRECT":"WRONG"}nextTrial(){var i;console.log("index",this.index),this.isComplete?this.complete():(this.index==this.trials.length-1&&(null===(i=this.component)||void 0===i||i.setVisibility(!0,0),this.index=-1),super.nextTrial())}reset(){this.correctCount={different:0,same:0,greaterThan:0,lessThan:0,iCannotKnow:0},this.index=-1,this.correct=0,this.incorrect=0}retry(){var i,e;this.attempts++,null===(i=this.component)||void 0===i||i.setVisibility(!1),null===(e=this.component)||void 0===e||e.prompt("CLICK TO TRY AGAIN",!1,V+(this.feedBackShown?Z:N)).subscribe(()=>{var n;this.feedBackShown=!1,null===(n=this.component)||void 0===n||n.setVisibility(!0,0),this.nextTrial(),this.setTimeout()}),this.reset()}setTimeout(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{var i,e;null===(e=null===(i=this.component)||void 0===i?void 0:i.trialComponent)||void 0===e||e.clearTimer(),this.numTimeouts++,this.numTimeouts>this.numAllottedTimeouts?this.failed():this.retry()},2*this.trials.length*(1e3*this.config.trialTimeoutSeconds+1e3))}shuffleUntilNoTriplicatesInARow(){let i,e=0;for(let n=0;n<this.maxShuffles;n++){this.trials=(0,K.Z)(this.trials);for(const r of this.trials)if(tg(r.stimuli,null==i?void 0:i.stimuli)?e++:(i=r,e=0),3===e)break;if(e)break}e>=3&&(this.containsSequentialTriplicates=!0)}start(i){this.component=i,i.prompt("CLICK TO START",!1,V).subscribe(()=>{var e;this.setTimeout(),null===(e=this.component)||void 0===e||e.setVisibility(!0,0),this.nextTrial()})}}const ng=[[m.bR.same,m.bR.same,void 0],[m.bR.same,m.bR.greaterThan,void 0],[m.bR.same,m.bR.lessThan,void 0],[m.bR.lessThan,m.bR.same,void 0],[m.bR.lessThan,void 0,m.bR.lessThan],[m.bR.lessThan,m.bR.greaterThan,void 0],[m.bR.greaterThan,m.bR.same,void 0],[m.bR.greaterThan,m.bR.lessThan,void 0],[m.bR.greaterThan,void 0,m.bR.greaterThan]],sg=[[m.bR.lessThan,m.bR.lessThan,void 0],[m.bR.greaterThan,m.bR.greaterThan,void 0]];class rg extends $t{constructor(i,e){super("Test",i),this.numDuplicates=4,this.graph=e||this.createGraph(i)}createGraph(i){const e=new Se("same","iCannotKnow",sn,nn),n=new I("A",3,k(i.stimulusCase)),r=new I("B",3,k(i.stimulusCase)),l=new I("C",3,k(i.stimulusCase));e.addNode(n),e.addNode(r),e.addNode(l);const[a,o,d]=Ot(ng);a&&e.addTrainedAndMutualRelations(new B(n,r,a,D.trained)),o&&e.addTrainedAndMutualRelations(new B(n,l,o,D.trained)),d&&e.addTrainedAndMutualRelations(new B(r,l,d,D.trained)),console.log(e.toString());const g=new I("A",4,k(i.stimulusCase)),p=new I("B",4,k(i.stimulusCase)),f=new I("C",4,k(i.stimulusCase));e.addNode(g),e.addNode(p),e.addNode(f);const[v,b,O]=Ot(sg);return v&&e.addTrainedAndMutualRelations(new B(g,p,v,D.trained)),b&&e.addTrainedAndMutualRelations(new B(g,f,b,D.trained)),O&&e.addTrainedAndMutualRelations(new B(p,f,O,D.trained)),console.log(e.toString()),e}createTrials(){for(let i=0;i<this.numDuplicates;i++)this.trials=this.trials.concat([this.graph.mutuallyEntailed,this.graph.combinatoriallyEntailed].flat().map(e=>Object.assign(Object.assign({},e),{cueComponentConfigs:zt(this.config)})));return(0,K.Z)(this.trials)}}class lg extends $t{constructor(i,e){super("Training Networks",i),this.numAllottedTimeouts=1,this.numIdkProbeTrials=5,this.numProbeDuplicates=4,this.numProbeTrials=32,this.numTimeouts=0,this.numTrainingDuplicates=2,this.numTrainingTrials=20,this.probeFailuresAllotted=2,this.probesFailed=0,this.sequentialCorrect=0,this.sequentialCorrectTarget=23,this.graph=e}complete(){this.timeout&&clearTimeout(this.timeout),super.complete()}createTrials(){let i=[];for(let n=0;n<this.numTrainingDuplicates;n++)i=i.concat([this.graph.identities,this.graph.trained].flat().map(r=>Object.assign(Object.assign({},r),{cueComponentConfigs:zt(this.config)})));if(i.length!==this.numTrainingTrials)throw Error(`Training trials length "${i.length}" doesn't equal specified length "${this.numTrainingTrials}"`);let e=[];for(let n=0;n<this.numProbeDuplicates;n++)e=e.concat([this.graph.mutuallyEntailed,this.graph.combinatoriallyEntailed].flat().map(r=>Object.assign(Object.assign({},r),{cueComponentConfigs:zt(this.config)})));if(e.length!==this.numProbeTrials)throw Error(`Probe trials length "${e.length}" doesn't equal specified length "${this.numIdkProbeTrials}"`);return(0,K.Z)(i).concat((0,K.Z)(e))}feedbackEnabled(){return this.index<this.numTrainingTrials}grade(i){const e=(null==i?void 0:i.cue.value)===this.trial.relation;return(null==i?void 0:i.cue.value)===this.trial.relation?(this.correct++,this.sequentialCorrect++):(this.sequentialCorrect=0,this.incorrect++),e?"CORRECT":"WRONG"}nextTrial(){console.log("trial num",this.trialNum),console.log("sequential correct",this.sequentialCorrect),console.log("percent correct",this.percentCorrect),this.sequentialCorrect===this.sequentialCorrectTarget&&(this.index=this.numTrainingTrials-1),this.trialNum===this.numTrainingTrials&&100!==this.percentCorrect&&this.sequentialCorrect!==this.sequentialCorrectTarget?(console.log("training failed"),this.reset(),super.nextTrial()):this.trialNum===this.numProbeTrials+this.numTrainingTrials&&this.percentCorrect<(this.config.iCannotKnow?90:67.5)?(this.probesFailed++,console.log("probes failed",this.probesFailed),this.probesFailed===this.probeFailuresAllotted?this.failed():this.retry()):(this.trialNum===this.numTrainingTrials&&(this.timeout&&clearTimeout(this.timeout),this.correct=0,this.incorrect=0),super.nextTrial())}retry(){var i,e;this.attempts++,null===(i=this.component)||void 0===i||i.setVisibility(!1),null===(e=this.component)||void 0===e||e.prompt("CLICK TO TRY AGAIN",!1,V+(this.feedBackShown?Z:N)).subscribe(()=>{var n;this.feedBackShown=!1,null===(n=this.component)||void 0===n||n.setVisibility(!0,0),this.nextTrial(),this.setTimeout()}),this.reset()}setTimeout(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{var i,e;null===(e=null===(i=this.component)||void 0===i?void 0:i.trialComponent)||void 0===e||e.clearTimer(),this.numTimeouts++,this.numTimeouts>this.numAllottedTimeouts?this.failed():this.retry()},50*this.trials.length*(1e3*this.config.trialTimeoutSeconds+1e3))}start(i){this.component=i,0===this.trials.length&&this.reset(),i.prompt("CLICK TO START",!1,V).subscribe(()=>{var e;this.setTimeout(),null===(e=this.component)||void 0===e||e.setVisibility(!0,0),this.nextTrial()})}}class ag{constructor(i){this.blocks=[];const e=new rg(i),n=e.graph;this.config=i,this.blocks=[e,new dc(i),new ig(i),new lg(i,n)]}}let Ut=(()=>{class t{constructor(e){this.configSvc=e}get trialTimeoutSeconds(){if(!this.conditions)throw Error("conditions not defined");return this.conditions.config.trialTimeoutSeconds}blocks$(){return this.configSvc.config$().pipe((0,Jl.U)(e=>(this.conditions=new ag(Object.assign(Object.assign({},e),{stimulusCase:la()})),this.conditions.blocks)))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Xl.R))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Wt(t){return(0,w.X$)((null==t?void 0:t.anchor)||"fadeOut",[(0,w.SB)("false",(0,w.oB)({visibility:"visible",opacity:1})),(0,w.SB)(":leave",(0,w.oB)({visibility:"visible",opacity:1})),(0,w.SB)("true",(0,w.oB)({visibility:"hidden",opacity:0})),(0,w.eR)("void => *",(0,w.jt)(0)),(0,w.eR)("* => true",(0,w.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}const og=function(t,i){return{value:t,params:i}};let dg=(()=>{class t{constructor(e,n){this.data=e,this.ref=n,this.animated=!1,setTimeout(()=>this.animated=!0,0),setTimeout(()=>this.ref.close(),this.data.durationMs);const r=new Audio;r.src=`./assets/${e.feedback.toLowerCase().replaceAll(" ","-")}.mp3`,r.load(),r.play().then(()=>r.remove())}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(ce),s.Y36(Ct))},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-correct-dialog"]],decls:3,vars:5,consts:[[1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",s.WLB(2,og,n.animated,n.data.animationParams)),s.xp6(2),s.Oqu(n.data.feedback))},styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{font-size:clamp(1rem,8vw,15rem);white-space:nowrap}"],data:{animation:[Wt()]}}),t})();var mt=c(4762),Jt=c(9524),ug=c(409);function fn(t){return(0,w.X$)((null==t?void 0:t.anchor)||"fadeIn",[(0,w.SB)("void",(0,w.oB)({visibility:"hidden",opacity:0})),(0,w.SB)("false",(0,w.oB)({visibility:"hidden",opacity:0})),(0,w.SB)("true",(0,w.oB)({visibility:"visible",opacity:1})),(0,w.eR)("* => true",(0,w.jt)("{{duration}}ms {{delay}}ms ease-in"),{params:{duration:(null==t?void 0:t.duration)||1e3,delay:(null==t?void 0:t.delay)||0}})])}function Oe(t){return(0,ge.H)(t).toPromise()}const cg=function(t){return{delay:t}},gg=function(t,i){return{value:t,params:i}},fg=function(t){return{"d-none":t}},hg=function(t){return{"pointer-events":t}};let hn=(()=>{class t{constructor(){this.animationDelay=0,this.disabled=!1,this.selected=new s.vpe}select(){this.disabled=!0,this.selected.emit(this.config)}set(e){return(0,mt.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield Oe(N),this.disabled=!1,this.config=e,this.animate="fade-in"})}tap(){this.disabled=!0,this.selected.emit(this.config)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-cue"]],inputs:{animationDelay:"animationDelay"},outputs:{selected:"selected"},decls:2,vars:17,consts:[["matRipple","",1,"trial-item","dynamic-text",3,"matRippleDisabled","ngClass","ngStyle","tap"]],template:function(e,n){1&e&&(s.TgZ(0,"button",0),s.NdJ("tap",function(){return!n.disabled&&n.select()}),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",null==n.config?null:n.config.fileName),s.Q6J("@fadeIn",s.WLB(10,gg,"fade-in"===n.animate,s.VKq(8,cg,n.animationDelay)))("@fadeOut","fade-out"===n.animate)("matRippleDisabled",n.disabled)("ngClass",s.VKq(13,fg,void 0===n.config))("ngStyle",s.VKq(15,hg,null!=n.config&&n.config.value?"all":"none")),s.xp6(1),s.hij(" ",null!=n.config&&n.config.isArbitrary?"\xa0":(null==n.config?null:n.config.viewValue)||"","\n"))},directives:[it.wG,x.mk,x.PC],styles:["[_nghost-%COMP%]{display:block}button.trial-item[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;aspect-ratio:2;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[fn(),Wt({duration:N})]}}),t})();const mg=function(t){return{delay:t}},pg=function(t,i){return{value:t,params:i}};let mn=(()=>{class t{constructor(){this.animationDelay=0}set(e){return(0,mt.mG)(this,void 0,void 0,function*(){this.animate="fade-out",yield Oe(N),this.backgroundImage=m.Sg,this.cue=e,this.animate="fade-in"})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["trial-stimulus"]],inputs:{animationDelay:"animationDelay"},decls:2,vars:10,consts:[[1,"trial-item","dynamic-text"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s._uU(1),s.qZA()),2&e&&(s.Udp("background-image",n.backgroundImage),s.Q6J("@fadeIn",s.WLB(7,pg,"fade-in"===n.animate,s.VKq(5,mg,n.animationDelay)))("@fadeOut","fade-out"===n.animate),s.xp6(1),s.hij(" ",n.cue,"\n"))},styles:["[_nghost-%COMP%]{display:block}button.trial-item[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;aspect-ratio:2;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}",""],data:{animation:[fn(),Wt({duration:N})]}}),t})();function xg(t,i){1&t&&s._UZ(0,"trial-stimulus",4),2&t&&s.Q6J("animationDelay",i.$implicit)}function yg(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial-cue",5),s.NdJ("selected",function(r){const a=s.CHM(e).index;return s.oxw().selected(r,a+1)}),s.qZA()}2&t&&s.Q6J("animationDelay",i.$implicit)}let W=class{constructor(i){this.conditionSvc=i,this.animationDelayMs=ln,this.complete=!1,this.completed=new s.vpe,this.secondsInTrial=0}ngAfterViewInit(){this.trialCueComponents.changes.pipe((0,Jt.t)(this)).subscribe(),this.trialStimulusComponents.changes.pipe((0,Jt.t)(this)).subscribe()}selected(i,e){var n;null===(n=this.timerSub)||void 0===n||n.unsubscribe(),this.completed.emit({cue:i,position:e})}clearTimer(){this.timerSub&&this.timerSub.unsubscribe()}setTimer(){this.timerSub&&this.timerSub.unsubscribe(),this.secondsInTrial=0,this.timerSub=(0,ge.H)(Me,1e3).pipe((0,ug.o)(()=>this.secondsInTrial<this.conditionSvc.trialTimeoutSeconds),(0,X.b)(()=>{this.secondsInTrial++,this.secondsInTrial==this.conditionSvc.trialTimeoutSeconds&&this.completed.emit()}),(0,Jt.t)(this)).subscribe()}show(i){var e,n;console.log(i),this.setTimer();for(const[r,l]of i.stimuli.entries())null===(e=this.trialStimulusComponents.get(r))||void 0===e||e.set(l.value);for(let r=0;r<this.trialCueComponents.length;r++)null===(n=this.trialCueComponents.get(r))||void 0===n||n.set(i.cueComponentConfigs[r])}};W.\u0275fac=function(i){return new(i||W)(s.Y36(Ut))},W.\u0275cmp=s.Xpm({type:W,selectors:[["trial"]],viewQuery:function(i,e){if(1&i&&(s.Gf(hn,5),s.Gf(mn,5)),2&i){let n;s.iGM(n=s.CRH())&&(e.trialCueComponents=n),s.iGM(n=s.CRH())&&(e.trialStimulusComponents=n)}},outputs:{completed:"completed"},decls:4,vars:2,consts:[[1,"trial-sample-stimuli"],[3,"animationDelay",4,"ngFor","ngForOf"],[1,"trial-buttons"],[3,"animationDelay","selected",4,"ngFor","ngForOf"],[3,"animationDelay"],[3,"animationDelay","selected"]],template:function(i,e){1&i&&(s.TgZ(0,"div",0),s.YNc(1,xg,1,1,"trial-stimulus",1),s.qZA(),s.TgZ(2,"div",2),s.YNc(3,yg,1,1,"trial-cue",3),s.qZA()),2&i&&(s.xp6(1),s.Q6J("ngForOf",e.animationDelayMs.stimuli),s.xp6(2),s.Q6J("ngForOf",e.animationDelayMs.cues))},directives:[x.sg,mn,hn],styles:["[_nghost-%COMP%]{display:block}button.trial-item[_ngcontent-%COMP%]:hover{box-shadow:inset 0 50px 300px 50px #0003;cursor:pointer}.trial-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:2em}.trial-item[_ngcontent-%COMP%]{align-items:center;aspect-ratio:2;background-color:#fff;background-size:cover;border:unset;display:flex;border-radius:clamp(3px,1vw,15px);justify-content:center;margin:1vw;min-width:150px;width:20vw}.trial-item[_ngcontent-%COMP%]:hover{cursor:default}.trial-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.dynamic-text[_ngcontent-%COMP%]{font-weight:bold;font-size:clamp(1rem,2vw,4rem);white-space:nowrap}.trial-sample-stimuli[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}"]}),W=(0,mt.gn)([(0,Jt.c)(),(0,mt.w6)("design:paramtypes",[Ut])],W);let vg=(()=>{class t{constructor(e,n){this.data=e,this.ref=n,this.animated=!1,this.disableClose=Boolean(this.data.disableClose)}close(){return(0,mt.mG)(this,void 0,void 0,function*(){this.animated=!0,yield Oe(N),this.ref.close()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(ce),s.Y36(Ct))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block-start-dialog"]],decls:3,vars:3,consts:[["matRipple","",1,"vw-100","vh-100","d-flex","justify-content-center","align-items-center","bg-white",3,"matRippleDisabled","tap"],[1,"overlay-dynamic-text","user-select-none"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.NdJ("tap",function(){return!1===n.disableClose&&n.close()}),s.TgZ(1,"strong",1),s._uU(2),s.qZA(),s.qZA()),2&e&&(s.Q6J("@fadeOut",n.animated)("matRippleDisabled",n.animated||n.disableClose),s.xp6(2),s.Oqu(n.data.text))},directives:[it.wG],styles:[".overlay-dynamic-text[_ngcontent-%COMP%]{font-size:clamp(1rem,8vw,15rem);line-height:clamp(1rem,8vw,15rem);text-align:center}"],data:{animation:[Wt({duration:N})]}}),t})();function pn(t){return{data:t,disableClose:!0,hasBackdrop:!1,closeOnNavigation:!0,height:"100vh",maxHeight:"100vh",maxWidth:"100vw",panelClass:["fullscreen-dialog-container","animate__animated","animate__fadeIn"],width:"100vw"}}function Ag(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"trial",1),s.NdJ("completed",function(r){return s.CHM(e),s.oxw().trialCompleted.emit(r)}),s.qZA()}}let Le=(()=>{class t{constructor(e,n){this.conditionSvc=e,this.dialog=n,this.completed=new s.vpe,this.conditions=this.conditionSvc.conditions,this.isVisible=!0,this.trialCompleted=new s.vpe}prompt(e,n=!1,r=Me){return(0,ge.H)(r).pipe((0,yi.P)(),(0,Wl.w)(()=>this.dialog.open(vg,pn({text:e,disableClose:n})).afterClosed()))}setVisibility(e,n=Me){setTimeout(()=>this.isVisible=e,n)}showFeedback(e,n=1e3,r={delay:Z,duration:N}){this.dialog.open(dg,pn({animationParams:r,durationMs:n,feedback:e}))}showTrial(e,n=Z){setTimeout(()=>{var r;return null===(r=this.trialComponent)||void 0===r?void 0:r.show(e)},n)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ut),s.Y36(Gt))},t.\u0275cmp=s.Xpm({type:t,selectors:[["block"]],viewQuery:function(e,n){if(1&e&&s.Gf(W,5),2&e){let r;s.iGM(r=s.CRH())&&(n.trialComponent=r.first)}},outputs:{completed:"completed",trialCompleted:"trialCompleted"},decls:1,vars:1,consts:[[3,"completed",4,"ngIf"],[3,"completed"]],template:function(e,n){1&e&&s.YNc(0,Ag,1,0,"trial",0),2&e&&s.Q6J("ngIf",n.isVisible)},styles:[""],data:{animation:[]}}),t})(),Cg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[Ul,x.ez,fi,$l,ql]]}),t})();s.B6R(Le,[x.O5,W],[]);var xn=c(1896);const wg=[{path:"",component:(()=>{class t{constructor(e){this.conditionsSvc=e,this.blocks=[],this.completed=new s.vpe}nextBlock(){var e;this.blocks.length>0?null===(e=this.blocks.shift())||void 0===e||e.start(this.blockComponent):(this.blockComponent.prompt("THANKS FOR PARTICIPATING!",!0,V).subscribe(),this.completed.emit())}ngOnInit(){return(0,mt.mG)(this,void 0,void 0,function*(){this.blocks=yield this.conditionsSvc.blocks$().toPromise(),this.nextBlock()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(Ut))},t.\u0275cmp=s.Xpm({type:t,selectors:[["study"]],viewQuery:function(e,n){if(1&e&&s.Gf(Le,7),2&e){let r;s.iGM(r=s.CRH())&&(n.blockComponent=r.first)}},decls:1,vars:0,consts:[[3,"completed"]],template:function(e,n){1&e&&(s.TgZ(0,"block",0),s.NdJ("completed",function(){return n.nextBlock()}),s.qZA())},directives:[Le],styles:["[_nghost-%COMP%]{-webkit-box-align:center;-webkit-box-pack:center;align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;width:100%}"]}),t})()}];let _g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[xn.Bz.forChild(wg)],xn.Bz]}),t})(),Dg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[x.ez,_g,Cg]]}),t})()},2151:function(ie){(function(){"use strict";var J=function(u,h){return u.replace(/(^|-)/g,"$1\\u"+(h=h||"")).replace(/,/g,"\\u"+h)},c=J("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),x="a-z"+J("DF-F6,F8-FF","00"),s="A-Z"+J("C0-D6,D8-DE","00"),St=function(u,h,A,R){return u=u||c,h=h||x,A=A||s,R=R||"A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",{capitalize:new RegExp("(^|["+u+"])(["+h+"])","g"),pascal:new RegExp("(^|["+u+"])+(["+h+A+"])","g"),fill:new RegExp("["+u+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+h+"])","g"),improper:new RegExp("\\b("+R+")\\b","g"),relax:new RegExp("([^"+A+"])(["+A+"]*)(["+A+"])(?=[^"+A+"]|$)","g"),upper:new RegExp("^[^"+h+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+u+"]")}},Y=St(),y={re:Y,unicodes:J,regexps:St,types:[],up:String.prototype.toUpperCase,low:String.prototype.toLowerCase,cap:function(u){return y.up.call(u.charAt(0))+u.slice(1)},decap:function(u){return y.low.call(u.charAt(0))+u.slice(1)},deapostrophe:function(u){return u.replace(Y.apostrophe,"")},fill:function(u,h,A){return null!=h&&(u=u.replace(Y.fill,function(R,j){return j?h+j:""})),A&&(u=y.deapostrophe(u)),u},prep:function(u,h,A,R){if(u=null==u?"":u+"",!R&&Y.upper.test(u)&&(u=y.low.call(u)),!h&&!Y.hole.test(u)){var j=y.fill(u," ");Y.hole.test(j)&&(u=j)}return!A&&!Y.room.test(u)&&(u=u.replace(Y.relax,y.relax)),u},relax:function(u,h,A,R){return h+" "+(A?A+" ":"")+R}},S={_:y,of:function(u){for(var h=0,A=y.types.length;h<A;h++)if(S[y.types[h]].apply(S,arguments)===u)return y.types[h]},flip:function(u){return u.replace(/\w/g,function(h){return(h==y.up.call(h)?y.low:y.up).call(h)})},random:function(u){return u.replace(/\w/g,function(h){return(Math.round(Math.random())?y.up:y.low).call(h)})},type:function(u,h){S[u]=h,y.types.push(u)}},X={lower:function(u,h,A){return y.fill(y.low.call(y.prep(u,h)),h,A)},snake:function(u){return S.lower(u,"_",!0)},constant:function(u){return S.upper(u,"_",!0)},camel:function(u){return y.decap(S.pascal(u))},kebab:function(u){return S.lower(u,"-",!0)},upper:function(u,h,A){return y.fill(y.up.call(y.prep(u,h,!1,!0)),h,A)},capital:function(u,h,A){return y.fill(y.prep(u).replace(Y.capitalize,function(R,j,P){return j+y.up.call(P)}),h,A)},header:function(u){return S.capital(u,"-",!0)},pascal:function(u){return y.fill(y.prep(u,!1,!0).replace(Y.pascal,function(h,A,R){return y.up.call(R)}),"",!0)},title:function(u){return S.capital(u).replace(Y.improper,function(h,A,R,j){return R>0&&R<j.lastIndexOf(" ")?y.low.call(h):h})},sentence:function(u,h,A){return u=S.lower(u).replace(Y.sentence,function(R,j,P){return j+y.up.call(P)}),h&&h.forEach(function(R){u=u.replace(new RegExp("\\b"+S.lower(R)+"\\b","g"),y.cap)}),A&&A.forEach(function(R){u=u.replace(new RegExp("(\\b"+S.lower(R)+"\\. +)(\\w)"),function(j,P,z){return P+y.low.call(z)})}),u}};for(var Ft in X.squish=X.pascal,S.default=S,X)S.type(Ft,X[Ft]);var pt="function"==typeof pt?pt:function(){};pt(ie.exports?ie.exports=S:this.Case=S)}).call(this)}}]);